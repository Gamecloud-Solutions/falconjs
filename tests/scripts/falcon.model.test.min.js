(function(){var e={}.hasOwnProperty,t=function(t,l){function o(){this.constructor=t}for(var n in l)e.call(l,n)&&(t[n]=l[n]);return o.prototype=l.prototype,t.prototype=new o,t.__super__=l.prototype,t};describe("Testing Model Methods",function(){return beforeEach(function(){return Falcon.baseApiUrl="",Falcon.baseTemplateUrl=""}),it("Should initialize correctly",function(){var e,l,o,n,a,r,i,u,c,s;return e=function(e){function l(){return c=l.__super__.constructor.apply(this,arguments)}return t(l,e),l}(Falcon.Model),l=function(e){function l(){return s=l.__super__.constructor.apply(this,arguments)}return t(l,e),l}(Falcon.Model),a=sinon.stub(e.prototype,"initialize"),r=new e,a.should.have.been.calledOnce,a.should.have.been.calledWith(),a.reset(),i=new e(u=new l),a.should.have.been.calledOnce,a.should.have.been.calledWith(),expect(i.parent).to.be.equal(u),a.reset(),i=new e(o={hello:"world"}),a.should.have.been.calledOnce,a.should.have.been.calledWith(o),expect(i.parent).to.be.undefined,a.reset(),i=new e(o={hello:"world"},u=new l),a.should.have.been.calledOnce,a.should.have.been.calledWith(o),expect(i.parent).to.be.equal(u),a.reset(),i=new e(u=new l,o={hello:"world"}),a.should.have.been.calledOnce,a.should.have.been.calledWith(o),expect(i.parent).to.be.equal(u),a.reset(),i=new e(n=new Falcon.Model({hello:"world"}),u=new l),a.should.have.been.calledOnce,a.should.have.been.calledWith(n.unwrap()),expect(i.parent).to.be.equal(u),a.reset(),a.restore()}),it("Should test the get, set, and toggle methods",function(){var e,l,o,n,a,r;return n=null,e=function(e){function o(){return a=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.initialize=function(){return this.foo=ko.observable(),this.model_b=n=new l},o}(Falcon.Model),l=function(e){function l(){return r=l.__super__.constructor.apply(this,arguments)}return t(l,e),l}(Falcon.Model),o=new e({hello:"world",foo:"bar",truth:!0,model_b:{something:"cool"}}),expect(o.hello).to.be.equal("world"),expect(o.foo).to.be.a("function"),expect(o.truth).to.be["true"],expect(o.model_b).to.be.instanceOf(l),expect(o.model_b).to.be.equal(n),expect(o.get("hello")).to.be.equal("world"),expect(o.get("foo")).to.be.equal("bar"),expect(o.get("truth")).to.be.equal(!0),expect(o.model_b).to.be.instanceOf(l),expect(o.model_b).to.be.equal(n),o.set("foo","baz"),o.set("hello","goodbye"),expect(o.get("hello")).to.be.equal("goodbye"),expect(o.get("foo")).to.be.equal("baz"),expect(o.get("truth")).to.be.equal(!0),expect(o.model_b).to.be.instanceOf(l),expect(o.model_b).to.be.instanceOf(l),expect(o.model_b).to.be.equal(n),o.set({foo:"bar",hello:"world"}),expect(o.get("hello")).to.be.equal("world"),expect(o.get("foo")).to.be.equal("bar"),expect(o.get("truth")).to.be.equal(!0),expect(o.model_b).to.be.instanceOf(l),expect(o.model_b).to.be.instanceOf(l),expect(o.model_b).to.be.equal(n),o.toggle("truth"),expect(o.get("hello")).to.be.equal("world"),expect(o.get("foo")).to.be.equal("bar"),expect(o.get("truth")).to.be.equal(!1),expect(o.model_b).to.be.instanceOf(l),expect(o.model_b).to.be.equal(n),expect(n.get("something")).to.be.equal("cool")}),it("Should test the fill and serialize methods",function(){var e,l,o,n,a,r,i,u,c,s,d,h,p,f;return i=null,u=null,a=null,l=function(l){function n(){return d=n.__super__.constructor.apply(this,arguments)}return t(n,l),n.prototype.url="model_a",n.prototype.fields={foo:"foo",model_b:"model_b",model_b2:"model_b2",collection_c:"collection_c",_server:"_client",url:"_url"},n.prototype.initialize=function(){return this._client=ko.observable(),this.model_b=i=new o,this.model_b2=u=new o,this.collection_c=a=new e},n}(Falcon.Model),o=function(e){function l(){return h=l.__super__.constructor.apply(this,arguments)}return t(l,e),l.prototype.url="model_b",l.prototype.fields={b_foo:"b_bar"},l}(Falcon.Model),n=function(e){function l(){return p=l.__super__.constructor.apply(this,arguments)}return t(l,e),l.prototype.fields={"this":"that"},l}(Falcon.Model),e=function(e){function l(){return f=l.__super__.constructor.apply(this,arguments)}return t(l,e),l.prototype.model=n,l}(Falcon.Collection),s={id:33,foo:"bar",_server:"Some Data",url:"MODEL_A2",model_b:{b_foo:"B BAR"},model_b2:{id:"test",b_foo:"B BAR 2",url:"model_b2"},collection_c:[{"this":"That One"},{"this":"That Two"},{"this":"That Three"}]},r=new l,r.fill(s),expect(r.get("id")).to.be.equal(33),expect(r.get("foo")).to.be.equal("bar"),expect(r.get("_server")).to.be.undefined,expect(r.get("_client")).to.be.equal("Some Data"),expect(r.get("url")).to.be.equal("model_a"),expect(r.get("_url")).to.be.equal("MODEL_A2"),expect(r.get("model_b")).to.be.equal(i),expect(r.get("model_b").get("b_foo")).to.be.undefined,expect(r.get("model_b").get("b_bar")).to.be.equal("B BAR"),expect(r.get("model_b").get("url")).to.be.equal("model_b"),expect(r.get("model_b2")).to.be.equal(u),expect(r.get("model_b2").get("id")).to.be.equal("test"),expect(r.get("model_b2").get("b_foo")).to.be.undefined,expect(r.get("model_b2").get("b_bar")).to.be.equal("B BAR 2"),expect(r.get("model_b2").get("url")).to.be.equal("model_b2"),expect(r.get("collection_c")).to.be.instanceOf(e),expect(r.get("collection_c")).to.be.equal(a),expect(r.get("collection_c").length()).to.equal(3),expect(r.get("collection_c").first()).to.be.instanceOf(n),expect(r.get("collection_c").first().get("this")).to.be.undefined,expect(r.get("collection_c").first().get("that")).to.equal("That One"),c=r.serialize(),c.id.should.equal(33),c.foo.should.equal("bar"),c._server.should.equal("Some Data"),c.model_b.should.be.a("object"),expect(c.model_b.id).to.equal(null),c.model_b.b_foo.should.equal("B BAR"),c.model_b2.should.be.a("object"),c.model_b2.id.should.equal("test"),c.model_b2.b_foo.should.equal("B BAR 2"),c.collection_c.should.be.a("array"),c.collection_c.should.have.length(3),c.collection_c[0].should.be.a("object"),c.collection_c[0]["this"].should.equal("That One"),expect(c._client).to.be.undefined,expect(c.model_b.b_bar).to.be.undefined,expect(c.model_b2.b_bar).to.be.undefined,expect(c.collection_c[0].that).to.be.undefined,c=r.serialize(["id","_client"]),c.id.should.equal(33),c._server.should.equal("Some Data"),expect(c.foo).to.be.undefined,expect(c._client).to.be.undefined,expect(c.model_b).to.be.undefined,expect(c.model_b2).to.be.undefined,expect(c.collection_c).to.be.undefined}),it("Should test the unwrap method",function(){var e,l,o,n,a,r,i,u,c,s,d,h;return i=null,a=null,l=function(l){function n(){return c=n.__super__.constructor.apply(this,arguments)}return t(n,l),n.prototype.fields={quux:"foo"},n.prototype.initialize=function(){return this.foo=ko.observable(),this.model_b=i=new o,this.collection_c=a=new e},n}(Falcon.Model),o=function(e){function l(){return s=l.__super__.constructor.apply(this,arguments)}return t(l,e),l.prototype.initialize=function(){return this.something=ko.observable()},l}(Falcon.Model),n=function(e){function l(){return d=l.__super__.constructor.apply(this,arguments)}return t(l,e),l.prototype.initialize=function(){return this.hello="world"},l}(Falcon.Model),e=function(e){function l(){return h=l.__super__.constructor.apply(this,arguments)}return t(l,e),l.prototype.model=n,l}(Falcon.Collection),r=new l,r.fill({quux:"bar",model_b:{something:"cool"},collection_c:[{hello:"world"},{hello:"world2"}]}),u=r.unwrap(),expect(u.quux).to.be.undefined,u.foo.should.be.a("function"),u.foo().should.equal("bar"),u.model_b.should.be.a("object"),u.model_b.something.should.be.a("function"),u.model_b.something().should.equal("cool"),u.collection_c.should.be.a("array"),u.collection_c.should.have.length(2),u.collection_c[0].hello.should.equal("world"),u.collection_c[1].hello.should.equal("world2")}),describe("Testing makeUrl combinations",function(){var e,l,o,n,a,r,i,u,c,s;return e=function(e){function l(){return r=l.__super__.constructor.apply(this,arguments)}return t(l,e),l.prototype.url="model_a",l}(Falcon.Model),l=function(e){function l(){return i=l.__super__.constructor.apply(this,arguments)}return t(l,e),l.prototype.url="/model_b",l}(Falcon.Model),o=function(e){function l(){return u=l.__super__.constructor.apply(this,arguments)}return t(l,e),l.prototype.url="model_c.json",l}(Falcon.Model),n=function(e){function l(){return c=l.__super__.constructor.apply(this,arguments)}return t(l,e),l.prototype.url="model_d.json",l}(Falcon.Model),a=function(e){function l(){return s=l.__super__.constructor.apply(this,arguments)}return t(l,e),l.prototype.url=function(){return"model_e"},l}(Falcon.Model),beforeEach(function(){return Falcon.baseApiUrl=null}),it("Should test the makeUrl method, numeric id, no baseUrl, no parent, no extension",function(){var t;return t=new e({id:1}),t.makeUrl("GET").should.equal("/model_a/1"),t.makeUrl("POST").should.equal("/model_a"),t.makeUrl("PUT").should.equal("/model_a/1"),t.makeUrl("DELETE").should.equal("/model_a/1")}),it("Should test the makeUrl method, string id, no baseUrl, no parent, no extension",function(){var e;return e=new l({id:"b"}),e.makeUrl("GET").should.equal("/model_b/b"),e.makeUrl("POST").should.equal("/model_b"),e.makeUrl("PUT").should.equal("/model_b/b"),e.makeUrl("DELETE").should.equal("/model_b/b")}),it("Should test the makeUrl method, numeric id, with shorter baseUrl, no parent, no extension",function(){var t;return t=new e({id:1}),Falcon.baseApiUrl="http://www.falconjs.com",t.makeUrl("GET").should.equal("http://www.falconjs.com/model_a/1"),t.makeUrl("POST").should.equal("http://www.falconjs.com/model_a"),t.makeUrl("PUT").should.equal("http://www.falconjs.com/model_a/1"),t.makeUrl("DELETE").should.equal("http://www.falconjs.com/model_a/1")}),it("Should test the makeUrl method, string id, with shorter baseUrl, no parent, no extension",function(){var e;return e=new l({id:"b"}),Falcon.baseApiUrl="http://www.falconjs.com",e.makeUrl("GET").should.equal("http://www.falconjs.com/model_b/b"),e.makeUrl("POST").should.equal("http://www.falconjs.com/model_b"),e.makeUrl("PUT").should.equal("http://www.falconjs.com/model_b/b"),e.makeUrl("DELETE").should.equal("http://www.falconjs.com/model_b/b")}),it("Should test the makeUrl method, numeric id, with baseUrl, no parent, no extension",function(){var t;return t=new e({id:1}),Falcon.baseApiUrl="http://www.falconjs.com/",t.makeUrl("GET").should.equal("http://www.falconjs.com/model_a/1"),t.makeUrl("POST").should.equal("http://www.falconjs.com/model_a"),t.makeUrl("PUT").should.equal("http://www.falconjs.com/model_a/1"),t.makeUrl("DELETE").should.equal("http://www.falconjs.com/model_a/1")}),it("Should test the makeUrl method, string id, with baseUrl, no parent, no extension",function(){var e;return e=new l({id:"b"}),Falcon.baseApiUrl="http://www.falconjs.com/",e.makeUrl("GET").should.equal("http://www.falconjs.com/model_b/b"),e.makeUrl("POST").should.equal("http://www.falconjs.com/model_b"),e.makeUrl("PUT").should.equal("http://www.falconjs.com/model_b/b"),e.makeUrl("DELETE").should.equal("http://www.falconjs.com/model_b/b")}),it("Should test the makeUrl method, no baseUrl, with parent, no extension",function(){var t,o;return o=new l({id:"b"}),t=new e({id:2},o),t.makeUrl("GET").should.equal("/model_b/b/model_a/2"),t.makeUrl("POST").should.equal("/model_b/b/model_a"),t.makeUrl("PUT").should.equal("/model_b/b/model_a/2"),t.makeUrl("DELETE").should.equal("/model_b/b/model_a/2")}),it("Should test the makeUrl method, with baseUrl, with parent, no extension",function(){var t,o;return o=new l({id:"b"}),t=new e({id:2},o),Falcon.baseApiUrl="http://www.falconjs.com/",t.makeUrl("GET").should.equal("http://www.falconjs.com/model_b/b/model_a/2"),t.makeUrl("POST").should.equal("http://www.falconjs.com/model_b/b/model_a"),t.makeUrl("PUT").should.equal("http://www.falconjs.com/model_b/b/model_a/2"),t.makeUrl("DELETE").should.equal("http://www.falconjs.com/model_b/b/model_a/2")}),it("Should test the makeUrl method, no baseUrl, with explicit parent, no extension",function(){var t,o;return o=new l({id:"b"}),t=new e({id:3}),t.makeUrl("GET",o).should.equal("/model_b/b/model_a/3"),t.makeUrl("POST",o).should.equal("/model_b/b/model_a"),t.makeUrl("PUT",o).should.equal("/model_b/b/model_a/3"),t.makeUrl("DELETE",o).should.equal("/model_b/b/model_a/3")}),it("Should test the makeUrl method, with baseUrl, with explicit parent, no extension",function(){var t,o;return o=new l({id:"b"}),t=new e({id:3}),Falcon.baseApiUrl="http://www.falconjs.com/",t.makeUrl("GET",o).should.equal("http://www.falconjs.com/model_b/b/model_a/3"),t.makeUrl("POST",o).should.equal("http://www.falconjs.com/model_b/b/model_a"),t.makeUrl("PUT",o).should.equal("http://www.falconjs.com/model_b/b/model_a/3"),t.makeUrl("DELETE",o).should.equal("http://www.falconjs.com/model_b/b/model_a/3")}),it("Should test the makeUrl method, no baseUrl, with overriden parent, no extension",function(){var t,o;return o=new l({id:"b"}),t=new e({id:3},o),t.makeUrl("GET",null).should.equal("/model_a/3"),t.makeUrl("POST",null).should.equal("/model_a"),t.makeUrl("PUT",null).should.equal("/model_a/3"),t.makeUrl("DELETE",null).should.equal("/model_a/3")}),it("Should test the makeUrl method, with baseUrl, with overriden parent, no extension",function(){var t,o;return o=new l({id:"b"}),t=new e({id:3},o),Falcon.baseApiUrl="http://www.falconjs.com/",t.makeUrl("GET",null).should.equal("http://www.falconjs.com/model_a/3"),t.makeUrl("POST",null).should.equal("http://www.falconjs.com/model_a"),t.makeUrl("PUT",null).should.equal("http://www.falconjs.com/model_a/3"),t.makeUrl("DELETE",null).should.equal("http://www.falconjs.com/model_a/3")}),it("Should test the makeUrl method, numeric index, no baseUrl, no parent, with extension",function(){var e;return e=new o({id:1}),e.makeUrl("GET").should.equal("/model_c/1.json"),e.makeUrl("POST").should.equal("/model_c.json"),e.makeUrl("PUT").should.equal("/model_c/1.json"),e.makeUrl("DELETE").should.equal("/model_c/1.json")}),it("Should test the makeUrl method, numeric index, with shorter baseUrl, no parent, with extension",function(){var e;return e=new o({id:1}),Falcon.baseApiUrl="http://www.falconjs.com",e.makeUrl("GET").should.equal("http://www.falconjs.com/model_c/1.json"),e.makeUrl("POST").should.equal("http://www.falconjs.com/model_c.json"),e.makeUrl("PUT").should.equal("http://www.falconjs.com/model_c/1.json"),e.makeUrl("DELETE").should.equal("http://www.falconjs.com/model_c/1.json")}),it("Should test the makeUrl method, numeric index, no baseUrl, no parent, with extension",function(){var e;return e=new o({id:1}),Falcon.baseApiUrl="http://www.falconjs.com/",e.makeUrl("GET").should.equal("http://www.falconjs.com/model_c/1.json"),e.makeUrl("POST").should.equal("http://www.falconjs.com/model_c.json"),e.makeUrl("PUT").should.equal("http://www.falconjs.com/model_c/1.json"),e.makeUrl("DELETE").should.equal("http://www.falconjs.com/model_c/1.json")}),it("Should test the makeUrl method, no baseUrl, with parent, with extension",function(){var e,t;return e=new l({id:"b"}),t=new o({id:2},e),t.makeUrl("GET").should.equal("/model_b/b/model_c/2.json"),t.makeUrl("POST").should.equal("/model_b/b/model_c.json"),t.makeUrl("PUT").should.equal("/model_b/b/model_c/2.json"),t.makeUrl("DELETE").should.equal("/model_b/b/model_c/2.json")}),it("Should test the makeUrl method, with baseUrl, with parent, with extension",function(){var e,t;return e=new l({id:"b"}),t=new o({id:2},e),Falcon.baseApiUrl="http://www.falconjs.com/",t.makeUrl("GET").should.equal("http://www.falconjs.com/model_b/b/model_c/2.json"),t.makeUrl("POST").should.equal("http://www.falconjs.com/model_b/b/model_c.json"),t.makeUrl("PUT").should.equal("http://www.falconjs.com/model_b/b/model_c/2.json"),t.makeUrl("DELETE").should.equal("http://www.falconjs.com/model_b/b/model_c/2.json")}),it("Should test the makeUrl method, no baseUrl, with explicit parent, with extension",function(){var e,t;return e=new l({id:"b"}),t=new o({id:3}),t.makeUrl("GET",e).should.equal("/model_b/b/model_c/3.json"),t.makeUrl("POST",e).should.equal("/model_b/b/model_c.json"),t.makeUrl("PUT",e).should.equal("/model_b/b/model_c/3.json"),t.makeUrl("DELETE",e).should.equal("/model_b/b/model_c/3.json")}),it("Should test the makeUrl method, with baseUrl, with  explicit parent, with extension",function(){var e,t;return e=new l({id:"b"}),t=new o({id:3}),Falcon.baseApiUrl="http://www.falconjs.com/",t.makeUrl("GET",e).should.equal("http://www.falconjs.com/model_b/b/model_c/3.json"),t.makeUrl("POST",e).should.equal("http://www.falconjs.com/model_b/b/model_c.json"),t.makeUrl("PUT",e).should.equal("http://www.falconjs.com/model_b/b/model_c/3.json"),t.makeUrl("DELETE",e).should.equal("http://www.falconjs.com/model_b/b/model_c/3.json")}),it("Should test the makeUrl method, string index, no baseUrl, no parent, with extension",function(){var e;return e=new n({id:"d"}),e.makeUrl("GET").should.equal("/model_d/d.json"),e.makeUrl("POST").should.equal("/model_d.json"),e.makeUrl("PUT").should.equal("/model_d/d.json"),e.makeUrl("DELETE").should.equal("/model_d/d.json")}),it("Should test the makeUrl method, string index, with shorter baseUrl, no parent, with extension",function(){var e;return e=new n({id:"d"}),Falcon.baseApiUrl="http://www.falconjs.com",e.makeUrl("GET").should.equal("http://www.falconjs.com/model_d/d.json"),e.makeUrl("POST").should.equal("http://www.falconjs.com/model_d.json"),e.makeUrl("PUT").should.equal("http://www.falconjs.com/model_d/d.json"),e.makeUrl("DELETE").should.equal("http://www.falconjs.com/model_d/d.json")}),it("Should test the makeUrl method, string index, with baseUrl, no parent, with extension",function(){var e;return e=new n({id:"d"}),Falcon.baseApiUrl="http://www.falconjs.com/",e.makeUrl("GET").should.equal("http://www.falconjs.com/model_d/d.json"),e.makeUrl("POST").should.equal("http://www.falconjs.com/model_d.json"),e.makeUrl("PUT").should.equal("http://www.falconjs.com/model_d/d.json"),e.makeUrl("DELETE").should.equal("http://www.falconjs.com/model_d/d.json")}),it("Should test the makeUrl method, no baseUrl, with non-ext. parent, with extension",function(){var t,l;return l=new n({id:"d"}),t=new e({id:2},l),t.makeUrl("GET").should.equal("/model_d/d/model_a/2"),t.makeUrl("POST").should.equal("/model_d/d/model_a"),t.makeUrl("PUT").should.equal("/model_d/d/model_a/2"),t.makeUrl("DELETE").should.equal("/model_d/d/model_a/2")}),it("Should test the makeUrl method, with baseUrl, with non-ext. parent, with extension",function(){var t,l;return l=new n({id:"d"}),t=new e({id:2},l),Falcon.baseApiUrl="http://www.falconjs.com/",t.makeUrl("GET").should.equal("http://www.falconjs.com/model_d/d/model_a/2"),t.makeUrl("POST").should.equal("http://www.falconjs.com/model_d/d/model_a"),t.makeUrl("PUT").should.equal("http://www.falconjs.com/model_d/d/model_a/2"),t.makeUrl("DELETE").should.equal("http://www.falconjs.com/model_d/d/model_a/2")}),it("Should test the makeUrl method, no baseUrl, with explicit non-ext. parent, with extension",function(){var t,l;return l=new n({id:"d"}),t=new e({id:3}),t.makeUrl("GET",l).should.equal("/model_d/d/model_a/3"),t.makeUrl("POST",l).should.equal("/model_d/d/model_a"),t.makeUrl("PUT",l).should.equal("/model_d/d/model_a/3"),t.makeUrl("DELETE",l).should.equal("/model_d/d/model_a/3")}),it("Should test the makeUrl method, no baseUrl, with explicit non-ext. parent, with extension",function(){var t,l;return l=new n({id:"d"}),t=new e({id:3}),Falcon.baseApiUrl="http://www.falconjs.com/",t.makeUrl("GET",l).should.equal("http://www.falconjs.com/model_d/d/model_a/3"),t.makeUrl("POST",l).should.equal("http://www.falconjs.com/model_d/d/model_a"),t.makeUrl("PUT",l).should.equal("http://www.falconjs.com/model_d/d/model_a/3"),t.makeUrl("DELETE",l).should.equal("http://www.falconjs.com/model_d/d/model_a/3")}),it("Should test the makeUrl method, no baseUrl, with parent, with extension",function(){var e,t;return t=new n({id:"d"}),e=new o({id:2},t),e.makeUrl("GET").should.equal("/model_d/d/model_c/2.json"),e.makeUrl("POST").should.equal("/model_d/d/model_c.json"),e.makeUrl("PUT").should.equal("/model_d/d/model_c/2.json"),e.makeUrl("DELETE").should.equal("/model_d/d/model_c/2.json")}),it("Should test the makeUrl method, with baseUrl, with parent, with extension",function(){var e,t;return t=new n({id:"d"}),e=new o({id:2},t),Falcon.baseApiUrl="http://www.falconjs.com/",e.makeUrl("GET").should.equal("http://www.falconjs.com/model_d/d/model_c/2.json"),e.makeUrl("POST").should.equal("http://www.falconjs.com/model_d/d/model_c.json"),e.makeUrl("PUT").should.equal("http://www.falconjs.com/model_d/d/model_c/2.json"),e.makeUrl("DELETE").should.equal("http://www.falconjs.com/model_d/d/model_c/2.json")}),it("Should test the makeUrl method, no baseUrl, with  explicit parent, with extension",function(){var e,t;return t=new n({id:"d"}),e=new o({id:3}),e.makeUrl("GET",t).should.equal("/model_d/d/model_c/3.json"),e.makeUrl("POST",t).should.equal("/model_d/d/model_c.json"),e.makeUrl("PUT",t).should.equal("/model_d/d/model_c/3.json"),e.makeUrl("DELETE",t).should.equal("/model_d/d/model_c/3.json")}),it("Should test the makeUrl method, with baseUrl, with explicit parent, with extension",function(){var e,t;return t=new n({id:"d"}),e=new o({id:3}),Falcon.baseApiUrl="http://www.falconjs.com/",e.makeUrl("GET",t).should.equal("http://www.falconjs.com/model_d/d/model_c/3.json"),e.makeUrl("POST",t).should.equal("http://www.falconjs.com/model_d/d/model_c.json"),e.makeUrl("PUT",t).should.equal("http://www.falconjs.com/model_d/d/model_c/3.json"),e.makeUrl("DELETE",t).should.equal("http://www.falconjs.com/model_d/d/model_c/3.json")}),it("Should be able to use url as a function, no parent",function(){var e;return e=new a({id:"e"}),e.makeUrl("GET").should.equal("/model_e/e"),e.makeUrl("POST").should.equal("/model_e"),e.makeUrl("PUT").should.equal("/model_e/e"),e.makeUrl("DELETE").should.equal("/model_e/e")}),it("Should be able to use url as a function, with parent",function(){var e;return e=new a({id:"e"},new l({id:"b"})),e.makeUrl("GET").should.equal("/model_b/b/model_e/e"),e.makeUrl("POST").should.equal("/model_b/b/model_e"),e.makeUrl("PUT").should.equal("/model_b/b/model_e/e"),e.makeUrl("DELETE").should.equal("/model_b/b/model_e/e")}),it("Should be able to use override the url, no parent",function(){var e;return e=new a({id:"e",url:"model_e2"}),e.makeUrl("GET").should.equal("/model_e2/e"),e.makeUrl("POST").should.equal("/model_e2"),e.makeUrl("PUT").should.equal("/model_e2/e"),e.makeUrl("DELETE").should.equal("/model_e2/e")}),it("Should be able to use override the url,with parent",function(){var e;return e=new a({id:"e",url:"model_e3"},new l({id:"b"})),e.makeUrl("GET").should.equal("/model_b/b/model_e3/e"),e.makeUrl("POST").should.equal("/model_b/b/model_e3"),e.makeUrl("PUT").should.equal("/model_b/b/model_e3/e"),e.makeUrl("DELETE").should.equal("/model_b/b/model_e3/e")})}),describe("Tesing model sync methods",function(){return describe("Testing Sync Method Aliases",function(){var e,l,o,n;return e=function(e){function l(){return n=l.__super__.constructor.apply(this,arguments)}return t(l,e),l.prototype.url="model_a",l}(Falcon.Model),l=null,o=null,beforeEach(function(){return o=sinon.stub(e.prototype,"sync"),l=new e}),afterEach(function(){return o.restore()}),it("Should call sync correctly on fetch without options",function(){return l.fetch(),o.should.have.been.calledOnce,o.should.have.been.calledWith("GET",void 0)}),it("Should call sync correctly on fetch with options",function(){return l.fetch({}),o.should.have.been.calledOnce,o.should.have.been.calledWith("GET",{})}),it("Should call sync correctly on create without options",function(){return l.create(),o.should.have.been.calledOnce,o.should.have.been.calledWith("POST",void 0)}),it("Should call sync correctly on create with options",function(){return l.create({}),o.should.have.been.calledOnce,o.should.have.been.calledWith("POST",{})}),it("Should call sync correctly on save without options",function(){return l.save(),o.should.have.been.calledOnce,o.should.have.been.calledWith("PUT",void 0)}),it("Should call sync correctly on save with options",function(){return l.save({}),o.should.have.been.calledOnce,o.should.have.been.calledWith("PUT",{})}),it("Should call sync correctly on destroy without options",function(){return l.destroy(),o.should.have.been.calledOnce,o.should.have.been.calledWith("DELETE",void 0)}),it("Should call sync correctly on destroy with options",function(){return l.destroy({}),o.should.have.been.calledOnce,o.should.have.been.calledWith("DELETE",{})})}),describe("Testing sync method $.ajax calls",function(){var e,l,o;return e=function(e){function l(){return o=l.__super__.constructor.apply(this,arguments)}return t(l,e),l.prototype.url="model_a",l}(Falcon.Model),l=null,beforeEach(function(){return l=sinon.stub(jQuery,"ajax"),Falcon.cache=!1}),afterEach(function(){return l.restore()}),it("Should fetch properly without options",function(){var t;return t=new e({id:1}),t.fetch(),l.should.have.been.calledOnce,l.should.have.been.calledWithMatch({type:"GET"}),l.should.have.been.calledWithMatch({url:t.makeUrl("GET")}),l.should.have.been.calledWithMatch({data:""}),l.should.have.been.calledWithMatch({contentType:"application/json"}),l.should.have.been.calledWithMatch({cache:!1}),l.should.have.been.calledWithMatch({headers:{}}),expect(l.firstCall.args[0].success).to.be.a("function"),expect(l.firstCall.args[0].success).to.have.length(3),expect(l.firstCall.args[0].error).to.be.a("function"),expect(l.firstCall.args[0].error).to.have.length(1),expect(l.firstCall.args[0].complete).to.be.a("function"),expect(l.firstCall.args[0].complete).to.have.length(2)}),it("Should fetch properly with options",function(){var t,o,n,a;return t=new e({id:1}),Falcon.cache=!0,t.fetch({url:"http://www.falconjs.com",data:{hello:"world"},contentType:"text/html",headers:{"User-Agent":"User-Agent",Chrome:"Chrome"},success:a=function(){},error:n=function(){},complete:o=function(){}}),l.should.have.been.calledOnce,l.should.have.been.calledWithMatch({type:"GET"}),l.should.have.been.calledWithMatch({url:"http://www.falconjs.com"}),l.should.have.been.calledWithMatch({data:JSON.stringify({hello:"world"})}),l.should.have.been.calledWithMatch({contentType:"text/html"}),l.should.have.been.calledWithMatch({cache:!0}),l.should.have.been.calledWithMatch({headers:{"User-Agent":"User-Agent",Chrome:"Chrome"}}),expect(l.firstCall.args[0].success).to.be.a("function"),expect(l.firstCall.args[0].success).to.have.length(3),expect(l.firstCall.args[0].success).to.not.equal(a),expect(l.firstCall.args[0].error).to.be.a("function"),expect(l.firstCall.args[0].error).to.have.length(1),expect(l.firstCall.args[0].error).to.not.equal(n),expect(l.firstCall.args[0].complete).to.be.a("function"),expect(l.firstCall.args[0].complete).to.have.length(2),expect(l.firstCall.args[0].complete).to.not.equal(o)}),it("Should save properly without options",function(){var t;return t=new e({id:1}),t.save(),l.should.have.been.calledOnce,l.should.have.been.calledWithMatch({type:"PUT"}),l.should.have.been.calledWithMatch({url:t.makeUrl("PUT")}),l.should.have.been.calledWithMatch({data:JSON.stringify({id:1})}),l.should.have.been.calledWithMatch({contentType:"application/json"}),l.should.have.been.calledWithMatch({cache:!1}),l.should.have.been.calledWithMatch({headers:{}}),expect(l.firstCall.args[0].success).to.be.a("function"),expect(l.firstCall.args[0].success).to.have.length(3),expect(l.firstCall.args[0].error).to.be.a("function"),expect(l.firstCall.args[0].error).to.have.length(1),expect(l.firstCall.args[0].complete).to.be.a("function"),expect(l.firstCall.args[0].complete).to.have.length(2)}),it("Should save properly with options",function(){var t,o,n,a;return t=new e({id:1}),Falcon.cache=!0,t.save({url:"http://www.falconjs.com",data:{hello:"world"},contentType:"text/html",headers:{"User-Agent":"User-Agent",Chrome:"Chrome"},success:a=function(){},error:n=function(){},complete:o=function(){}}),l.should.have.been.calledOnce,l.should.have.been.calledWithMatch({type:"PUT"}),l.should.have.been.calledWithMatch({url:"http://www.falconjs.com"}),l.should.have.been.calledWithMatch({data:JSON.stringify({id:1,hello:"world"})}),l.should.have.been.calledWithMatch({contentType:"text/html"}),l.should.have.been.calledWithMatch({cache:!0}),l.should.have.been.calledWithMatch({headers:{"User-Agent":"User-Agent",Chrome:"Chrome"}}),expect(l.firstCall.args[0].success).to.be.a("function"),expect(l.firstCall.args[0].success).to.have.length(3),expect(l.firstCall.args[0].success).to.not.equal(a),expect(l.firstCall.args[0].error).to.be.a("function"),expect(l.firstCall.args[0].error).to.have.length(1),expect(l.firstCall.args[0].error).to.not.equal(n),expect(l.firstCall.args[0].complete).to.be.a("function"),expect(l.firstCall.args[0].complete).to.have.length(2),expect(l.firstCall.args[0].complete).to.not.equal(o)}),it("Should create properly without options",function(){var t;return t=new e({id:1}),t.create(),l.should.have.been.calledOnce,l.should.have.been.calledWithMatch({type:"POST"}),l.should.have.been.calledWithMatch({url:t.makeUrl("POST")}),l.should.have.been.calledWithMatch({data:JSON.stringify({id:1})}),l.should.have.been.calledWithMatch({contentType:"application/json"}),l.should.have.been.calledWithMatch({cache:!1}),l.should.have.been.calledWithMatch({headers:{}}),expect(l.firstCall.args[0].success).to.be.a("function"),expect(l.firstCall.args[0].success).to.have.length(3),expect(l.firstCall.args[0].error).to.be.a("function"),expect(l.firstCall.args[0].error).to.have.length(1),expect(l.firstCall.args[0].complete).to.be.a("function"),expect(l.firstCall.args[0].complete).to.have.length(2)}),it("Should create properly with options",function(){var t,o,n,a;return t=new e({id:1}),Falcon.cache=!0,t.create({url:"http://www.falconjs.com",data:{hello:"world"},contentType:"text/html",headers:{"User-Agent":"User-Agent",Chrome:"Chrome"},success:a=function(){},error:n=function(){},complete:o=function(){}}),l.should.have.been.calledOnce,l.should.have.been.calledWithMatch({type:"POST"}),l.should.have.been.calledWithMatch({url:"http://www.falconjs.com"}),l.should.have.been.calledWithMatch({data:JSON.stringify({id:1,hello:"world"})}),l.should.have.been.calledWithMatch({contentType:"text/html"}),l.should.have.been.calledWithMatch({cache:!0}),l.should.have.been.calledWithMatch({headers:{"User-Agent":"User-Agent",Chrome:"Chrome"}}),expect(l.firstCall.args[0].success).to.be.a("function"),expect(l.firstCall.args[0].success).to.have.length(3),expect(l.firstCall.args[0].success).to.not.equal(a),expect(l.firstCall.args[0].error).to.be.a("function"),expect(l.firstCall.args[0].error).to.have.length(1),expect(l.firstCall.args[0].error).to.not.equal(n),expect(l.firstCall.args[0].complete).to.be.a("function"),expect(l.firstCall.args[0].complete).to.have.length(2),expect(l.firstCall.args[0].complete).to.not.equal(o)}),it("Should destroy properly without options",function(){var t;return t=new e({id:1}),t.destroy(),l.should.have.been.calledOnce,l.should.have.been.calledWithMatch({type:"DELETE"}),l.should.have.been.calledWithMatch({url:t.makeUrl("DELETE")}),l.should.have.been.calledWithMatch({data:""}),l.should.have.been.calledWithMatch({contentType:"application/json"}),l.should.have.been.calledWithMatch({cache:!1}),l.should.have.been.calledWithMatch({headers:{}}),expect(l.firstCall.args[0].success).to.be.a("function"),expect(l.firstCall.args[0].success).to.have.length(3),expect(l.firstCall.args[0].error).to.be.a("function"),expect(l.firstCall.args[0].error).to.have.length(1),expect(l.firstCall.args[0].complete).to.be.a("function"),expect(l.firstCall.args[0].complete).to.have.length(2)}),it("Should destroy properly with options",function(){var t,o,n,a;return t=new e({id:1}),Falcon.cache=!0,t.destroy({url:"http://www.falconjs.com",data:{hello:"world"},contentType:"text/html",headers:{"User-Agent":"User-Agent",Chrome:"Chrome"},success:a=function(){},error:n=function(){},complete:o=function(){}}),l.should.have.been.calledOnce,l.should.have.been.calledWithMatch({type:"DELETE"}),l.should.have.been.calledWithMatch({url:"http://www.falconjs.com"}),l.should.have.been.calledWithMatch({data:JSON.stringify({hello:"world"})}),l.should.have.been.calledWithMatch({contentType:"text/html"}),l.should.have.been.calledWithMatch({cache:!0}),l.should.have.been.calledWithMatch({headers:{"User-Agent":"User-Agent",Chrome:"Chrome"}}),expect(l.firstCall.args[0].success).to.be.a("function"),expect(l.firstCall.args[0].success).to.have.length(3),expect(l.firstCall.args[0].success).to.not.equal(a),expect(l.firstCall.args[0].error).to.be.a("function"),expect(l.firstCall.args[0].error).to.have.length(1),expect(l.firstCall.args[0].error).to.not.equal(n),expect(l.firstCall.args[0].complete).to.be.a("function"),expect(l.firstCall.args[0].complete).to.have.length(2),expect(l.firstCall.args[0].complete).to.not.equal(o)
})}),describe("Testing sync method XHR responses",function(){var e,l,o,n,a,r,i,u,c,s,d,h,p,f,m,w,b;return e=function(e){function l(){return b=l.__super__.constructor.apply(this,arguments)}return t(l,e),l.prototype.url="model_a",l}(Falcon.Model),f=null,s=null,h=null,c=null,u=null,o=null,p=null,a=null,w=null,i=null,l=null,n=null,r=null,m=null,d=null,beforeEach(function(){return f=sinon.fakeServer.create(),s=new e,n={hello:"world"},r={error:"Something Wrong"},m={foo:"bar"},h=sinon.stub(s,"parse").returns(m),c=sinon.stub(s,"fill"),s.on("fetch",u=sinon.spy()),s.on("create",o=sinon.spy()),s.on("save",p=sinon.spy()),s.on("destroy",a=sinon.spy()),d={success:w=sinon.spy(),error:i=sinon.spy(),complete:l=sinon.spy()}}),afterEach(function(){return f.restore()}),it("Should call the proper success method",function(){return s.fetch(d),f.respondWith([200,{},JSON.stringify(n)]),f.respond(),h.callCount.should.equal(1),h.firstCall.args[0].should.deep.equal(n),c.callCount.should.equal(1),c.firstCall.args[0].should.deep.equal(m),c.should.have.been.calledAfter(h),u.should.have.been.calledOnce,o.should.not.have.been.called,p.should.not.have.been.called,a.should.not.have.been.called,u.should.have.been.calledAfter(c),w.callCount.should.equal(1),w.should.have.been.calledOn(s),w.firstCall.args.length.should.equal(4),w.firstCall.args[0].should.equal(s),i.should.not.have.been.called,l.callCount.should.equal(1),l.should.have.been.calledOn(s),l.firstCall.args.length.should.equal(3),l.firstCall.args[0].should.equal(s),l.should.have.been.calledAfter(w)}),it("Should not fill when fill option is false on fetch",function(){return d.fill=!1,s.fetch(d),f.respondWith([200,{},JSON.stringify(n)]),f.respond(),h.callCount.should.equal(1),h.firstCall.args[0].should.deep.equal(n),c.callCount.should.equal(0),u.should.have.been.calledOnce,o.should.not.have.been.called,p.should.not.have.been.called,a.should.not.have.been.called,u.should.have.been.calledAfter(h),w.callCount.should.equal(1),w.should.have.been.calledOn(s),w.firstCall.args.length.should.equal(4),w.firstCall.args[0].should.equal(s),i.should.not.have.been.called,l.callCount.should.equal(1),l.should.have.been.calledOn(s),l.firstCall.args.length.should.equal(3),l.firstCall.args[0].should.equal(s),l.should.have.been.calledAfter(w)}),it("Should call the error response on an errornous result",function(){return s.fetch(d),f.respondWith([400,{},JSON.stringify(r)]),f.respond(),h.callCount.should.equal(0),c.callCount.should.equal(0),u.should.not.have.been.called,o.should.not.have.been.called,p.should.not.have.been.called,a.should.not.have.been.called,w.callCount.should.equal(0),i.callCount.should.equal(1),i.firstCall.args.length.should.equal(3),i.should.have.been.calledOn(s),l.firstCall.args[0].should.equal(s),l.callCount.should.equal(1),l.should.have.been.calledOn(s),l.firstCall.args.length.should.equal(3),l.firstCall.args[0].should.equal(s),l.should.have.been.calledAfter(i)}),it("Should call the success response on create",function(){return s.create(d),f.respondWith([200,{},JSON.stringify(n)]),f.respond(),h.callCount.should.equal(1),h.firstCall.args[0].should.deep.equal(n),c.callCount.should.equal(1),c.firstCall.args[0].should.deep.equal(m),c.should.have.been.calledAfter(h),u.should.not.have.been.called,o.callCount.should.equal(1),p.should.not.have.been.called,a.should.not.have.been.called,w.callCount.should.equal(1),w.should.have.been.calledOn(s),w.firstCall.args.length.should.equal(4),w.firstCall.args[0].should.equal(s),i.should.not.have.been.called,l.callCount.should.equal(1),l.should.have.been.calledOn(s),l.firstCall.args.length.should.equal(3),l.firstCall.args[0].should.equal(s),l.should.have.been.calledAfter(w)}),it("Should call the success response on save",function(){return s.save(d),f.respondWith([200,{},JSON.stringify(n)]),f.respond(),h.callCount.should.equal(1),h.firstCall.args[0].should.deep.equal(n),c.callCount.should.equal(1),c.firstCall.args[0].should.deep.equal(m),c.should.have.been.calledAfter(h),u.should.not.have.been.called,o.should.not.have.been.called,p.callCount.should.equal(1),a.should.not.have.been.called,w.callCount.should.equal(1),w.should.have.been.calledOn(s),w.firstCall.args.length.should.equal(4),w.firstCall.args[0].should.equal(s),i.should.not.have.been.called,l.callCount.should.equal(1),l.should.have.been.calledOn(s),l.firstCall.args.length.should.equal(3),l.firstCall.args[0].should.equal(s),l.should.have.been.calledAfter(w)}),it("Should call the success response on destroy",function(){return s.destroy(d),f.respondWith([200,{},JSON.stringify(n)]),f.respond(),h.callCount.should.equal(1),h.firstCall.args[0].should.deep.equal(n),c.callCount.should.equal(1),c.firstCall.args[0].should.deep.equal(m),c.should.have.been.calledAfter(h),u.should.not.have.been.called,o.should.not.have.been.called,p.should.not.have.been.called,a.callCount.should.equal(1),w.callCount.should.equal(1),w.should.have.been.calledOn(s),w.firstCall.args.length.should.equal(4),w.firstCall.args[0].should.equal(s),i.should.not.have.been.called,l.callCount.should.equal(1),l.should.have.been.calledOn(s),l.firstCall.args.length.should.equal(3),l.firstCall.args[0].should.equal(s),l.should.have.been.calledAfter(w)})})}),it("Should match equality properly",function(){var e,l,o,n,a;return e=function(e){function l(){return a=l.__super__.constructor.apply(this,arguments)}return t(l,e),l}(Falcon.Model),l=new e({id:1}),o=new e({id:2}),n=new e({id:"a"}),expect(l.equals(l)).to.be["true"],expect(l.equals(o)).to.be["false"],expect(l.equals(1)).to.be["true"],expect(l.equals(new e({id:1}))).to.be["true"],expect(n.equals(n)).to.be["true"],expect(n.equals(o)).to.be["false"],expect(n.equals("a")).to.be["true"],expect(n.equals(new e({id:"a"}))).to.be["true"]}),it("Should implement mixins properly",function(){var e,l,o,n,a,r;return e=function(e){function o(){return a=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.initialize=function(){return this.model_b=new l},o}(Falcon.Model),l=function(e){function l(){return r=l.__super__.constructor.apply(this,arguments)}return t(l,e),l}(Falcon.Model),n=new e,expect(n.hello).to.be.undefined,expect(n.foo).to.be.undefined,expect(n.model_b.test).to.be.undefined,n.mixin({hello:o=sinon.spy(),foo:ko.observable("bar"),model_b:{test:"123"}}),expect(n.hello).not.to.be.undefined,expect(n.hello).to.be.a("function"),expect(ko.isObservable(n.foo)).to.be["true"],expect(n.foo()).to.equal("bar"),expect(n.model_b.test).not.to.be.undefined,expect(n.model_b.test).to.equal("123"),n.hello("world"),o.should.have.been.calledOnce,o.should.have.been.calledOn(n),o.firstCall.args[0].should.equal(n),o.firstCall.args[1].should.equal("world")}),describe("Testing clone combinations",function(){var e,l,o,n,a,r;return e=function(e){function l(){return n=l.__super__.constructor.apply(this,arguments)}return t(l,e),l.prototype.initialize=function(){return this.foo=ko.observable()},l}(Falcon.Model),l=function(e){function l(){return a=l.__super__.constructor.apply(this,arguments)}return t(l,e),l}(Falcon.Model),o=function(e){function l(){return r=l.__super__.constructor.apply(this,arguments)}return t(l,e),l}(Falcon.Model),it("Should clone properly without overridden parent",function(){var t,o,n;return n=new l,t=new e({id:1,hello:"world",foo:"bar"},n),o=t.clone(),t.should.not.equal(o),t.parent.should.equal(o.parent),t.id.should.equal(o.id),o.hello.should.equal("world"),expect(ko.isObservable(o.foo)).to.be["true"],o.foo().should.equal("bar")}),it("Should clone properly with overriden parent",function(){var t,n,a,r;return a=new l,r=new o,t=new e({id:1,hello:"world",foo:ko.observable("bar")},a),n=t.clone(r),n.should.not.equal(t),n.id.should.equal(t.id),n.parent.should.equal(r),n.hello.should.equal("world"),expect(ko.isObservable(n.foo)).to.be["true"],n.foo().should.equal("bar")}),it("Should clone properly with overriden null parent",function(){var t,o,n;return n=new l,t=new e({id:1,hello:"world",foo:ko.observable("bar")},n),o=t.clone(null),o.should.not.equal(t),o.id.should.equal(t.id),expect(o.parent).to.be.equal(null),o.hello.should.equal("world"),expect(ko.isObservable(o.foo)).to.be["true"],o.foo().should.equal("bar")})}),describe("Testing copy method",function(){var e,l,o,n,a,r;return e=function(e){function l(){return n=l.__super__.constructor.apply(this,arguments)}return t(l,e),l.prototype.initialize=function(){return this.foo=ko.observable()},l}(Falcon.Model),l=function(e){function l(){return a=l.__super__.constructor.apply(this,arguments)}return t(l,e),l}(Falcon.Model),o=function(e){function l(){return r=l.__super__.constructor.apply(this,arguments)}return t(l,e),l}(Falcon.Model),it("Should do a basic copy properly",function(){var t,o,n;return n=new l,t=new e({id:1,hello:"world",foo:ko.observable("bar")},n),o=t.copy(),t.should.not.equal(o),expect(o.hello).not.to.exist,expect(o.foo).to.exist,expect(o.id).to.exist,expect(o.parent).to.exist,expect(o.id).to.equal(1),expect(o.parent).to.equal(n),expect(ko.isObservable(o.foo)).to.be["true"],expect(o.foo()).to.be.undefined}),it("Should do copy properly additional fields properly",function(){var t,o,n;return n=new l,t=new e({id:1,hello:"world",foo:ko.observable("bar")},n),o=t.copy(["id","foo"]),t.should.not.equal(o),expect(o.hello).not.to.exist,expect(o.foo).to.exist,expect(o.id).to.exist,expect(o.parent).to.exist,expect(o.id).to.equal(1),expect(o.parent).to.equal(n),expect(ko.isObservable(o.foo)).to.be["true"],expect(o.foo()).to.be.equal("bar")}),it("Should do copy properly additional fields properly without parent",function(){var t,o,n;return n=new l,t=new e({id:1,hello:"world",foo:ko.observable("bar")},n),o=t.copy(["id","hello"],null),t.should.not.equal(o),expect(o.hello).to.exist,expect(o.foo).to.exist,expect(o.id).to.exist,expect(o.parent).not.to.exist,expect(o.id).to.equal(1),expect(ko.isObservable(o.hello)).to.be["false"],expect(o.hello).to.be.equal("world"),expect(ko.isObservable(o.foo)).to.be["true"],expect(o.foo()).to.be.undefined}),it("Should do copy properly additional fields properly without parent or id fields",function(){var t,o,n;return n=new l,t=new e({id:1,hello:"world",foo:ko.observable("bar")},n),o=t.copy(["hello"],null),t.should.not.equal(o),expect(o.hello).to.exist,expect(o.foo).to.exist,expect(o.id).to.exist,expect(o.parent).not.to.exist,expect(o.id).to.equal(1),expect(ko.isObservable(o.hello)).to.be["false"],expect(o.hello).to.be.equal("world"),expect(ko.isObservable(o.foo)).to.be["true"],expect(o.foo()).to.be.undefined}),it("Should do copy properly additional fields properly with new parent",function(){var t,n,a,r;return r=new o,a=new l,t=new e({id:1,hello:"world",foo:ko.observable("bar")},a),n=t.copy(["id","hello"],r),t.should.not.equal(n),expect(n.hello).to.exist,expect(n.foo).to.exist,expect(n.id).to.exist,expect(n.parent).to.exist,expect(n.parent).to.equal(r),expect(n.id).to.equal(1),expect(ko.isObservable(n.hello)).to.be["false"],expect(n.hello).to.be.equal("world"),expect(ko.isObservable(n.foo)).to.be["true"],expect(n.foo()).to.be.undefined}),it("Should do copy properly additional fields properly with new parent or id fields",function(){var t,n,a,r;return r=new o,a=new l,t=new e({id:1,hello:"world",foo:ko.observable("bar")},a),n=t.copy(["hello"],r),t.should.not.equal(n),expect(n.hello).to.exist,expect(n.foo).to.exist,expect(n.id).to.exist,expect(n.parent).to.exist,expect(n.parent).to.equal(r),expect(n.id).to.equal(1),expect(ko.isObservable(n.hello)).to.be["false"],expect(n.hello).to.be.equal("world"),expect(ko.isObservable(n.foo)).to.be["true"],expect(n.foo()).to.be.undefined})}),it("Should properly detect if the model is new or not",function(){var e,l,o;return e=function(e){function l(){return o=l.__super__.constructor.apply(this,arguments)}return t(l,e),l}(Falcon.Model),l=new e,expect(l.isNew()).to.be["true"],l=new e({id:1}),expect(l.isNew()).to.be["false"],l=new e({id:"a"}),expect(l.isNew()).to.be["false"]})})}).call(this);