(function(){var e={}.hasOwnProperty,t=function(t,o){function l(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return l.prototype=o.prototype,t.prototype=new l,t.__super__=o.prototype,t};describe("Testing Model Methods",function(){return beforeEach(function(){return Falcon.baseApiUrl="",Falcon.baseTemplateUrl=""}),it("Should initialize correctly",function(){var e,o,l,n,a,c,r,i,u,s;return e=function(e){function o(){return u=o.__super__.constructor.apply(this,arguments)}return t(o,e),o}(Falcon.Model),o=function(e){function o(){return s=o.__super__.constructor.apply(this,arguments)}return t(o,e),o}(Falcon.Model),a=sinon.stub(e.prototype,"initialize"),c=new e,expect(a).to.have.been.calledOnce,expect(a).to.have.been.calledWith(),a.reset(),r=new e(i=new o),expect(a).to.have.been.calledOnce,expect(a).to.have.been.calledWith(),expect(r.parent).to.be.equal(i),a.reset(),r=new e(l={hello:"world"}),expect(a).to.have.been.calledOnce,expect(a).to.have.been.calledWith(l),expect(r.parent).to.be.undefined,a.reset(),r=new e(l={hello:"world"},i=new o),expect(a).to.have.been.calledOnce,expect(a).to.have.been.calledWith(l),expect(r.parent).to.be.equal(i),a.reset(),r=new e(i=new o,l={hello:"world"}),expect(a).to.have.been.calledOnce,expect(a).to.have.been.calledWith(l),expect(r.parent).to.be.equal(i),a.reset(),r=new e(n=new Falcon.Model({hello:"world"}),i=new o),expect(a).to.have.been.calledOnce,expect(a).to.have.been.calledWith(n.unwrap()),expect(r.parent).to.be.equal(i),a.reset(),a.restore()}),it("Should create RawrModel with defaults that have correct arguments",function(){var e,o,l,n,a;return o=null,e=function(e){function l(){return a=l.__super__.constructor.apply(this,arguments)}return t(l,e),l.prototype.defaults={hello:o=sinon.spy()},l}(Falcon.Model),expect(o).to.not.have.been.called,n=new e(l={one:"one",two:"two",three:"three"}),expect(o).to.have.been.called,expect(o.callCount).to.equal(1),expect(o.firstCall.args.length).to.equal(1),expect(o.firstCall.args[0]).to.equal(l)}),it("Should test the get, set, and toggle methods",function(){var e,o,l,n,a,c;return n=null,e=function(e){function l(){return a=l.__super__.constructor.apply(this,arguments)}return t(l,e),l.prototype.initialize=function(){return this.foo=ko.observable(),this.model_b=n=new o},l}(Falcon.Model),o=function(e){function o(){return c=o.__super__.constructor.apply(this,arguments)}return t(o,e),o}(Falcon.Model),l=new e({hello:"world",foo:"bar",truth:!0,model_b:{something:"cool"}}),expect(l.hello).to.be.equal("world"),expect(l.foo).to.be.a("function"),expect(l.truth).to.be["true"],expect(l.model_b).to.be.instanceOf(o),expect(l.model_b).to.be.equal(n),expect(l.get("hello")).to.be.equal("world"),expect(l.get("foo")).to.be.equal("bar"),expect(l.get("truth")).to.be.equal(!0),expect(l.model_b).to.be.instanceOf(o),expect(l.model_b).to.be.equal(n),l.set("foo","baz"),l.set("hello","goodbye"),expect(l.get("hello")).to.be.equal("goodbye"),expect(l.get("foo")).to.be.equal("baz"),expect(l.get("truth")).to.be.equal(!0),expect(l.model_b).to.be.instanceOf(o),expect(l.model_b).to.be.instanceOf(o),expect(l.model_b).to.be.equal(n),l.set({foo:"bar",hello:"world"}),expect(l.get("hello")).to.be.equal("world"),expect(l.get("foo")).to.be.equal("bar"),expect(l.get("truth")).to.be.equal(!0),expect(l.model_b).to.be.instanceOf(o),expect(l.model_b).to.be.instanceOf(o),expect(l.model_b).to.be.equal(n),l.toggle("truth"),expect(l.get("hello")).to.be.equal("world"),expect(l.get("foo")).to.be.equal("bar"),expect(l.get("truth")).to.be.equal(!1),expect(l.model_b).to.be.instanceOf(o),expect(l.model_b).to.be.equal(n),expect(n.get("something")).to.be.equal("cool")}),it("Should test the fill and serialize methods",function(){var e,o,l,n,a,c,r,i,u,s,p,d,h,m,f,b,x;u=null,s=null,a=null,o=function(o){function n(){return h=n.__super__.constructor.apply(this,arguments)}return t(n,o),n.prototype.url="model_a",n.prototype.initialize=function(){return this._client=ko.observable(),this.model_b=u=new l,this.model_b2=s=new l,this.collection_c=a=new e},n}(Falcon.Model),l=function(e){function o(){return m=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.url="model_b",o}(Falcon.Model),n=function(e){function o(){return f=o.__super__.constructor.apply(this,arguments)}return t(o,e),o}(Falcon.Model),e=function(e){function o(){return b=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.model=n,o}(Falcon.Collection),c={id:33,foo:"bar",url:"MODEL_A2",model_b:{b_foo:"B BAR"},model_b2:{id:"test",b_foo:"B BAR 2",url:"model_b2"},collection_c:[{that:"That One"},{that:"That Two"},{that:"That Three"}]},i=new o,i.fill(c),expect(i.get("id")).to.be.equal(33),expect(i.get("foo")).to.be.equal("bar"),expect(i.get("url")).to.be.equal("MODEL_A2"),expect(i.get("model_b")).to.be.equal(u),expect(i.get("model_b").get("b_foo")).to.be.equal("B BAR"),expect(i.get("model_b").get("url")).to.be.equal("model_b"),expect(i.get("model_b2")).to.be.equal(s),expect(i.get("model_b2").get("id")).to.be.equal("test"),expect(i.get("model_b2").get("b_foo")).to.be.equal("B BAR 2"),expect(i.get("model_b2").get("url")).to.be.equal("model_b2"),expect(i.get("collection_c")).to.be.equal(a),expect(i.get("collection_c").length()).to.equal(3),expect(i.get("collection_c").first()).to.be.instanceOf(n),expect(i.get("collection_c").first().get("that")).to.equal("That One"),p=i.serialize(),expect(p.id).to.equal(33),expect(p.foo).to.equal("bar"),expect(p.model_b).to.be.a("object"),expect(p.model_b.id).to.equal(null),expect(p.model_b.b_foo).to.equal("B BAR"),expect(p.model_b2).to.be.a("object"),expect(p.model_b2.id).to.equal("test"),expect(p.model_b2.b_foo).to.equal("B BAR 2"),expect(p.collection_c).to.be.a("array"),expect(p.collection_c).to.have.length(3),expect(p.collection_c[0]).to.be.a("object"),expect(p.collection_c[0].that).to.equal("That One"),p=i.serialize(["id","foo"]),expect(p.id).to.equal(33),expect(p.foo).to.equal("bar"),expect(p.model_b).to.be.undefined,expect(p.model_b2).to.be.undefined,expect(p.collection_c).to.be.undefined,p=i.serialize(["foo"]),expect(p.foo).to.equal("bar"),expect(p.id).to.be.undefined,expect(p.model_b).to.be.undefined,expect(p.model_b2).to.be.undefined,expect(p.collection_c).to.be.undefined,p=i.serialize({id:null,model_b2:{b_foo:null,url:null}}),expect(p.id).to.equal(33),expect(p.model_b2).to.be.a("object"),expect(p.model_b2.b_foo).to.equal("B BAR 2"),expect(p.model_b).to.be.undefined,expect(p.collection_c).to.be.undefined,p=i.serialize();for(r in p)d=p[r],expect(Falcon.Object.prototype).to.not.include.keys(r);p=i.serialize(),x=[];for(r in p)d=p[r],"id"!==r&&x.push(expect(Falcon.Model.prototype).to.not.include.keys(r));return x}),it("Should test the unwrap method",function(){var e,o,l,n,a,c,r,i,u,s,p,d;return r=null,a=null,o=function(o){function n(){return u=n.__super__.constructor.apply(this,arguments)}return t(n,o),n.prototype.initialize=function(){return this.foo=ko.observable(),this.model_b=r=new l,this.collection_c=a=new e},n}(Falcon.Model),l=function(e){function o(){return s=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.initialize=function(){return this.something=ko.observable()},o}(Falcon.Model),n=function(e){function o(){return p=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.initialize=function(){return this.hello="world"},o}(Falcon.Model),e=function(e){function o(){return d=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.model=n,o}(Falcon.Collection),c=new o({foo:"bar",model_b:{something:"cool"},collection_c:[{hello:"world"},{hello:"world2"}]}),i=c.unwrap(),expect(i.foo).to.be.a("function"),expect(i.foo()).to.equal("bar"),expect(i.model_b).to.be.a("object"),expect(i.model_b.something).to.be.a("function"),expect(i.model_b.something()).to.equal("cool"),expect(i.collection_c).to.be.a("array"),expect(i.collection_c).to.have.length(2),expect(i.collection_c[0].hello).to.equal("world"),expect(i.collection_c[1].hello).to.equal("world2"),expect(i.id).to.equal(null),expect(i.parent).to.be.undefined,expect(i.url).to.be.undefined}),describe("Testing makeUrl combinations",function(){var e,o,l,n,a,c,r,i,u,s;return e=function(e){function o(){return c=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.url="model_a",o}(Falcon.Model),o=function(e){function o(){return r=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.url="/model_b",o}(Falcon.Model),l=function(e){function o(){return i=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.url="model_c.json",o}(Falcon.Model),n=function(e){function o(){return u=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.url="model_d.json",o}(Falcon.Model),a=function(e){function o(){return s=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.url=function(){return"model_e"},o}(Falcon.Model),beforeEach(function(){return Falcon.baseApiUrl=null}),it("Should test the makeUrl method, numeric id, no baseUrl, no parent, no extension",function(){var t;return t=new e({id:1}),expect(t.makeUrl("GET")).to.equal("/model_a/1"),expect(t.makeUrl("POST")).to.equal("/model_a"),expect(t.makeUrl("PUT")).to.equal("/model_a/1"),expect(t.makeUrl("DELETE")).to.equal("/model_a/1")}),it("Should test the makeUrl method, string id, no baseUrl, no parent, no extension",function(){var e;return e=new o({id:"b"}),expect(e.makeUrl("GET")).to.equal("/model_b/b"),expect(e.makeUrl("POST")).to.equal("/model_b"),expect(e.makeUrl("PUT")).to.equal("/model_b/b"),expect(e.makeUrl("DELETE")).to.equal("/model_b/b")}),it("Should test the makeUrl method, numeric id, with shorter baseUrl, no parent, no extension",function(){var t;return t=new e({id:1}),Falcon.baseApiUrl="http://www.falconjs.com",expect(t.makeUrl("GET")).to.equal("http://www.falconjs.com/model_a/1"),expect(t.makeUrl("POST")).to.equal("http://www.falconjs.com/model_a"),expect(t.makeUrl("PUT")).to.equal("http://www.falconjs.com/model_a/1"),expect(t.makeUrl("DELETE")).to.equal("http://www.falconjs.com/model_a/1")}),it("Should test the makeUrl method, string id, with shorter baseUrl, no parent, no extension",function(){var e;return e=new o({id:"b"}),Falcon.baseApiUrl="http://www.falconjs.com",expect(e.makeUrl("GET")).to.equal("http://www.falconjs.com/model_b/b"),expect(e.makeUrl("POST")).to.equal("http://www.falconjs.com/model_b"),expect(e.makeUrl("PUT")).to.equal("http://www.falconjs.com/model_b/b"),expect(e.makeUrl("DELETE")).to.equal("http://www.falconjs.com/model_b/b")}),it("Should test the makeUrl method, numeric id, with baseUrl, no parent, no extension",function(){var t;return t=new e({id:1}),Falcon.baseApiUrl="http://www.falconjs.com/",expect(t.makeUrl("GET")).to.equal("http://www.falconjs.com/model_a/1"),expect(t.makeUrl("POST")).to.equal("http://www.falconjs.com/model_a"),expect(t.makeUrl("PUT")).to.equal("http://www.falconjs.com/model_a/1"),expect(t.makeUrl("DELETE")).to.equal("http://www.falconjs.com/model_a/1")}),it("Should test the makeUrl method, string id, with baseUrl, no parent, no extension",function(){var e;return e=new o({id:"b"}),Falcon.baseApiUrl="http://www.falconjs.com/",expect(e.makeUrl("GET")).to.equal("http://www.falconjs.com/model_b/b"),expect(e.makeUrl("POST")).to.equal("http://www.falconjs.com/model_b"),expect(e.makeUrl("PUT")).to.equal("http://www.falconjs.com/model_b/b"),expect(e.makeUrl("DELETE")).to.equal("http://www.falconjs.com/model_b/b")}),it("Should test the makeUrl method, no baseUrl, with parent, no extension",function(){var t,l;return l=new o({id:"b"}),t=new e({id:2},l),expect(t.makeUrl("GET")).to.equal("/model_b/b/model_a/2"),expect(t.makeUrl("POST")).to.equal("/model_b/b/model_a"),expect(t.makeUrl("PUT")).to.equal("/model_b/b/model_a/2"),expect(t.makeUrl("DELETE")).to.equal("/model_b/b/model_a/2")}),it("Should test the makeUrl method, with baseUrl, with parent, no extension",function(){var t,l;return l=new o({id:"b"}),t=new e({id:2},l),Falcon.baseApiUrl="http://www.falconjs.com/",expect(t.makeUrl("GET")).to.equal("http://www.falconjs.com/model_b/b/model_a/2"),expect(t.makeUrl("POST")).to.equal("http://www.falconjs.com/model_b/b/model_a"),expect(t.makeUrl("PUT")).to.equal("http://www.falconjs.com/model_b/b/model_a/2"),expect(t.makeUrl("DELETE")).to.equal("http://www.falconjs.com/model_b/b/model_a/2")}),it("Should test the makeUrl method, no baseUrl, with explicit parent, no extension",function(){var t,l;return l=new o({id:"b"}),t=new e({id:3}),expect(t.makeUrl("GET",l)).to.equal("/model_b/b/model_a/3"),expect(t.makeUrl("POST",l)).to.equal("/model_b/b/model_a"),expect(t.makeUrl("PUT",l)).to.equal("/model_b/b/model_a/3"),expect(t.makeUrl("DELETE",l)).to.equal("/model_b/b/model_a/3")}),it("Should test the makeUrl method, with baseUrl, with explicit parent, no extension",function(){var t,l;return l=new o({id:"b"}),t=new e({id:3}),Falcon.baseApiUrl="http://www.falconjs.com/",expect(t.makeUrl("GET",l)).to.equal("http://www.falconjs.com/model_b/b/model_a/3"),expect(t.makeUrl("POST",l)).to.equal("http://www.falconjs.com/model_b/b/model_a"),expect(t.makeUrl("PUT",l)).to.equal("http://www.falconjs.com/model_b/b/model_a/3"),expect(t.makeUrl("DELETE",l)).to.equal("http://www.falconjs.com/model_b/b/model_a/3")}),it("Should test the makeUrl method, no baseUrl, with overriden parent, no extension",function(){var t,l;return l=new o({id:"b"}),t=new e({id:3},l),expect(t.makeUrl("GET",null)).to.equal("/model_a/3"),expect(t.makeUrl("POST",null)).to.equal("/model_a"),expect(t.makeUrl("PUT",null)).to.equal("/model_a/3"),expect(t.makeUrl("DELETE",null)).to.equal("/model_a/3")}),it("Should test the makeUrl method, with baseUrl, with overriden parent, no extension",function(){var t,l;return l=new o({id:"b"}),t=new e({id:3},l),Falcon.baseApiUrl="http://www.falconjs.com/",expect(t.makeUrl("GET",null)).to.equal("http://www.falconjs.com/model_a/3"),expect(t.makeUrl("POST",null)).to.equal("http://www.falconjs.com/model_a"),expect(t.makeUrl("PUT",null)).to.equal("http://www.falconjs.com/model_a/3"),expect(t.makeUrl("DELETE",null)).to.equal("http://www.falconjs.com/model_a/3")}),it("Should test the makeUrl method, numeric index, no baseUrl, no parent, with extension",function(){var e;return e=new l({id:1}),expect(e.makeUrl("GET")).to.equal("/model_c/1.json"),expect(e.makeUrl("POST")).to.equal("/model_c.json"),expect(e.makeUrl("PUT")).to.equal("/model_c/1.json"),expect(e.makeUrl("DELETE")).to.equal("/model_c/1.json")}),it("Should test the makeUrl method, numeric index, with shorter baseUrl, no parent, with extension",function(){var e;return e=new l({id:1}),Falcon.baseApiUrl="http://www.falconjs.com",expect(e.makeUrl("GET")).to.equal("http://www.falconjs.com/model_c/1.json"),expect(e.makeUrl("POST")).to.equal("http://www.falconjs.com/model_c.json"),expect(e.makeUrl("PUT")).to.equal("http://www.falconjs.com/model_c/1.json"),expect(e.makeUrl("DELETE")).to.equal("http://www.falconjs.com/model_c/1.json")}),it("Should test the makeUrl method, numeric index, no baseUrl, no parent, with extension",function(){var e;return e=new l({id:1}),Falcon.baseApiUrl="http://www.falconjs.com/",expect(e.makeUrl("GET")).to.equal("http://www.falconjs.com/model_c/1.json"),expect(e.makeUrl("POST")).to.equal("http://www.falconjs.com/model_c.json"),expect(e.makeUrl("PUT")).to.equal("http://www.falconjs.com/model_c/1.json"),expect(e.makeUrl("DELETE")).to.equal("http://www.falconjs.com/model_c/1.json")}),it("Should test the makeUrl method, no baseUrl, with parent, with extension",function(){var e,t;return e=new o({id:"b"}),t=new l({id:2},e),expect(t.makeUrl("GET")).to.equal("/model_b/b/model_c/2.json"),expect(t.makeUrl("POST")).to.equal("/model_b/b/model_c.json"),expect(t.makeUrl("PUT")).to.equal("/model_b/b/model_c/2.json"),expect(t.makeUrl("DELETE")).to.equal("/model_b/b/model_c/2.json")}),it("Should test the makeUrl method, with baseUrl, with parent, with extension",function(){var e,t;return e=new o({id:"b"}),t=new l({id:2},e),Falcon.baseApiUrl="http://www.falconjs.com/",expect(t.makeUrl("GET")).to.equal("http://www.falconjs.com/model_b/b/model_c/2.json"),expect(t.makeUrl("POST")).to.equal("http://www.falconjs.com/model_b/b/model_c.json"),expect(t.makeUrl("PUT")).to.equal("http://www.falconjs.com/model_b/b/model_c/2.json"),expect(t.makeUrl("DELETE")).to.equal("http://www.falconjs.com/model_b/b/model_c/2.json")}),it("Should test the makeUrl method, no baseUrl, with explicit parent, with extension",function(){var e,t;return e=new o({id:"b"}),t=new l({id:3}),expect(t.makeUrl("GET",e)).to.equal("/model_b/b/model_c/3.json"),expect(t.makeUrl("POST",e)).to.equal("/model_b/b/model_c.json"),expect(t.makeUrl("PUT",e)).to.equal("/model_b/b/model_c/3.json"),expect(t.makeUrl("DELETE",e)).to.equal("/model_b/b/model_c/3.json")}),it("Should test the makeUrl method, with baseUrl, with  explicit parent, with extension",function(){var e,t;return e=new o({id:"b"}),t=new l({id:3}),Falcon.baseApiUrl="http://www.falconjs.com/",expect(t.makeUrl("GET",e)).to.equal("http://www.falconjs.com/model_b/b/model_c/3.json"),expect(t.makeUrl("POST",e)).to.equal("http://www.falconjs.com/model_b/b/model_c.json"),expect(t.makeUrl("PUT",e)).to.equal("http://www.falconjs.com/model_b/b/model_c/3.json"),expect(t.makeUrl("DELETE",e)).to.equal("http://www.falconjs.com/model_b/b/model_c/3.json")}),it("Should test the makeUrl method, string index, no baseUrl, no parent, with extension",function(){var e;return e=new n({id:"d"}),expect(e.makeUrl("GET")).to.equal("/model_d/d.json"),expect(e.makeUrl("POST")).to.equal("/model_d.json"),expect(e.makeUrl("PUT")).to.equal("/model_d/d.json"),expect(e.makeUrl("DELETE")).to.equal("/model_d/d.json")}),it("Should test the makeUrl method, string index, with shorter baseUrl, no parent, with extension",function(){var e;return e=new n({id:"d"}),Falcon.baseApiUrl="http://www.falconjs.com",expect(e.makeUrl("GET")).to.equal("http://www.falconjs.com/model_d/d.json"),expect(e.makeUrl("POST")).to.equal("http://www.falconjs.com/model_d.json"),expect(e.makeUrl("PUT")).to.equal("http://www.falconjs.com/model_d/d.json"),expect(e.makeUrl("DELETE")).to.equal("http://www.falconjs.com/model_d/d.json")}),it("Should test the makeUrl method, string index, with baseUrl, no parent, with extension",function(){var e;return e=new n({id:"d"}),Falcon.baseApiUrl="http://www.falconjs.com/",expect(e.makeUrl("GET")).to.equal("http://www.falconjs.com/model_d/d.json"),expect(e.makeUrl("POST")).to.equal("http://www.falconjs.com/model_d.json"),expect(e.makeUrl("PUT")).to.equal("http://www.falconjs.com/model_d/d.json"),expect(e.makeUrl("DELETE")).to.equal("http://www.falconjs.com/model_d/d.json")}),it("Should test the makeUrl method, no baseUrl, with non-ext. parent, with extension",function(){var t,o;return o=new n({id:"d"}),t=new e({id:2},o),expect(t.makeUrl("GET")).to.equal("/model_d/d/model_a/2"),expect(t.makeUrl("POST")).to.equal("/model_d/d/model_a"),expect(t.makeUrl("PUT")).to.equal("/model_d/d/model_a/2"),expect(t.makeUrl("DELETE")).to.equal("/model_d/d/model_a/2")}),it("Should test the makeUrl method, with baseUrl, with non-ext. parent, with extension",function(){var t,o;return o=new n({id:"d"}),t=new e({id:2},o),Falcon.baseApiUrl="http://www.falconjs.com/",expect(t.makeUrl("GET")).to.equal("http://www.falconjs.com/model_d/d/model_a/2"),expect(t.makeUrl("POST")).to.equal("http://www.falconjs.com/model_d/d/model_a"),expect(t.makeUrl("PUT")).to.equal("http://www.falconjs.com/model_d/d/model_a/2"),expect(t.makeUrl("DELETE")).to.equal("http://www.falconjs.com/model_d/d/model_a/2")}),it("Should test the makeUrl method, no baseUrl, with explicit non-ext. parent, with extension",function(){var t,o;return o=new n({id:"d"}),t=new e({id:3}),expect(t.makeUrl("GET",o)).to.equal("/model_d/d/model_a/3"),expect(t.makeUrl("POST",o)).to.equal("/model_d/d/model_a"),expect(t.makeUrl("PUT",o)).to.equal("/model_d/d/model_a/3"),expect(t.makeUrl("DELETE",o)).to.equal("/model_d/d/model_a/3")}),it("Should test the makeUrl method, no baseUrl, with explicit non-ext. parent, with extension",function(){var t,o;return o=new n({id:"d"}),t=new e({id:3}),Falcon.baseApiUrl="http://www.falconjs.com/",expect(t.makeUrl("GET",o)).to.equal("http://www.falconjs.com/model_d/d/model_a/3"),expect(t.makeUrl("POST",o)).to.equal("http://www.falconjs.com/model_d/d/model_a"),expect(t.makeUrl("PUT",o)).to.equal("http://www.falconjs.com/model_d/d/model_a/3"),expect(t.makeUrl("DELETE",o)).to.equal("http://www.falconjs.com/model_d/d/model_a/3")}),it("Should test the makeUrl method, no baseUrl, with parent, with extension",function(){var e,t;return t=new n({id:"d"}),e=new l({id:2},t),expect(e.makeUrl("GET")).to.equal("/model_d/d/model_c/2.json"),expect(e.makeUrl("POST")).to.equal("/model_d/d/model_c.json"),expect(e.makeUrl("PUT")).to.equal("/model_d/d/model_c/2.json"),expect(e.makeUrl("DELETE")).to.equal("/model_d/d/model_c/2.json")}),it("Should test the makeUrl method, with baseUrl, with parent, with extension",function(){var e,t;return t=new n({id:"d"}),e=new l({id:2},t),Falcon.baseApiUrl="http://www.falconjs.com/",expect(e.makeUrl("GET")).to.equal("http://www.falconjs.com/model_d/d/model_c/2.json"),expect(e.makeUrl("POST")).to.equal("http://www.falconjs.com/model_d/d/model_c.json"),expect(e.makeUrl("PUT")).to.equal("http://www.falconjs.com/model_d/d/model_c/2.json"),expect(e.makeUrl("DELETE")).to.equal("http://www.falconjs.com/model_d/d/model_c/2.json")}),it("Should test the makeUrl method, no baseUrl, with  explicit parent, with extension",function(){var e,t;return t=new n({id:"d"}),e=new l({id:3}),expect(e.makeUrl("GET",t)).to.equal("/model_d/d/model_c/3.json"),expect(e.makeUrl("POST",t)).to.equal("/model_d/d/model_c.json"),expect(e.makeUrl("PUT",t)).to.equal("/model_d/d/model_c/3.json"),expect(e.makeUrl("DELETE",t)).to.equal("/model_d/d/model_c/3.json")}),it("Should test the makeUrl method, with baseUrl, with explicit parent, with extension",function(){var e,t;return t=new n({id:"d"}),e=new l({id:3}),Falcon.baseApiUrl="http://www.falconjs.com/",expect(e.makeUrl("GET",t)).to.equal("http://www.falconjs.com/model_d/d/model_c/3.json"),expect(e.makeUrl("POST",t)).to.equal("http://www.falconjs.com/model_d/d/model_c.json"),expect(e.makeUrl("PUT",t)).to.equal("http://www.falconjs.com/model_d/d/model_c/3.json"),expect(e.makeUrl("DELETE",t)).to.equal("http://www.falconjs.com/model_d/d/model_c/3.json")}),it("Should be able to use url as a function, no parent",function(){var e;return e=new a({id:"e"}),expect(e.makeUrl("GET")).to.equal("/model_e/e"),expect(e.makeUrl("POST")).to.equal("/model_e"),expect(e.makeUrl("PUT")).to.equal("/model_e/e"),expect(e.makeUrl("DELETE")).to.equal("/model_e/e")}),it("Should be able to use url as a function, with parent",function(){var e;return e=new a({id:"e"},new o({id:"b"})),expect(e.makeUrl("GET")).to.equal("/model_b/b/model_e/e"),expect(e.makeUrl("POST")).to.equal("/model_b/b/model_e"),expect(e.makeUrl("PUT")).to.equal("/model_b/b/model_e/e"),expect(e.makeUrl("DELETE")).to.equal("/model_b/b/model_e/e")}),it("Should be able to use override the url, no parent",function(){var e;return e=new a({id:"e",url:"model_e2"}),expect(e.makeUrl("GET")).to.equal("/model_e2/e"),expect(e.makeUrl("POST")).to.equal("/model_e2"),expect(e.makeUrl("PUT")).to.equal("/model_e2/e"),expect(e.makeUrl("DELETE")).to.equal("/model_e2/e")}),it("Should be able to use override the url,with parent",function(){var e;return e=new a({id:"e",url:"model_e3"},new o({id:"b"})),expect(e.makeUrl("GET")).to.equal("/model_b/b/model_e3/e"),expect(e.makeUrl("POST")).to.equal("/model_b/b/model_e3"),expect(e.makeUrl("PUT")).to.equal("/model_b/b/model_e3/e"),expect(e.makeUrl("DELETE")).to.equal("/model_b/b/model_e3/e")}),it("Should test the makeUrl method, with baseUrl as '/', with explicit parent, with extension",function(){var e,t;return t=new n({id:"d"}),e=new l({id:3}),Falcon.baseApiUrl="/",expect(e.makeUrl("GET",t)).to.equal("model_d/d/model_c/3.json"),expect(e.makeUrl("POST",t)).to.equal("model_d/d/model_c.json"),expect(e.makeUrl("PUT",t)).to.equal("model_d/d/model_c/3.json"),expect(e.makeUrl("DELETE",t)).to.equal("model_d/d/model_c/3.json")})}),describe("Tesing model sync methods",function(){return describe("Testing Sync Method Aliases",function(){var e,o,l,n;return e=function(e){function o(){return n=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.url="model_a",o}(Falcon.Model),o=null,l=null,beforeEach(function(){return l=sinon.stub(e.prototype,"sync"),o=new e}),afterEach(function(){return l.restore()}),it("Should call sync correctly on fetch without options",function(){return o.fetch(),expect(l).to.have.been.calledOnce,expect(l).to.have.been.calledWith("GET",void 0)}),it("Should call sync correctly on fetch with options",function(){return o.fetch({}),expect(l).to.have.been.calledOnce,expect(l).to.have.been.calledWith("GET",{})}),it("Should call sync correctly on create without options",function(){return o.create(),expect(l).to.have.been.calledOnce,expect(l).to.have.been.calledWith("POST",void 0)}),it("Should call sync correctly on create with options",function(){return o.create({}),expect(l).to.have.been.calledOnce,expect(l).to.have.been.calledWith("POST",{})}),it("Should call sync correctly on save without options",function(){return o.set("id",1),o.save(),expect(l).to.have.been.calledOnce,expect(l).to.have.been.calledWith("PUT",void 0)}),it("Should call sync correctly on save with options",function(){return o.set("id",1),o.save({}),expect(l).to.have.been.calledOnce,expect(l).to.have.been.calledWith("PUT",{})}),it("Should call sync correctly on destroy without options",function(){return o.destroy(),expect(l).to.have.been.calledOnce,expect(l).to.have.been.calledWith("DELETE",void 0)}),it("Should call sync correctly on destroy with options",function(){return o.destroy({}),expect(l).to.have.been.calledOnce,expect(l).to.have.been.calledWith("DELETE",{})})}),describe("Testing sync method $.ajax calls",function(){var e,o,l;return e=function(e){function o(){return l=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.url="model_a",o}(Falcon.Model),o=null,beforeEach(function(){return o=sinon.stub(jQuery,"ajax"),Falcon.cache=!1}),afterEach(function(){return o.restore()}),it("Should fetch properly without options",function(){var t;return t=new e({id:1}),t.fetch(),expect(o).to.have.been.calledOnce,expect(o).to.have.been.calledWithMatch({type:"GET"}),expect(o).to.have.been.calledWithMatch({url:t.makeUrl("GET")}),expect(o).to.have.been.calledWithMatch({data:""}),expect(o).to.have.been.calledWithMatch({contentType:"application/json"}),expect(o).to.have.been.calledWithMatch({cache:!1}),expect(o).to.have.been.calledWithMatch({headers:{}}),expect(o.firstCall.args[0].success).to.be.a("function"),expect(o.firstCall.args[0].success).to.have.length(3),expect(o.firstCall.args[0].error).to.be.a("function"),expect(o.firstCall.args[0].error).to.have.length(1),expect(o.firstCall.args[0].complete).to.be.a("function"),expect(o.firstCall.args[0].complete).to.have.length(2)}),it("Should fetch properly with options",function(){var t,l,n,a;return t=new e({id:1}),Falcon.cache=!0,t.fetch({url:"http://www.falconjs.com",data:{hello:"world"},contentType:"text/html",headers:{"User-Agent":"User-Agent",Chrome:"Chrome"},success:a=function(){},error:n=function(){},complete:l=function(){}}),expect(o).to.have.been.calledOnce,expect(o).to.have.been.calledWithMatch({type:"GET"}),expect(o).to.have.been.calledWithMatch({url:"http://www.falconjs.com"}),expect(o).to.have.been.calledWithMatch({data:JSON.stringify({hello:"world"})}),expect(o).to.have.been.calledWithMatch({contentType:"text/html"}),expect(o).to.have.been.calledWithMatch({cache:!0}),expect(o).to.have.been.calledWithMatch({headers:{"User-Agent":"User-Agent",Chrome:"Chrome"}}),expect(o.firstCall.args[0].success).to.be.a("function"),expect(o.firstCall.args[0].success).to.have.length(3),expect(o.firstCall.args[0].success).to.not.equal(a),expect(o.firstCall.args[0].error).to.be.a("function"),expect(o.firstCall.args[0].error).to.have.length(1),expect(o.firstCall.args[0].error).to.not.equal(n),expect(o.firstCall.args[0].complete).to.be.a("function"),expect(o.firstCall.args[0].complete).to.have.length(2),expect(o.firstCall.args[0].complete).to.not.equal(l)}),it("Should save properly without options",function(){var t;return t=new e({id:1}),t.save(),expect(o).to.have.been.calledOnce,expect(o).to.have.been.calledWithMatch({type:"PUT"}),expect(o).to.have.been.calledWithMatch({url:t.makeUrl("PUT")}),expect(o).to.have.been.calledWithMatch({data:JSON.stringify({id:1})}),expect(o).to.have.been.calledWithMatch({contentType:"application/json"}),expect(o).to.have.been.calledWithMatch({cache:!1}),expect(o).to.have.been.calledWithMatch({headers:{}}),expect(o.firstCall.args[0].success).to.be.a("function"),expect(o.firstCall.args[0].success).to.have.length(3),expect(o.firstCall.args[0].error).to.be.a("function"),expect(o.firstCall.args[0].error).to.have.length(1),expect(o.firstCall.args[0].complete).to.be.a("function"),expect(o.firstCall.args[0].complete).to.have.length(2)}),it("Should save properly with options",function(){var t,l,n,a;return t=new e({id:1}),Falcon.cache=!0,t.save({url:"http://www.falconjs.com",data:{hello:"world"},contentType:"text/html",headers:{"User-Agent":"User-Agent",Chrome:"Chrome"},success:a=function(){},error:n=function(){},complete:l=function(){}}),expect(o).to.have.been.calledOnce,expect(o).to.have.been.calledWithMatch({type:"PUT"}),expect(o).to.have.been.calledWithMatch({url:"http://www.falconjs.com"}),expect(o).to.have.been.calledWithMatch({data:JSON.stringify({hello:"world"})}),expect(o).to.have.been.calledWithMatch({contentType:"text/html"}),expect(o).to.have.been.calledWithMatch({cache:!0}),expect(o).to.have.been.calledWithMatch({headers:{"User-Agent":"User-Agent",Chrome:"Chrome"}}),expect(o.firstCall.args[0].success).to.be.a("function"),expect(o.firstCall.args[0].success).to.have.length(3),expect(o.firstCall.args[0].success).to.not.equal(a),expect(o.firstCall.args[0].error).to.be.a("function"),expect(o.firstCall.args[0].error).to.have.length(1),expect(o.firstCall.args[0].error).to.not.equal(n),expect(o.firstCall.args[0].complete).to.be.a("function"),expect(o.firstCall.args[0].complete).to.have.length(2),expect(o.firstCall.args[0].complete).to.not.equal(l)}),it("Should create properly without options",function(){var t;return t=new e({id:1}),t.create(),expect(o).to.have.been.calledOnce,expect(o).to.have.been.calledWithMatch({type:"POST"}),expect(o).to.have.been.calledWithMatch({url:t.makeUrl("POST")}),expect(o).to.have.been.calledWithMatch({data:JSON.stringify({id:1})}),expect(o).to.have.been.calledWithMatch({contentType:"application/json"}),expect(o).to.have.been.calledWithMatch({cache:!1}),expect(o).to.have.been.calledWithMatch({headers:{}}),expect(o.firstCall.args[0].success).to.be.a("function"),expect(o.firstCall.args[0].success).to.have.length(3),expect(o.firstCall.args[0].error).to.be.a("function"),expect(o.firstCall.args[0].error).to.have.length(1),expect(o.firstCall.args[0].complete).to.be.a("function"),expect(o.firstCall.args[0].complete).to.have.length(2)}),it("Should create properly with options",function(){var t,l,n,a;return t=new e({id:1}),Falcon.cache=!0,t.create({url:"http://www.falconjs.com",data:{hello:"world"},contentType:"text/html",headers:{"User-Agent":"User-Agent",Chrome:"Chrome"},success:a=function(){},error:n=function(){},complete:l=function(){}}),expect(o).to.have.been.calledOnce,expect(o).to.have.been.calledWithMatch({type:"POST"}),expect(o).to.have.been.calledWithMatch({url:"http://www.falconjs.com"}),expect(o).to.have.been.calledWithMatch({data:JSON.stringify({hello:"world"})}),expect(o).to.have.been.calledWithMatch({contentType:"text/html"}),expect(o).to.have.been.calledWithMatch({cache:!0}),expect(o).to.have.been.calledWithMatch({headers:{"User-Agent":"User-Agent",Chrome:"Chrome"}}),expect(o.firstCall.args[0].success).to.be.a("function"),expect(o.firstCall.args[0].success).to.have.length(3),expect(o.firstCall.args[0].success).to.not.equal(a),expect(o.firstCall.args[0].error).to.be.a("function"),expect(o.firstCall.args[0].error).to.have.length(1),expect(o.firstCall.args[0].error).to.not.equal(n),expect(o.firstCall.args[0].complete).to.be.a("function"),expect(o.firstCall.args[0].complete).to.have.length(2),expect(o.firstCall.args[0].complete).to.not.equal(l)
}),it("Should destroy properly without options",function(){var t;return t=new e({id:1}),t.destroy(),expect(o).to.have.been.calledOnce,expect(o).to.have.been.calledWithMatch({type:"DELETE"}),expect(o).to.have.been.calledWithMatch({url:t.makeUrl("DELETE")}),expect(o).to.have.been.calledWithMatch({data:""}),expect(o).to.have.been.calledWithMatch({contentType:"application/json"}),expect(o).to.have.been.calledWithMatch({cache:!1}),expect(o).to.have.been.calledWithMatch({headers:{}}),expect(o.firstCall.args[0].success).to.be.a("function"),expect(o.firstCall.args[0].success).to.have.length(3),expect(o.firstCall.args[0].error).to.be.a("function"),expect(o.firstCall.args[0].error).to.have.length(1),expect(o.firstCall.args[0].complete).to.be.a("function"),expect(o.firstCall.args[0].complete).to.have.length(2)}),it("Should destroy properly with options",function(){var t,l,n,a;return t=new e({id:1}),Falcon.cache=!0,t.destroy({url:"http://www.falconjs.com",data:{hello:"world"},contentType:"text/html",headers:{"User-Agent":"User-Agent",Chrome:"Chrome"},success:a=function(){},error:n=function(){},complete:l=function(){}}),expect(o).to.have.been.calledOnce,expect(o).to.have.been.calledWithMatch({type:"DELETE"}),expect(o).to.have.been.calledWithMatch({url:"http://www.falconjs.com"}),expect(o).to.have.been.calledWithMatch({data:JSON.stringify({hello:"world"})}),expect(o).to.have.been.calledWithMatch({contentType:"text/html"}),expect(o).to.have.been.calledWithMatch({cache:!0}),expect(o).to.have.been.calledWithMatch({headers:{"User-Agent":"User-Agent",Chrome:"Chrome"}}),expect(o.firstCall.args[0].success).to.be.a("function"),expect(o.firstCall.args[0].success).to.have.length(3),expect(o.firstCall.args[0].success).to.not.equal(a),expect(o.firstCall.args[0].error).to.be.a("function"),expect(o.firstCall.args[0].error).to.have.length(1),expect(o.firstCall.args[0].error).to.not.equal(n),expect(o.firstCall.args[0].complete).to.be.a("function"),expect(o.firstCall.args[0].complete).to.have.length(2),expect(o.firstCall.args[0].complete).to.not.equal(l)})}),describe("Testing sync method XHR responses",function(){var e,o,l,n,a,c,r,i,u,s,p,d,h,m,f,b,x;return e=function(e){function o(){return x=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.url="model_a",o}(Falcon.Model),m=null,s=null,d=null,u=null,i=null,l=null,h=null,a=null,b=null,r=null,o=null,n=null,c=null,f=null,p=null,beforeEach(function(){return m=sinon.fakeServer.create(),s=new e,n={hello:"world"},c={error:"Something Wrong"},f={foo:"bar"},d=sinon.stub(s,"parse").returns(f),u=sinon.stub(s,"fill"),s.on("fetch",i=sinon.spy()),s.on("create",l=sinon.spy()),s.on("save",h=sinon.spy()),s.on("destroy",a=sinon.spy()),p={success:b=sinon.spy(),error:r=sinon.spy(),complete:o=sinon.spy()}}),afterEach(function(){return m.restore()}),it("Should call the proper success method",function(){return s.fetch(p),m.respondWith([200,{},JSON.stringify(n)]),m.respond(),expect(d.callCount).to.equal(1),expect(d.firstCall.args[0]).to.deep.equal(n),expect(u.callCount).to.equal(1),expect(u.firstCall.args[0]).to.deep.equal(f),expect(u).to.have.been.calledAfter(d),expect(i).to.have.been.calledOnce,expect(l).to.not.have.been.called,expect(h).to.not.have.been.called,expect(a).to.not.have.been.called,expect(i).to.have.been.calledAfter(u),expect(b.callCount).to.equal(1),expect(b).to.have.been.calledOn(s),expect(b.firstCall.args.length).to.equal(4),expect(b.firstCall.args[0]).to.equal(s),expect(r).to.not.have.been.called,expect(o.callCount).to.equal(1),expect(o).to.have.been.calledOn(s),expect(o.firstCall.args.length).to.equal(3),expect(o.firstCall.args[0]).to.equal(s),expect(o).to.have.been.calledAfter(b)}),it("Should not fill when fill option is false on fetch",function(){return p.fill=!1,s.fetch(p),m.respondWith([200,{},JSON.stringify(n)]),m.respond(),expect(d.callCount).to.equal(1),expect(d.firstCall.args[0]).to.deep.equal(n),expect(u.callCount).to.equal(0),expect(i).to.have.been.calledOnce,expect(l).to.not.have.been.called,expect(h).to.not.have.been.called,expect(a).to.not.have.been.called,expect(i).to.have.been.calledAfter(d),expect(b.callCount).to.equal(1),expect(b).to.have.been.calledOn(s),expect(b.firstCall.args.length).to.equal(4),expect(b.firstCall.args[0]).to.equal(s),expect(r).to.not.have.been.called,expect(o.callCount).to.equal(1),expect(o).to.have.been.calledOn(s),expect(o.firstCall.args.length).to.equal(3),expect(o.firstCall.args[0]).to.equal(s),expect(o).to.have.been.calledAfter(b)}),it("Should call the error response on an errornous result",function(){return s.fetch(p),m.respondWith([400,{},JSON.stringify(c)]),m.respond(),expect(d.callCount).to.equal(0),expect(u.callCount).to.equal(0),expect(i).to.not.have.been.called,expect(l).to.not.have.been.called,expect(h).to.not.have.been.called,expect(a).to.not.have.been.called,expect(b.callCount).to.equal(0),expect(r.callCount).to.equal(1),expect(r.firstCall.args.length).to.equal(3),expect(r).to.have.been.calledOn(s),expect(o.firstCall.args[0]).to.equal(s),expect(o.callCount).to.equal(1),expect(o).to.have.been.calledOn(s),expect(o.firstCall.args.length).to.equal(3),expect(o.firstCall.args[0]).to.equal(s),expect(o).to.have.been.calledAfter(r)}),it("Should call the success response on create",function(){return s.create(p),m.respondWith([200,{},JSON.stringify(n)]),m.respond(),expect(d.callCount).to.equal(1),expect(d.firstCall.args[0]).to.deep.equal(n),expect(u.callCount).to.equal(1),expect(u.firstCall.args[0]).to.deep.equal(f),expect(u).to.have.been.calledAfter(d),expect(i).to.not.have.been.called,expect(l.callCount).to.equal(1),expect(h).to.not.have.been.called,expect(a).to.not.have.been.called,expect(b.callCount).to.equal(1),expect(b).to.have.been.calledOn(s),expect(b.firstCall.args.length).to.equal(4),expect(b.firstCall.args[0]).to.equal(s),expect(r).to.not.have.been.called,expect(o.callCount).to.equal(1),expect(o).to.have.been.calledOn(s),expect(o.firstCall.args.length).to.equal(3),expect(o.firstCall.args[0]).to.equal(s),expect(o).to.have.been.calledAfter(b)}),it("Should call the success response on save",function(){return s.set("id",1),s.save(p),m.respondWith([200,{},JSON.stringify(n)]),m.respond(),expect(d.callCount).to.equal(1),expect(d.firstCall.args[0]).to.deep.equal(n),expect(u.callCount).to.equal(1),expect(u.firstCall.args[0]).to.deep.equal(f),expect(u).to.have.been.calledAfter(d),expect(i).to.not.have.been.called,expect(l).to.not.have.been.called,expect(h.callCount).to.equal(1),expect(a).to.not.have.been.called,expect(b.callCount).to.equal(1),expect(b).to.have.been.calledOn(s),expect(b.firstCall.args.length).to.equal(4),expect(b.firstCall.args[0]).to.equal(s),expect(r).to.not.have.been.called,expect(o.callCount).to.equal(1),expect(o).to.have.been.calledOn(s),expect(o.firstCall.args.length).to.equal(3),expect(o.firstCall.args[0]).to.equal(s),expect(o).to.have.been.calledAfter(b)}),it("Should call the success response on destroy",function(){return s.destroy(p),m.respondWith([200,{},JSON.stringify(n)]),m.respond(),expect(d.callCount).to.equal(1),expect(d.firstCall.args[0]).to.deep.equal(n),expect(u.callCount).to.equal(1),expect(u.firstCall.args[0]).to.deep.equal(f),expect(u).to.have.been.calledAfter(d),expect(i).to.not.have.been.called,expect(l).to.not.have.been.called,expect(h).to.not.have.been.called,expect(a.callCount).to.equal(1),expect(b.callCount).to.equal(1),expect(b).to.have.been.calledOn(s),expect(b.firstCall.args.length).to.equal(4),expect(b.firstCall.args[0]).to.equal(s),expect(r).to.not.have.been.called,expect(o.callCount).to.equal(1),expect(o).to.have.been.calledOn(s),expect(o.firstCall.args.length).to.equal(3),expect(o.firstCall.args[0]).to.equal(s),expect(o).to.have.been.calledAfter(b)})}),describe("Testing sync method options in depth",function(){var e,o,l,n,a;return e=function(e){function o(){return n=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.url="model_a",o}(Falcon.Model),o=function(e){function o(){return a=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.url="model_b",o}(Falcon.Model),l=null,beforeEach(function(){return l=sinon.stub(jQuery,"ajax"),Falcon.cache=!1}),afterEach(function(){return l.restore()}),it("Should sync properly without options",function(){var t;return t=new e({id:1}),t.sync("GET"),expect(l).to.have.been.calledOnce,expect(l).to.have.been.calledWithMatch({type:"GET"}),expect(l).to.have.been.calledWithMatch({url:t.makeUrl("GET")}),expect(l).to.have.been.calledWithMatch({data:""}),expect(l).to.have.been.calledWithMatch({contentType:"application/json"}),expect(l).to.have.been.calledWithMatch({cache:!1}),expect(l).to.have.been.calledWithMatch({headers:{}}),expect(l.firstCall.args[0].success).to.be.a("function"),expect(l.firstCall.args[0].success).to.have.length(3),expect(l.firstCall.args[0].error).to.be.a("function"),expect(l.firstCall.args[0].error).to.have.length(1),expect(l.firstCall.args[0].complete).to.be.a("function"),expect(l.firstCall.args[0].complete).to.have.length(2)}),it("Should allow for a specified parent to override",function(){var t,n;return t=new e({id:1},new o({id:"b"})),t.sync("GET",{parent:n=new o({id:"b2"})}),expect(l).to.have.been.calledWithMatch({url:t.makeUrl("GET",n)})}),it("Should allow for a null parent",function(){var t;return t=new e({id:1},new o({id:"b"})),t.sync("GET",{parent:null}),expect(l).to.have.been.calledWithMatch({url:t.makeUrl("GET",null)})})}),describe("Additional miscellaneous sync tests",function(){var e,o,l,n,a;return e=function(e){function o(){return n=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.url="model_a",o}(Falcon.Model),o=function(e){function o(){return a=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.url="model_b",o}(Falcon.Model),l=null,beforeEach(function(){return l=sinon.fakeServer.create(),Falcon.cache=!1}),afterEach(function(){return l.restore()}),it("Should allow for a third parameter to define the context",function(){var t,n,a;return n=new o({id:"b"}),t=new e({id:1}),t.sync("GET",a=sinon.spy(),n),l.respondWith([200,{},JSON.stringify(t.serialize())]),l.respond(),expect(a).to.have.been.called,expect(a).to.have.been.calledOn(n)}),it("Should let pass context from fetch to sync",function(){var t,l,n,a;return l=new o({id:"b"}),t=new e({id:1}),a=sinon.stub(t,"sync"),t.fetch(n=sinon.spy(),l),expect(a).to.have.been.called,expect(a.firstCall.args[1]).to.equal(n),expect(a.firstCall.args[2]).to.equal(l)}),it("Should let pass context from create to sync",function(){var t,l,n,a;return l=new o({id:"b"}),t=new e({id:1}),a=sinon.stub(t,"sync"),t.create(n=sinon.spy(),l),expect(a).to.have.been.called,expect(a.firstCall.args[1]).to.equal(n),expect(a.firstCall.args[2]).to.equal(l)}),it("Should let pass context from save to sync",function(){var t,l,n,a;return l=new o({id:"b"}),t=new e({id:1}),a=sinon.stub(t,"sync"),t.save(n=sinon.spy(),l),expect(a).to.have.been.called,expect(a.firstCall.args[1]).to.equal(n),expect(a.firstCall.args[2]).to.equal(l)}),it("Should let pass context from destroy to sync",function(){var t,l,n,a;return l=new o({id:"b"}),t=new e({id:1}),a=sinon.stub(t,"sync"),t.destroy(n=sinon.spy(),l),expect(a).to.have.been.called,expect(a.firstCall.args[1]).to.equal(n),expect(a.firstCall.args[2]).to.equal(l)})})}),it("Should match equality properly",function(){var e,o,l,n,a,c,r;return e=function(e){function o(){return r=o.__super__.constructor.apply(this,arguments)}return t(o,e),o}(Falcon.Model),o=new e({id:1}),l=new e({id:2}),n=new e({id:"a"}),a=new e,c=new e,expect(o.equals(o)).to.be["true"],expect(o.equals(l)).to.be["false"],expect(o.equals(1)).to.be["true"],expect(o.equals(new e({id:1}))).to.be["true"],expect(n.equals(n)).to.be["true"],expect(n.equals(l)).to.be["false"],expect(n.equals("a")).to.be["true"],expect(n.equals(new e({id:"a"}))).to.be["true"],expect(a.equals(c)).to.be["false"],expect(a.equals(a)).to.be["true"]}),describe("Testing the mixin method",function(){return it("Should implement mixins properly",function(){var e,o,l,n,a,c;return e=function(e){function l(){return a=l.__super__.constructor.apply(this,arguments)}return t(l,e),l.prototype.initialize=function(){return this.model_b=new o},l}(Falcon.Model),o=function(e){function o(){return c=o.__super__.constructor.apply(this,arguments)}return t(o,e),o}(Falcon.Model),n=new e,expect(n.hello).to.be.undefined,expect(n.foo).to.be.undefined,expect(n.model_b.test).to.be.undefined,n.mixin({hello:l=sinon.spy(),foo:ko.observable("bar"),model_b:{test:"123"}}),expect(n.hello).not.to.be.undefined,expect(n.hello).to.be.a("function"),expect(ko.isObservable(n.foo)).to.be["true"],expect(n.foo()).to.equal("bar"),expect(n.model_b.test).not.to.be.undefined,expect(n.model_b.test).to.equal("123"),n.hello("world"),expect(l).to.have.been.calledOnce,expect(l).to.have.been.calledOn(n),expect(l.firstCall.args[0]).to.equal(n),expect(l.firstCall.args[1]).to.equal("world")}),it("Should preserve existing values in the model",function(){var e,o,l;return e=function(e){function o(){return l=o.__super__.constructor.apply(this,arguments)}return t(o,e),o}(Falcon.Model),o=new e({hello:"world",foo:"bar"}),expect(o.get("hello")).to.equal("world"),expect(o.get("foo")).to.equal("bar"),expect(ko.isObservable(o.hello)).to.be["false"],o.mixin({hello:ko.observable(),foo:"baz"}),expect(o.get("hello")).to.equal("world"),expect(o.get("foo")).to.equal("bar"),expect(ko.isObservable(o.hello)).to.be["true"]})}),describe("Testing clone() method",function(){var e,o,l,n,a,c;return e=function(e){function o(){return n=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.initialize=function(){return this.foo=ko.observable()},o}(Falcon.Model),o=function(e){function o(){return a=o.__super__.constructor.apply(this,arguments)}return t(o,e),o}(Falcon.Model),l=function(e){function o(){return c=o.__super__.constructor.apply(this,arguments)}return t(o,e),o}(Falcon.Model),it("Should do a basic clone properly",function(){var t,l,n;return n=new o,t=new e({id:1,hello:"world",foo:ko.observable("bar")},n),l=t.clone(),expect(t).to.not.equal(l),expect(l.hello).to.exist,expect(l.foo).to.exist,expect(l.id).to.exist,expect(l.parent).to.exist,expect(l.id).to.equal(1),expect(l.parent).to.equal(n),expect(ko.isObservable(l.foo)).to.be["true"],expect(l.foo()).to.be.equal("bar")}),it("Should do clone properly additional fields properly",function(){var t,l,n;return n=new o,t=new e({id:1,hello:"world",foo:ko.observable("bar")},n),l=t.clone(["id","foo"]),expect(t).to.not.equal(l),expect(l.hello).not.to.exist,expect(l.foo).to.exist,expect(l.id).to.exist,expect(l.parent).to.exist,expect(l.id).to.equal(1),expect(l.parent).to.equal(n),expect(ko.isObservable(l.foo)).to.be["true"],expect(l.foo()).to.be.equal("bar")}),it("Should do clone properly additional fields properly without parent",function(){var t,l,n;return n=new o,t=new e({id:1,hello:"world",foo:ko.observable("bar")},n),l=t.clone(["id","hello"],null),expect(t).to.not.equal(l),expect(l.hello).to.exist,expect(l.foo).to.exist,expect(l.id).to.exist,expect(l.parent).not.to.exist,expect(l.id).to.equal(1),expect(l.parent).to.equal(null),expect(ko.isObservable(l.hello)).to.be["false"],expect(l.hello).to.be.equal("world"),expect(ko.isObservable(l.foo)).to.be["true"],expect(l.foo()).to.be.undefined}),it("Should do clone properly with additional fields properly without parent or id fields",function(){var t,l,n;return n=new o,t=new e({id:1,hello:"world",foo:ko.observable("bar")},n),l=t.clone(["hello"],null),expect(t).to.not.equal(l),expect(l.hello).to.exist,expect(l.foo).to.exist,expect(l.parent).not.to.exist,expect(l.id).to.equal(null),expect(l.parent).to.equal(null),expect(ko.isObservable(l.hello)).to.be["false"],expect(l.hello).to.be.equal("world"),expect(ko.isObservable(l.foo)).to.be["true"],expect(l.foo()).to.be.undefined}),it("Should do clone properly additional fields properly with new parent",function(){var t,n,a,c;return c=new l,a=new o,t=new e({id:1,hello:"world",foo:ko.observable("bar")},a),n=t.clone(["id","hello"],c),expect(t).to.not.equal(n),expect(n.hello).to.exist,expect(n.foo).to.exist,expect(n.id).to.exist,expect(n.parent).to.exist,expect(n.parent).to.equal(c),expect(n.id).to.equal(1),expect(n.parent).to.equal(c),expect(ko.isObservable(n.hello)).to.be["false"],expect(n.hello).to.be.equal("world"),expect(ko.isObservable(n.foo)).to.be["true"],expect(n.foo()).to.be.undefined}),it("Should do clone properly additional fields properly with new parent or id fields",function(){var t,n,a,c;return c=new l,a=new o,t=new e({id:1,hello:"world",foo:ko.observable("bar")},a),n=t.clone(["hello"],c),expect(t).to.not.equal(n),expect(n.hello).to.exist,expect(n.foo).to.exist,expect(n.parent).to.exist,expect(n.parent).to.equal(c),expect(n.id).to.equal(null),expect(n.parent).to.equal(c),expect(ko.isObservable(n.hello)).to.be["false"],expect(n.hello).to.be.equal("world"),expect(ko.isObservable(n.foo)).to.be["true"],expect(n.foo()).to.be.undefined})}),it("Should properly detect if the model is new or not",function(){var e,o,l;return e=function(e){function o(){return l=o.__super__.constructor.apply(this,arguments)}return t(o,e),o}(Falcon.Model),o=new e,expect(o.isNew()).to.be["true"],o=new e({id:1}),expect(o.isNew()).to.be["false"],o=new e({id:"a"}),expect(o.isNew()).to.be["false"]})})}).call(this);