(function(){var e={}.hasOwnProperty,t=function(t,o){function n(){this.constructor=t}for(var l in o)e.call(o,l)&&(t[l]=o[l]);return n.prototype=o.prototype,t.prototype=new n,t.__super__=o.prototype,t};describe("Test Collection Methods",function(){var e,o,n,l,r,a,c,i,u,s,p,d,h,f,b,m,_,w,x,v,g,y,q,k;return i=function(e){function o(){return h=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.url="model_a",o}(Falcon.Model),u=function(e){function o(){return f=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.url="model_b",o}(Falcon.Model),s=function(e){function o(){return _=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.url="model_c",o}(Falcon.Model),p=function(e){function o(){return w=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.url=function(){return"model_d"},o}(Falcon.Model),e=function(e){function o(){return x=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.model=i,o}(Falcon.Collection),o=function(e){function o(){return v=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.model=u,o}(Falcon.Collection),n=function(e){function o(){return g=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.model=s,o}(Falcon.Collection),l=function(e){function o(){return y=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.model=p,o}(Falcon.Collection),r=function(e){function o(){return q=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.model=p,o.prototype.url="collection_d2",o}(Falcon.Collection),a=function(e){function o(){return k=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.model=p,o.prototype.url=function(){return"collection_d3"},o}(Falcon.Collection),d=function(e){function o(){return b=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.url="model_e",o.prototype.initialize=function(){return this.title=ko.observable()},o}(Falcon.Model),c=function(e){function o(){return m=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.model=d,o}(Falcon.Collection),beforeEach(function(){return Falcon.baseApiUrl="",Falcon.baseTemplateUrl=""}),it("Should initialize properly",function(){var t,o,n,l;return o=sinon.stub(e.prototype,"initialize"),t=new e,o.should.have.been.calledOnce,o.should.have.been.calledWith(),o.should.have.been.calledOn(t),o.reset(),l=[{hello:"world"},{hello:"world2"}],t=new e(l),o.should.have.been.calledOnce,o.should.have.been.calledWith(l),expect(t.parent).to.be.undefined,expect(t.length()).to.equal(2),o.reset(),n=new u,t=new e(l,n),o.should.have.been.calledOnce,o.should.have.been.calledWith(l),expect(t.parent).to.equal(n),expect(t.length()).to.equal(2),o.reset(),n=new u,t=new e(n,l),o.should.have.been.calledOnce,o.should.have.been.calledWith(l),expect(t.parent).to.equal(n),expect(t.length()).to.equal(2),o.reset(),l=[new i({hello:"world"}),new i({hello:"world2"})],t=new e(l),o.should.have.been.calledOnce,o.should.have.been.calledWith(l),expect(t.parent).to.be.undefined,expect(t.length()).to.equal(2),o.reset(),n=new u,t=new e(l,n),o.should.have.been.calledOnce,o.should.have.been.calledWith(l),expect(t.parent).to.equal(n),expect(t.length()).to.equal(2),o.reset(),n=new u,t=new e(n,l),o.should.have.been.calledOnce,o.should.have.been.calledWith(l),expect(t.parent).to.equal(n),expect(t.length()).to.equal(2),o.reset(),o.restore()}),it("Should create RawrCollection with defaults that have correct arguments",function(){var e,o,n,l,r;return o=null,e=function(e){function n(){return r=n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.defaults={hello:o=sinon.spy()},n}(Falcon.Collection),expect(o).to.not.have.been.called,l=new e(n=["one","two","three"]),expect(o).to.have.been.called,expect(o.callCount).to.equal(1),expect(o.firstCall.args.length).to.equal(1),expect(o.firstCall.args[0]).to.equal(n)}),describe("Testing the different fill method combinations",function(){return describe("Test default option",function(){return it("Should properly add items into an empty collection",function(){var t;return t=new e,t.fill([{id:1,hello:"world"},{id:2,hello:"world2"}]),t.length().should.equal(2),t.at(0).should.be["instanceof"](i),t.at(0).get("id").should.equal(1),t.at(0).get("hello").should.equal("world"),t.at(1).should.be["instanceof"](i),t.at(1).get("id").should.equal(2),t.at(1).get("hello").should.equal("world2")}),it("Should properly replace items into a populated collection",function(){var t;return t=new e([{id:2,hello:"world3"}]),t.fill([{id:1,hello:"world"},{id:2,hello:"world2"}]),t.length().should.equal(2),t.at(0).should.be["instanceof"](i),t.at(0).get("id").should.equal(1),t.at(0).get("hello").should.equal("world"),t.at(1).should.be["instanceof"](i),t.at(1).get("id").should.equal(2),t.at(1).get("hello").should.equal("world2")})}),describe("Test 'replace' option",function(){return it("Should properly add items into an empty collection",function(){var t;return t=new e,t.fill([{id:1,hello:"world"},{id:2,hello:"world2"}],{method:"replace"}),t.length().should.equal(2),t.at(0).should.be["instanceof"](i),t.at(0).get("id").should.equal(1),t.at(0).get("hello").should.equal("world"),t.at(1).should.be["instanceof"](i),t.at(1).get("id").should.equal(2),t.at(1).get("hello").should.equal("world2")}),it("Should properly replace items into a populated collection",function(){var t;return t=new e([{id:2,hello:"world3"}]),t.fill([{id:1,hello:"world"},{id:2,hello:"world2"}],{method:"replace"}),t.length().should.equal(2),t.at(0).should.be["instanceof"](i),t.at(0).get("id").should.equal(1),t.at(0).get("hello").should.equal("world"),t.at(1).should.be["instanceof"](i),t.at(1).get("id").should.equal(2),t.at(1).get("hello").should.equal("world2")})}),describe("Test 'append' option",function(){return it("Should properly add items into an empty collection",function(){var t;return t=new e,t.fill([{id:1,hello:"world"},{id:2,hello:"world2"}],{method:"append"}),t.length().should.equal(2),t.at(0).should.be["instanceof"](i),t.at(0).get("id").should.equal(1),t.at(0).get("hello").should.equal("world"),t.at(1).should.be["instanceof"](i),t.at(1).get("id").should.equal(2),t.at(1).get("hello").should.equal("world2")}),it("Should properly append items into a populated collection",function(){var t;return t=new e([{id:3,hello:"world3"}]),t.fill([{id:1,hello:"world"},{id:2,hello:"world2"}],{method:"append"}),t.length().should.equal(3),t.at(0).should.be["instanceof"](i),t.at(0).get("id").should.equal(3),t.at(0).get("hello").should.equal("world3"),t.at(1).should.be["instanceof"](i),t.at(1).get("id").should.equal(1),t.at(1).get("hello").should.equal("world"),t.at(2).should.be["instanceof"](i),t.at(2).get("id").should.equal(2),t.at(2).get("hello").should.equal("world2")})}),describe("Test 'prepend' option",function(){return it("Should properly add items into an empty collection",function(){var t;return t=new e,t.fill([{id:1,hello:"world"},{id:2,hello:"world2"}],{method:"prepend"}),t.length().should.equal(2),t.at(0).should.be["instanceof"](i),t.at(0).get("id").should.equal(1),t.at(0).get("hello").should.equal("world"),t.at(1).should.be["instanceof"](i),t.at(1).get("id").should.equal(2),t.at(1).get("hello").should.equal("world2")}),it("Should properly prepend items into a populated collection",function(){var t,o;return t=new e([{id:3,hello:"world3"}]),t.fill([{id:1,hello:"world"},{id:2,hello:"world2"}],{method:"prepend"}),o=0,t.length().should.equal(3),t.at(o).should.be["instanceof"](i),t.at(o).get("id").should.equal(1),t.at(o).get("hello").should.equal("world"),o++,t.at(o).should.be["instanceof"](i),t.at(o).get("id").should.equal(2),t.at(o).get("hello").should.equal("world2"),o++,t.at(o).should.be["instanceof"](i),t.at(o).get("id").should.equal(3),t.at(o).get("hello").should.equal("world3")})}),describe("Test 'merge' option",function(){return it("Should properly add items into an empty collection",function(){var t;return t=new e,t.fill([{id:1,hello:"world"},{id:2,hello:"world2"}],{method:"merge"}),t.length().should.equal(2),t.at(0).should.be["instanceof"](i),t.at(0).get("id").should.equal(1),t.at(0).get("hello").should.equal("world"),t.at(1).should.be["instanceof"](i),t.at(1).get("id").should.equal(2),t.at(1).get("hello").should.equal("world2")}),it("Should properly merge items into a populated collection",function(){var t,o;return t=new e([{id:3,hello:"world3"},{id:4,hello:"world4"}]),t.fill([{id:1,hello:"world"},{id:2,hello:"world2"},{id:4,hello:"world5"}],{method:"merge"}),o=0,t.length().should.equal(4),t.at(o).should.be["instanceof"](i),t.at(o).get("id").should.equal(3),t.at(o).get("hello").should.equal("world3"),o++,t.at(o).should.be["instanceof"](i),t.at(o).get("id").should.equal(4),t.at(o).get("hello").should.equal("world5"),o++,t.at(o).should.be["instanceof"](i),t.at(o).get("id").should.equal(1),t.at(o).get("hello").should.equal("world"),o++,t.at(o).should.be["instanceof"](i),t.at(o).get("id").should.equal(2),t.at(o).get("hello").should.equal("world2"),o++}),it("Should properly merge items into a populated collection that has a specified comparator",function(){var t,o;return t=new e([{id:3,hello:"world3"},{id:4,hello:"world4"}]),t.comparator=function(e,t){var o,n;return o=parseInt(e.get("id")),n=parseInt(t.get("id")),o>n?-1:n>o?1:0},t.fill([{id:1,hello:"world"},{id:2,hello:"world2"},{id:4,hello:"world5"}],{method:"merge"}),o=0,t.length().should.equal(4),t.at(o).should.be["instanceof"](i),t.at(o).get("id").should.equal(4),t.at(o).get("hello").should.equal("world5"),o++,t.at(o).should.be["instanceof"](i),t.at(o).get("id").should.equal(3),t.at(o).get("hello").should.equal("world3"),o++,t.at(o).should.be["instanceof"](i),t.at(o).get("id").should.equal(2),t.at(o).get("hello").should.equal("world2"),o++,t.at(o).should.be["instanceof"](i),t.at(o).get("id").should.equal(1),t.at(o).get("hello").should.equal("world"),o++})}),describe("Test 'insert' option",function(){return it("Should properly add items into an empty collection",function(){var t;return t=new e,t.fill([{id:1,hello:"world"},{id:2,hello:"world2"}],{method:"insert",insert_index:2}),t.length().should.equal(2),t.at(0).should.be["instanceof"](i),t.at(0).get("id").should.equal(1),t.at(0).get("hello").should.equal("world"),t.at(1).should.be["instanceof"](i),t.at(1).get("id").should.equal(2),t.at(1).get("hello").should.equal("world2")}),it("Should properly insert items into a populated collection",function(){var t,o;return t=new e([{id:3,hello:"world3"},{id:4,hello:"world4"}]),t.fill([{id:1,hello:"world"},{id:2,hello:"world2"}],{method:"insert",insert_index:1}),o=0,t.length().should.equal(4),t.at(o).should.be["instanceof"](i),t.at(o).get("id").should.equal(3),t.at(o).get("hello").should.equal("world3"),o++,t.at(o).should.be["instanceof"](i),t.at(o).get("id").should.equal(1),t.at(o).get("hello").should.equal("world"),o++,t.at(o).should.be["instanceof"](i),t.at(o).get("id").should.equal(2),t.at(o).get("hello").should.equal("world2"),o++,t.at(o).should.be["instanceof"](i),t.at(o).get("id").should.equal(4),t.at(o).get("hello").should.equal("world4"),o++}),it("Should properly insert items into a populated collection at an invalid index",function(){var t,o;return t=new e([{id:3,hello:"world3"},{id:4,hello:"world4"}]),t.fill([{id:1,hello:"world"},{id:2,hello:"world2"}],{method:"insert",insert_index:5}),o=0,t.length().should.equal(4),t.at(o).should.be["instanceof"](i),t.at(o).get("id").should.equal(3),t.at(o).get("hello").should.equal("world3"),o++,t.at(o).should.be["instanceof"](i),t.at(o).get("id").should.equal(4),t.at(o).get("hello").should.equal("world4"),o++,t.at(o).should.be["instanceof"](i),t.at(o).get("id").should.equal(1),t.at(o).get("hello").should.equal("world"),o++,t.at(o).should.be["instanceof"](i),t.at(o).get("id").should.equal(2),t.at(o).get("hello").should.equal("world2"),o++}),it("Should properly insert items into the beginning of a populated collection",function(){var t,o;return t=new e([{id:3,hello:"world3"},{id:4,hello:"world4"}]),t.fill([{id:1,hello:"world"},{id:2,hello:"world2"}],{method:"insert",insert_index:0}),o=0,t.length().should.equal(4),t.at(o).should.be["instanceof"](i),t.at(o).get("id").should.equal(1),t.at(o).get("hello").should.equal("world"),o++,t.at(o).should.be["instanceof"](i),t.at(o).get("id").should.equal(2),t.at(o).get("hello").should.equal("world2"),o++,t.at(o).should.be["instanceof"](i),t.at(o).get("id").should.equal(3),t.at(o).get("hello").should.equal("world3"),o++,t.at(o).should.be["instanceof"](i),t.at(o).get("id").should.equal(4),t.at(o).get("hello").should.equal("world4"),o++})}),describe("Test invalid option",function(){return it("Should properly add items into an empty collection",function(){var t;return t=new e,t.fill([{id:1,hello:"world"},{id:2,hello:"world2"}],{method:"invalid"}),t.length().should.equal(2),t.at(0).should.be["instanceof"](i),t.at(0).get("id").should.equal(1),t.at(0).get("hello").should.equal("world"),t.at(1).should.be["instanceof"](i),t.at(1).get("id").should.equal(2),t.at(1).get("hello").should.equal("world2")}),it("Should properly replace items into a populated collection",function(){var t;return t=new e([{id:2,hello:"world3"}]),t.fill([{id:1,hello:"world"},{id:2,hello:"world2"}],{method:"invalid"}),t.length().should.equal(2),t.at(0).should.be["instanceof"](i),t.at(0).get("id").should.equal(1),t.at(0).get("hello").should.equal("world"),t.at(1).should.be["instanceof"](i),t.at(1).get("id").should.equal(2),t.at(1).get("hello").should.equal("world2")})}),describe("Test that parent is being set properly on children models",function(){return it("Should properly add items into an empty collection",function(){var t,o;return o=new u,t=new e(o),t.fill([{id:1,hello:"world"}]),t.length().should.equal(1),t.at(0).should.be["instanceof"](i),t.at(0).get("id").should.equal(1),t.at(0).get("hello").should.equal("world"),t.at(0).parent.should.equal(o)})})}),describe("Testing serialize method with proper options",function(){var t,o,l;return t=o=null,l=[{id:1,hello:"world",foo:"bar"},{id:2,hello:"world2",foo:"bar2"},{id:"a",hello:"worldA",foo:"barA"}],beforeEach(function(){return t=new e(l),o=new n(l)}),it("Should test basic form of serialize method",function(){var e;return e=t.serialize(),e.should.deep.equal(l)}),it("Should test specific fields for serialize method",function(){var e;return e=t.serialize(["foo"]),e.should.deep.equal([{foo:"bar"},{foo:"bar2"},{foo:"barA"}])}),it("Should test specific fields for serialize method, just id",function(){var e;return e=t.serialize("id"),e.should.deep.equal([{id:1},{id:2},{id:"a"}])}),it("Should test specific fields for serialize method, string value",function(){var e;return e=t.serialize("foo"),e.should.deep.equal([{foo:"bar"},{foo:"bar2"},{foo:"barA"}])})}),describe("Testing the makeUrl() method",function(){return it("Tests the basic makeUrl method",function(){var t;return t=new e,expect(t.makeUrl("GET")).to.equal("/model_a"),expect(t.makeUrl("POST")).to.equal("/model_a"),expect(t.makeUrl("PUT")).to.equal("/model_a"),expect(t.makeUrl("DELETE")).to.equal("/model_a")}),it("Tests the basic makeUrl method, base API url",function(){var t;return t=new e,Falcon.baseApiUrl="http://www.falconjs.com",expect(t.makeUrl("GET")).to.equal("http://www.falconjs.com/model_a"),expect(t.makeUrl("POST")).to.equal("http://www.falconjs.com/model_a"),expect(t.makeUrl("PUT")).to.equal("http://www.falconjs.com/model_a"),expect(t.makeUrl("DELETE")).to.equal("http://www.falconjs.com/model_a")}),it("Tests the basic makeUrl method, base API url ending with a '/'",function(){var t;return t=new e,Falcon.baseApiUrl="http://www.falconjs.com/",expect(t.makeUrl("GET")).to.equal("http://www.falconjs.com/model_a"),expect(t.makeUrl("POST")).to.equal("http://www.falconjs.com/model_a"),expect(t.makeUrl("PUT")).to.equal("http://www.falconjs.com/model_a"),expect(t.makeUrl("DELETE")).to.equal("http://www.falconjs.com/model_a")}),it("Tests the basic makeUrl method, with parent",function(){var t;return t=new e(new u({id:"1b"})),expect(t.makeUrl("GET")).to.equal("/model_b/1b/model_a"),expect(t.makeUrl("POST")).to.equal("/model_b/1b/model_a"),expect(t.makeUrl("PUT")).to.equal("/model_b/1b/model_a"),expect(t.makeUrl("DELETE")).to.equal("/model_b/1b/model_a")}),it("Tests the basic makeUrl method, base API url, with parent",function(){var t;return t=new e(new u({id:"2b"})),Falcon.baseApiUrl="http://www.falconjs.com",expect(t.makeUrl("GET")).to.equal("http://www.falconjs.com/model_b/2b/model_a"),expect(t.makeUrl("POST")).to.equal("http://www.falconjs.com/model_b/2b/model_a"),expect(t.makeUrl("PUT")).to.equal("http://www.falconjs.com/model_b/2b/model_a"),expect(t.makeUrl("DELETE")).to.equal("http://www.falconjs.com/model_b/2b/model_a")}),it("Tests the basic makeUrl method, base API url ending with a '/', with parent",function(){var t;return t=new e(new u({id:"3b"})),Falcon.baseApiUrl="http://www.falconjs.com/",expect(t.makeUrl("GET")).to.equal("http://www.falconjs.com/model_b/3b/model_a"),expect(t.makeUrl("POST")).to.equal("http://www.falconjs.com/model_b/3b/model_a"),expect(t.makeUrl("PUT")).to.equal("http://www.falconjs.com/model_b/3b/model_a"),expect(t.makeUrl("DELETE")).to.equal("http://www.falconjs.com/model_b/3b/model_a")}),it("Tests the basic makeUrl method, model url is a function",function(){var e;return e=new l,expect(e.makeUrl("GET")).to.equal("/model_d"),expect(e.makeUrl("POST")).to.equal("/model_d"),expect(e.makeUrl("PUT")).to.equal("/model_d"),expect(e.makeUrl("DELETE")).to.equal("/model_d")}),it("Tests the basic makeUrl method, model url is a function, base API url",function(){var e;return e=new l,Falcon.baseApiUrl="http://www.falconjs.com",expect(e.makeUrl("GET")).to.equal("http://www.falconjs.com/model_d"),expect(e.makeUrl("POST")).to.equal("http://www.falconjs.com/model_d"),expect(e.makeUrl("PUT")).to.equal("http://www.falconjs.com/model_d"),expect(e.makeUrl("DELETE")).to.equal("http://www.falconjs.com/model_d")}),it("Tests the basic makeUrl method, model url is a function, base API url ending with a '/'",function(){var e;return e=new l,Falcon.baseApiUrl="http://www.falconjs.com/",expect(e.makeUrl("GET")).to.equal("http://www.falconjs.com/model_d"),expect(e.makeUrl("POST")).to.equal("http://www.falconjs.com/model_d"),expect(e.makeUrl("PUT")).to.equal("http://www.falconjs.com/model_d"),expect(e.makeUrl("DELETE")).to.equal("http://www.falconjs.com/model_d")}),it("Tests the basic makeUrl method, model url is a function, with parent",function(){var e;return e=new l(new u({id:"1b"})),expect(e.makeUrl("GET")).to.equal("/model_b/1b/model_d"),expect(e.makeUrl("POST")).to.equal("/model_b/1b/model_d"),expect(e.makeUrl("PUT")).to.equal("/model_b/1b/model_d"),expect(e.makeUrl("DELETE")).to.equal("/model_b/1b/model_d")}),it("Tests the basic makeUrl method, model url is a function, with parent, base API url",function(){var e;return e=new l(new u({id:"2b"})),Falcon.baseApiUrl="http://www.falconjs.com",expect(e.makeUrl("GET")).to.equal("http://www.falconjs.com/model_b/2b/model_d"),expect(e.makeUrl("POST")).to.equal("http://www.falconjs.com/model_b/2b/model_d"),expect(e.makeUrl("PUT")).to.equal("http://www.falconjs.com/model_b/2b/model_d"),expect(e.makeUrl("DELETE")).to.equal("http://www.falconjs.com/model_b/2b/model_d")}),it("Tests the basic makeUrl method, model url is a function, with parent, base API url ending with a '/'",function(){var e;return e=new l(new u({id:"3b"})),Falcon.baseApiUrl="http://www.falconjs.com/",expect(e.makeUrl("GET")).to.equal("http://www.falconjs.com/model_b/3b/model_d"),expect(e.makeUrl("POST")).to.equal("http://www.falconjs.com/model_b/3b/model_d"),expect(e.makeUrl("PUT")).to.equal("http://www.falconjs.com/model_b/3b/model_d"),expect(e.makeUrl("DELETE")).to.equal("http://www.falconjs.com/model_b/3b/model_d")}),it("Tests the basic makeUrl method, defined url string",function(){var e;return e=new r,expect(e.makeUrl("GET")).to.equal("/collection_d2"),expect(e.makeUrl("POST")).to.equal("/collection_d2"),expect(e.makeUrl("PUT")).to.equal("/collection_d2"),expect(e.makeUrl("DELETE")).to.equal("/collection_d2")}),it("Tests the basic makeUrl method, defined url string, base API url",function(){var e;return e=new r,Falcon.baseApiUrl="http://www.falconjs.com",expect(e.makeUrl("GET")).to.equal("http://www.falconjs.com/collection_d2"),expect(e.makeUrl("POST")).to.equal("http://www.falconjs.com/collection_d2"),expect(e.makeUrl("PUT")).to.equal("http://www.falconjs.com/collection_d2"),expect(e.makeUrl("DELETE")).to.equal("http://www.falconjs.com/collection_d2")}),it("Tests the basic makeUrl method, defined url string, base API url ending with a '/'",function(){var e;return e=new r,Falcon.baseApiUrl="http://www.falconjs.com/",expect(e.makeUrl("GET")).to.equal("http://www.falconjs.com/collection_d2"),expect(e.makeUrl("POST")).to.equal("http://www.falconjs.com/collection_d2"),expect(e.makeUrl("PUT")).to.equal("http://www.falconjs.com/collection_d2"),expect(e.makeUrl("DELETE")).to.equal("http://www.falconjs.com/collection_d2")}),it("Tests the basic makeUrl method, defined url string, with parent",function(){var e;return e=new r(new u({id:"1b"})),expect(e.makeUrl("GET")).to.equal("/model_b/1b/collection_d2"),expect(e.makeUrl("POST")).to.equal("/model_b/1b/collection_d2"),expect(e.makeUrl("PUT")).to.equal("/model_b/1b/collection_d2"),expect(e.makeUrl("DELETE")).to.equal("/model_b/1b/collection_d2")}),it("Tests the basic makeUrl method, defined url string, with parent, base API url",function(){var e;return e=new r(new u({id:"2b"})),Falcon.baseApiUrl="http://www.falconjs.com",expect(e.makeUrl("GET")).to.equal("http://www.falconjs.com/model_b/2b/collection_d2"),expect(e.makeUrl("POST")).to.equal("http://www.falconjs.com/model_b/2b/collection_d2"),expect(e.makeUrl("PUT")).to.equal("http://www.falconjs.com/model_b/2b/collection_d2"),expect(e.makeUrl("DELETE")).to.equal("http://www.falconjs.com/model_b/2b/collection_d2")}),it("Tests the basic makeUrl method, defined url string, with parent, base API url ending with a '/'",function(){var e;return e=new r(new u({id:"3b"})),Falcon.baseApiUrl="http://www.falconjs.com/",expect(e.makeUrl("GET")).to.equal("http://www.falconjs.com/model_b/3b/collection_d2"),expect(e.makeUrl("POST")).to.equal("http://www.falconjs.com/model_b/3b/collection_d2"),expect(e.makeUrl("PUT")).to.equal("http://www.falconjs.com/model_b/3b/collection_d2"),expect(e.makeUrl("DELETE")).to.equal("http://www.falconjs.com/model_b/3b/collection_d2")}),it("Tests the basic makeUrl method, defined url function",function(){var e;return e=new a,expect(e.makeUrl("GET")).to.equal("/collection_d3"),expect(e.makeUrl("POST")).to.equal("/collection_d3"),expect(e.makeUrl("PUT")).to.equal("/collection_d3"),expect(e.makeUrl("DELETE")).to.equal("/collection_d3")}),it("Tests the basic makeUrl method, defined url function, base API url",function(){var e;return e=new a,Falcon.baseApiUrl="http://www.falconjs.com",expect(e.makeUrl("GET")).to.equal("http://www.falconjs.com/collection_d3"),expect(e.makeUrl("POST")).to.equal("http://www.falconjs.com/collection_d3"),expect(e.makeUrl("PUT")).to.equal("http://www.falconjs.com/collection_d3"),expect(e.makeUrl("DELETE")).to.equal("http://www.falconjs.com/collection_d3")}),it("Tests the basic makeUrl method, defined url function, base API url ending with a '/'",function(){var e;return e=new a,Falcon.baseApiUrl="http://www.falconjs.com/",expect(e.makeUrl("GET")).to.equal("http://www.falconjs.com/collection_d3"),expect(e.makeUrl("POST")).to.equal("http://www.falconjs.com/collection_d3"),expect(e.makeUrl("PUT")).to.equal("http://www.falconjs.com/collection_d3"),expect(e.makeUrl("DELETE")).to.equal("http://www.falconjs.com/collection_d3")}),it("Tests the basic makeUrl method, defined url function, with parent",function(){var e;return e=new a(new u({id:"1b"})),expect(e.makeUrl("GET")).to.equal("/model_b/1b/collection_d3"),expect(e.makeUrl("POST")).to.equal("/model_b/1b/collection_d3"),expect(e.makeUrl("PUT")).to.equal("/model_b/1b/collection_d3"),expect(e.makeUrl("DELETE")).to.equal("/model_b/1b/collection_d3")}),it("Tests the basic makeUrl method, defined url function, with parent, base API url",function(){var e;return e=new a(new u({id:"2b"})),Falcon.baseApiUrl="http://www.falconjs.com",expect(e.makeUrl("GET")).to.equal("http://www.falconjs.com/model_b/2b/collection_d3"),expect(e.makeUrl("POST")).to.equal("http://www.falconjs.com/model_b/2b/collection_d3"),expect(e.makeUrl("PUT")).to.equal("http://www.falconjs.com/model_b/2b/collection_d3"),expect(e.makeUrl("DELETE")).to.equal("http://www.falconjs.com/model_b/2b/collection_d3")}),it("Tests the basic makeUrl method, defined url function, with parent, base API url ending with a '/'",function(){var e;return e=new a(new u({id:"3b"})),Falcon.baseApiUrl="http://www.falconjs.com/",expect(e.makeUrl("GET")).to.equal("http://www.falconjs.com/model_b/3b/collection_d3"),expect(e.makeUrl("POST")).to.equal("http://www.falconjs.com/model_b/3b/collection_d3"),expect(e.makeUrl("PUT")).to.equal("http://www.falconjs.com/model_b/3b/collection_d3"),expect(e.makeUrl("DELETE")).to.equal("http://www.falconjs.com/model_b/3b/collection_d3")}),it("Should be able to make a url with just a / baseApiUrl",function(){var e,o,n,l,r;return o=function(e){function o(){return l=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.url="my_models",o}(Falcon.Model),e=function(e){function n(){return r=n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.model=o,n}(Falcon.Collection),Falcon.baseApiUrl="/",n=new e,expect(n.makeUrl("GET")).to.equal("/my_models")})}),describe("Tesing collection sync methods",function(){var t;return t=null,beforeEach(function(){return t=new e}),describe("Testing 'fetch' alias",function(){return it("Should pass the correct options into sync on fetch",function(){var e;return e=sinon.stub(t,"sync"),t.fetch({hello:"world"}),e.should.have.been.calledOnce,e.should.have.been.calledOn(t),e.should.have.been.calledWith("GET",{hello:"world"})})}),describe("Testing sync method $.ajax calls",function(){var e;return e=null,beforeEach(function(){return e=sinon.stub(jQuery,"ajax"),Falcon.cache=!1}),afterEach(function(){return e.restore()}),it("Should fetch properly without options",function(){return t.fetch(),e.should.have.been.calledOnce,e.should.have.been.calledWithMatch({type:"GET"}),e.should.have.been.calledWithMatch({url:t.makeUrl("GET")}),e.should.have.been.calledWithMatch({data:""}),e.should.have.been.calledWithMatch({contentType:"application/json"}),e.should.have.been.calledWithMatch({cache:!1}),e.should.have.been.calledWithMatch({headers:{}}),expect(e.firstCall.args[0].success).to.be.a("function"),expect(e.firstCall.args[0].success).to.have.length(3),expect(e.firstCall.args[0].error).to.be.a("function"),expect(e.firstCall.args[0].error).to.have.length(1),expect(e.firstCall.args[0].complete).to.be.a("function"),expect(e.firstCall.args[0].complete).to.have.length(2)}),it("Should fetch properly with options",function(){var o,n,l;return Falcon.cache=!0,t.fetch({url:"http://www.falconjs.com",data:{hello:"world"},contentType:"text/html",headers:{"User-Agent":"User-Agent",Chrome:"Chrome"},success:l=function(){},error:n=function(){},complete:o=function(){}}),e.should.have.been.calledOnce,e.should.have.been.calledWithMatch({type:"GET"}),e.should.have.been.calledWithMatch({url:"http://www.falconjs.com"}),e.should.have.been.calledWithMatch({data:JSON.stringify({hello:"world"})}),e.should.have.been.calledWithMatch({contentType:"text/html"}),e.should.have.been.calledWithMatch({cache:!0}),e.should.have.been.calledWithMatch({headers:{"User-Agent":"User-Agent",Chrome:"Chrome"}}),expect(e.firstCall.args[0].success).to.be.a("function"),expect(e.firstCall.args[0].success).to.have.length(3),expect(e.firstCall.args[0].success).to.not.equal(l),expect(e.firstCall.args[0].error).to.be.a("function"),expect(e.firstCall.args[0].error).to.have.length(1),expect(e.firstCall.args[0].error).to.not.equal(n),expect(e.firstCall.args[0].complete).to.be.a("function"),expect(e.firstCall.args[0].complete).to.have.length(2),expect(e.firstCall.args[0].complete).to.not.equal(o)})}),describe("Testing sync method XHR responses",function(){var o,n,l,r,a,c,i,u,s,p,d,h,f,b;return h=null,t=null,p=null,u=null,i=null,n=null,d=null,r=null,b=null,c=null,o=null,l=null,a=null,f=null,s=null,beforeEach(function(){return h=sinon.fakeServer.create(),t=new e,l={list:[{foo:"bar",id:1},{foo:"bar2",id:2}]},a={error:"Something Wrong"},f=[{foo:"bar",id:1},{foo:"bar2",id:2}],p=sinon.stub(t,"parse").returns(f),u=sinon.stub(t,"fill"),t.on("fetch",i=sinon.spy()),s={success:b=sinon.spy(),error:c=sinon.spy(),complete:o=sinon.spy()}}),afterEach(function(){return h.restore()}),it("Should call the proper success method",function(){return t.fetch(s),h.respondWith([200,{},JSON.stringify(l)]),h.respond(),p.callCount.should.equal(1),p.firstCall.args[0].should.deep.equal(l),u.callCount.should.equal(1),u.firstCall.args[0].should.deep.equal(f),u.should.have.been.calledAfter(p),i.should.have.been.calledOnce,i.should.have.been.calledAfter(u),b.callCount.should.equal(1),b.should.have.been.calledOn(t),b.firstCall.args.length.should.equal(4),b.firstCall.args[0].should.equal(t),c.should.not.have.been.called,o.callCount.should.equal(1),o.should.have.been.calledOn(t),o.firstCall.args.length.should.equal(3),o.firstCall.args[0].should.equal(t),o.should.have.been.calledAfter(b)}),it("Should not fill when fill option is false on fetch",function(){return s.fill=!1,t.fetch(s),h.respondWith([200,{},JSON.stringify(l)]),h.respond(),p.callCount.should.equal(1),p.firstCall.args[0].should.deep.equal(l),u.callCount.should.equal(0),i.should.have.been.calledOnce,i.should.have.been.calledAfter(p),b.callCount.should.equal(1),b.should.have.been.calledOn(t),b.firstCall.args.length.should.equal(4),b.firstCall.args[0].should.equal(t),c.should.not.have.been.called,o.callCount.should.equal(1),o.should.have.been.calledOn(t),o.firstCall.args.length.should.equal(3),o.firstCall.args[0].should.equal(t),o.should.have.been.calledAfter(b)}),it("Should call the error response on an errornous result",function(){return t.fetch(s),h.respondWith([400,{},JSON.stringify(a)]),h.respond(),p.callCount.should.equal(0),u.callCount.should.equal(0),i.should.not.have.been.called,b.callCount.should.equal(0),c.callCount.should.equal(1),c.firstCall.args.length.should.equal(3),c.should.have.been.calledOn(t),o.firstCall.args[0].should.equal(t),o.callCount.should.equal(1),o.should.have.been.calledOn(t),o.firstCall.args.length.should.equal(3),o.firstCall.args[0].should.equal(t),o.should.have.been.calledAfter(c)})}),describe("Testing sync method options in depth",function(){var e;return e=null,beforeEach(function(){return e=sinon.stub(jQuery,"ajax"),Falcon.cache=!1}),afterEach(function(){return e.restore()}),it("Should fetch properly without options",function(){return t.sync("GET"),e.should.have.been.calledOnce,e.should.have.been.calledWithMatch({type:"GET"}),e.should.have.been.calledWithMatch({url:t.makeUrl("GET")}),e.should.have.been.calledWithMatch({data:""}),e.should.have.been.calledWithMatch({contentType:"application/json"}),e.should.have.been.calledWithMatch({cache:!1}),e.should.have.been.calledWithMatch({headers:{}}),expect(e.firstCall.args[0].success).to.be.a("function"),expect(e.firstCall.args[0].success).to.have.length(3),expect(e.firstCall.args[0].error).to.be.a("function"),expect(e.firstCall.args[0].error).to.have.length(1),expect(e.firstCall.args[0].complete).to.be.a("function"),expect(e.firstCall.args[0].complete).to.have.length(2)}),it("Should allow for a specified parent to override",function(){var o;return t.parent=new u({id:"b"}),t.sync("GET",{parent:o=new u({id:"b2"})}),e.should.have.been.calledWithMatch({url:t.makeUrl("GET",o)})}),it("Should allow for a specified parent to override",function(){return t.parent=new u({id:"b"}),t.sync("GET",{parent:null}),e.should.have.been.calledWithMatch({url:t.makeUrl("GET",null)})
})}),describe("Additional miscellaneous sync tests",function(){var n;return n=null,beforeEach(function(){return n=sinon.fakeServer.create(),Falcon.cache=!1}),afterEach(function(){return n.restore()}),it("Should allow for a third parameter to define the context",function(){var l,r;return l=new o,t=new e,t.sync("GET",r=sinon.spy(),l),n.respondWith([200,{},JSON.stringify(t.serialize())]),n.respond(),expect(r).to.have.been.called,expect(r).to.have.been.calledOn(l)}),it("Should pass context from fetch to sync",function(){var n,l,r;return n=new o,t=new e,r=sinon.stub(t,"sync"),t.fetch(l=sinon.spy(),n),expect(r).to.have.been.called,expect(r.firstCall.args[1]).to.equal(l),expect(r.firstCall.args[2]).to.equal(n)})})}),describe("Testing the remove method",function(){var t,o,n,l,r,a;return t=null,a=null,o=null,n=null,l=null,r=null,beforeEach(function(){return a=[o=new i({id:1}),n=new i({id:2}),l=new i({id:3}),r=new i({id:4})],t=new e(a)}),it("Should be able to remove a single item",function(){return expect(t.length()).to.equal(4),t.remove(n),expect(t.length()).to.equal(3),expect(t.at(0)).to.equal(o),expect(t.at(1)).to.equal(l),expect(t.at(2)).to.equal(r)}),it("Should be able to remove multiple items",function(){return expect(t.length()).to.equal(4),t.remove([n,l]),expect(t.length()).to.equal(2),expect(t.at(0)).to.equal(o),expect(t.at(1)).to.equal(r)}),it("Should be able to remove items with a function",function(){return expect(t.length()).to.equal(4),t.remove(function(e){return 0===e.get("id")%2}),expect(t.length()).to.equal(2),expect(t.at(0)).to.equal(o),expect(t.at(1)).to.equal(l)}),it("Should be able to remove a different model but with the same id",function(){return expect(t.length()).to.equal(4),t.remove(new i({id:3})),expect(t.at(0)).to.equal(o),expect(t.at(1)).to.equal(n),expect(t.at(2)).to.equal(r)}),it("Should be able to remove models who don't have an id, properly",function(){return t=new e,t.append([{text:"1"},{text:"2"},{text:"3"}]),expect(t.length()).to.equal(3),o=t.first(),t.remove(o),expect(t.length()).to.equal(2)})}),describe("Test the append and prepend methods",function(){var t,o;return t=null,o=null,beforeEach(function(){return t=new e,o=sinon.stub(t,"fill")}),afterEach(function(){return o.restore()}),it("Should call the proper fill method when appending",function(){var e;return t.append(e={hello:"world"}),o.should.have.been.calledOnce,o.should.have.been.deep.calledWith(e,{method:"append"})}),it("Should call the proper fill method when prepending",function(){var e;return t.prepend(e={hello:"world"}),o.should.have.been.calledOnce,o.should.have.been.deep.calledWith(e,{method:"prepend"})})}),describe("Test the insert method",function(){var t,o;return t=null,o=null,beforeEach(function(){return t=new e([{id:1,hello:"foo"},{id:4,hello:"bar"}]),o=sinon.stub(t,"fill")}),it("Should call the proper fill method when inserting without a specific model",function(){var e;return t.insert(e={hello:"world"}),o.should.have.been.calledOnce,o.should.have.been.deep.calledWith(e,{method:"append"})}),it("Should call the proper fill method when inserting with a valid model",function(){var e;return t.insert(e={hello:"world"},4),o.should.have.been.calledOnce,o.should.have.been.deep.calledWith(e,{method:"insert",insert_index:1})}),it("Should call the proper fill method when appending with an invalid model",function(){var e;return t.insert(e={hello:"world"},33),o.should.have.been.calledOnce,o.should.have.been.deep.calledWith(e,{method:"insert",insert_index:-1})}),it("Should call the proper fill method when inserting with an iterator",function(){var e;return t.insert(e={hello:"world"},function(e){return 1===e.get("id")}),o.should.have.been.calledOnce,o.should.have.been.deep.calledWith(e,{method:"insert",insert_index:0})})}),describe("Test the unshift and push methods",function(){var t,o,n;return o=null,n=t=null,beforeEach(function(){return o=new e([{id:1},{id:2}]),t=sinon.stub(o,"append"),n=sinon.stub(o,"prepend")}),afterEach(function(){return t.restore(),n.restore()}),it("Should have unshift be an alias of prepend",function(){return o.length().should.equal(2),o.unshift({id:3}),t.should.not.have.been.called,n.should.have.been.calledOnce,n.should.have.been.deep.calledWith({id:3})}),it("Should have push be an alias of append",function(){return o.length().should.equal(2),o.push({id:3}),n.should.not.have.been.called,t.should.have.been.calledOnce,t.should.have.been.deep.calledWith({id:3})})}),describe("Test the shift and pop methods",function(){var t,o,n,l;return t=null,o=n=l=null,beforeEach(function(){return o=new i({id:1}),n=new i({id:2}),l=new i({id:3}),t=new e([o,n,l])}),it("Should shift the first element off the front",function(){var e;return e=t.shift(),expect(e).to.equal(o),expect(t.length()).to.equal(2)}),it("Should shift the first element off the front",function(){var e;return e=t.pop(),expect(e).to.equal(l),expect(t.length()).to.equal(2)})}),describe("Test the sort method",function(){var t,o,n,l;return t=null,o=n=l=null,it("Should sort properly",function(){return o=new i({id:1}),n=new i({id:2}),l=new i({id:3}),t=new e([n,o,l]),expect(t.models()).to.deep.equal([n,o,l]),t.sort(function(e,t){var o,n;return o=e.get("id"),n=t.get("id"),o>n?1:n>o?-1:0}),expect(t.models()).to.deep.equal([o,n,l])})}),describe("Test the create method",function(){var t,n,l,r,a,c,s;return t=null,r=null,l=null,a=null,c=null,n=null,s=null,beforeEach(function(){return c=sinon.fakeServer.create(),n={id:2},r=new u({id:"b"}),t=new e([{id:1}],r),l=new i(n,t.parent),a={success:s=sinon.spy()}}),afterEach(function(){return c.restore()}),it("Should attempt to initialize and create a new model",function(){var e,l,r;return e=new o,r=sinon.stub(i.prototype,"initialize"),l=sinon.stub(i.prototype,"create"),expect(r).to.not.have.been.called,expect(l).to.not.have.been.called,t.create(n={id:2},a,e),expect(r).to.have.been.calledOnce,expect(r).to.have.been.calledWith(n),expect(l).to.have.been.calledOnce,expect(l).to.have.been.calledAfter(r),expect(l.firstCall.args.length).to.equal(2),expect(l.firstCall.args[0]).to.equal(a),expect(l.firstCall.args[0].success).to.be.a("function"),expect(l.firstCall.args[0].method).to.equal("append"),expect(l.firstCall.args[1]).to.equal(e),r.restore(),l.restore()}),it("Should respond correctly from the server",function(){var e,o;return e=sinon.stub(t,"fill").returns([]),t.create(n,a),expect(t.length()).to.equal(1),c.respondWith([200,{},JSON.stringify(n)]),c.respond(),e.should.have.been.calledOnce,expect(e.firstCall.args.length).to.equal(2),expect(e.firstCall.args[0]).to.be["instanceof"](Falcon.Model),expect(e.firstCall.args[1]).to.equal(a),o=e.firstCall.args[0],expect(s.callCount).to.equal(1),expect(s).to.have.been.calledAfter(e),expect(s).to.have.been.calledOn(o),expect(s.firstCall.args[0]).to.equal(o),e.restore()})}),describe("Test the detroy method",function(){var t,n,l,r,a,c;return t=n=null,l=r=null,a=null,c=null,beforeEach(function(){return l=new i({id:1}),r=new i({id:2}),t=new e([l,r]),n=new o,a={success:c=sinon.spy()}}),it("Should call the destroy method on the model",function(){var e;return e=sinon.stub(l,"destroy"),e.should.not.have.been.called,t.destroy(l,a,n),e.should.have.been.calledOnce,e.should.have.been.calledWith(a,n),e.restore()}),it("Should respond correctly from the server",function(){var e,o,n;return n=sinon.fakeServer.create(),e=sinon.stub(t,"remove"),t.destroy(l,a),n.respondWith([200,{},JSON.stringify({})]),n.respond(),e.should.have.been.calledOnce,expect(e.firstCall.args.length).to.equal(1),expect(e.firstCall.args[0]).to.be["instanceof"](Falcon.Model),o=e.firstCall.args[0],expect(c.callCount).to.equal(1),expect(c).to.have.been.calledAfter(e),expect(c).to.have.been.calledOn(o),expect(c.firstCall.args[0]).to.equal(o),e.restore(),n.restore()}),it("Should destroy using the overriden parent",function(){var t,o,n,a,c;return a=new u({id:"b"}),n=new e([l,r],a),c=sinon.fakeServer.create(),o=sinon.spy($,"ajax"),n.destroy(l,{parent:null}),c.respondWith([200,{},JSON.stringify({})]),c.respond(),o.restore(),c.restore(),expect(o).to.have.been.called,expect(o.callCount).to.equal(1),t=o.firstCall.args[0],expect(t.type).to.equal("DELETE"),expect(t.url).to.equal(l.makeUrl("DELETE",null))})}),describe("Test the at() method",function(){var t,o,n,l;return t=null,o=n=l=null,beforeEach(function(){return o=new i({id:1}),n=new i({id:2}),l=new i({id:3}),t=new e([o,n,l])}),it("Should be able to find the correct element at an index",function(){return expect(t.at(0)).to.equal(o),expect(t.at(1)).to.equal(n),expect(t.at(2)).to.equal(l)}),it("Should return null for invalid indices",function(){return expect(t.at(-1)).to.equal(null),expect(t.at(3)).to.equal(null),expect(t.at("HELLO")).to.equal(null)})}),describe("Test the indexOf() method",function(){var t,o,n,l,r;return t=null,o=n=l=r=null,beforeEach(function(){return o=new i({id:1}),n=new i({id:3}),l=new i({id:5}),r=new i({id:8}),t=new e([o,n,l,r,l])}),it("Should find the correct index by model",function(){return expect(t.indexOf(l)).to.equal(2)}),it("Should find no match index by model",function(){return expect(t.indexOf(new i)).to.equal(-1)}),it("Should find the correct match index by id",function(){return expect(t.indexOf(3)).to.equal(1)}),it("Should find the correct match index by truth test method",function(){var e;return e=t.indexOf(function(e){return e.get("id")>4}),expect(e).to.equal(2)}),it("Should find the no match index by truth test method",function(){var e;return e=t.indexOf(function(e){return e.get("id")>8}),expect(e).to.equal(-1)})}),describe("Test the lastIndexOf() method",function(){var t,o,n,l,r;return t=null,o=n=l=r=null,beforeEach(function(){return o=new i({id:1}),n=new i({id:3}),l=new i({id:5}),r=new i({id:8}),t=new e([o,n,l,r,n,l])}),it("Should find the correct index by model",function(){return expect(t.lastIndexOf(l)).to.equal(5)}),it("Should find no match index by model",function(){return expect(t.lastIndexOf(new i)).to.equal(-1)}),it("Should find the correct match index by id",function(){return expect(t.lastIndexOf(3)).to.equal(4)}),it("Should find the correct match index by truth test method",function(){var e;return e=t.lastIndexOf(function(e){return e.get("id")>4}),expect(e).to.equal(5)}),it("Should find the no match index by truth test method",function(){var e;return e=t.lastIndexOf(function(e){return e.get("id")>8}),expect(e).to.equal(-1)})}),describe("Test the each() method",function(){var t,o,n,l;return t=null,o=n=l=null,beforeEach(function(){return o=new i({id:1}),n=new i({id:2}),l=new i({id:3}),t=new e([o,n,l])}),it("Should call the iterator with one argument",function(){var e;return e=sinon.spy(),t.each(function(t){return e.call(this,t)}),expect(e.callCount).to.equal(3),expect(e.firstCall).to.be.calledWith(o),expect(e.secondCall).to.be.calledWith(n),expect(e.thirdCall).to.be.calledWith(l),expect(e).to.have.always.been.calledOn(t)}),it("Should call the iterator with two arguments",function(){var e;return e=sinon.spy(),t.each(function(t,o){return e.call(this,t,o)}),expect(e.callCount).to.equal(3),expect(e.firstCall).to.be.calledWith(0,o),expect(e.secondCall).to.be.calledWith(1,n),expect(e.thirdCall).to.be.calledWith(2,l),expect(e).to.have.always.been.calledOn(t)}),it("Should call the iterator with a specific context and one argument",function(){var e,r,a;return a=sinon.spy(),e={},r=function(e){return a.call(this,e)},t.each(r,e),expect(a.callCount).to.equal(3),expect(a.firstCall).to.be.calledWith(o),expect(a.secondCall).to.be.calledWith(n),expect(a.thirdCall).to.be.calledWith(l),expect(a).to.have.always.been.calledOn(e)}),it("Should call the iterator with a specific context and two arguments",function(){var e,r,a;return a=sinon.spy(),e={},r=function(e,t){return a.call(this,e,t)},t.each(r,e),expect(a.callCount).to.equal(3),expect(a.firstCall).to.be.calledWith(0,o),expect(a.secondCall).to.be.calledWith(1,n),expect(a.thirdCall).to.be.calledWith(2,l),expect(a).to.have.always.been.calledOn(e)})}),describe("Test the first() method",function(){var t,o,n,l,r;return t=null,o=n=l=r=null,beforeEach(function(){return o=new i({id:1}),n=new i({id:2}),r=new i({id:"b"}),l=new i({id:3}),t=new e([o,n,r,l])}),it("Should get the first element",function(){var e;return e=t.first(),expect(e).to.equal(o)}),it("Should get the first matcing mdel based on function iterator",function(){var e;return e=t.first(function(e){return e===n}),expect(e).to.equal(n)}),it("Should get the first matching model based on a model",function(){var e;return e=t.first(r),expect(e).to.equal(r)}),it("Should get the first matching model based on an id",function(){var e;return e=t.first(2),expect(e).to.equal(n),e=t.first("b"),expect(e).to.equal(r)}),it("Should return the null if nothing passes the iterator",function(){var e;return e=t.first(function(){return!1}),expect(e).to.equal(null)})}),describe("Test the last() method",function(){var t,o,n,l,r;return t=null,o=n=l=r=null,beforeEach(function(){return o=new i({id:1}),n=new i({id:2}),r=new i({id:"b"}),l=new i({id:3}),t=new e([o,n,r,l])}),it("Should get the last element",function(){var e;return e=t.last(),expect(e).to.equal(l)}),it("Should get the last matcing mdel based on function iterator",function(){var e;return e=t.last(function(e){return e===n}),expect(e).to.equal(n)}),it("Should get the last matching model based on a model",function(){var e;return e=t.last(r),expect(e).to.equal(r)}),it("Should get the last matching model based on an id",function(){var e;return e=t.last(2),expect(e).to.equal(n),e=t.last("b"),expect(e).to.equal(r)}),it("Should return the null if nothing passes the iterator",function(){var e;return e=t.last(function(){return!1}),expect(e).to.equal(null)})}),describe("Test the filter() method",function(){var t,o,n,l,r,a,c;return o=new i({id:1}),n=new i({id:2}),r=new i({id:"b"}),a=new i({id:"b"}),l=new i({id:3}),c=[o,n,r,r,a,l],t=new e(c),it("Should return the all of the models",function(){var e;return e=t.filter(),expect(e.length).to.equal(6),expect(e).to.deep.equal(c)}),it("Should return a limited set of models by function",function(){var e;return e=t.filter(function(e){return e===o||e===r}),expect(e.length).to.equal(3),expect(e).to.deep.equal([o,r,r])}),it("Should return a limited set of models by model",function(){var e;return e=t.filter(n),expect(e.length).to.equal(1),expect(e).to.deep.equal([n])}),it("Should return a limited set of models by id",function(){var e;return e=t.filter(3),expect(e.length).to.equal(1),expect(e).to.deep.equal([l]),e=t.filter("b"),expect(e.length).to.equal(3),expect(e).to.deep.equal([r,r,a])}),it("Should return an empty set of models",function(){var e;return e=t.filter(function(){return!1}),expect(e.length).to.equal(0),expect(e).to.deep.equal([])})}),describe("Test the any() method",function(){var t,o,n,l,r,a,c,u;return o=new i({id:1}),n=new i({id:2}),a=new i({id:"b"}),c=new i({id:"b"}),l=new i({id:3}),r=new i({id:4}),u=[o,n,a,a,c,l],t=new e(u),it("Should match true based on function",function(){var e;return e=t.any(function(e){return e===o||e===a}),expect(e).to.be["true"],e=t.any(function(e){return e===r}),expect(e).to.be["false"]}),it("Should match true based on model",function(){var e;return e=t.any(n),expect(e).to.be["true"],e=t.any(r),expect(e).to.be["false"]}),it("Should match correctly based on id",function(){var e;return e=t.any(3),expect(e).to.be["true"],e=t.any("b"),expect(e).to.be["true"],e=t.any(4),expect(e).to.be["false"],e=t.any("c"),expect(e).to.be["false"]}),it("Should not match true based on empty iterator",function(){var e;return e=t.any(),expect(e).to.be["false"]})}),describe("Test the without() method",function(){var t,o,n,l,r,a,c;return o=new i({id:1}),n=new i({id:2}),r=new i({id:"b"}),a=new i({id:"b"}),l=new i({id:3}),c=[o,n,r,r,a,l],t=new e(c),it("Should return the full set of the models when called without an iterator",function(){var e;return e=t.without(),expect(e.length).to.equal(6),expect(e).to.deep.equal(c)}),it("Should return a limited set of models by function",function(){var e;return e=t.without(function(e){return e===o||e===r}),expect(e.length).to.equal(3),expect(e).to.deep.equal([n,a,l])}),it("Should return a limited set of models by model",function(){var e;return e=t.without(n),expect(e.length).to.equal(5),expect(e).to.deep.equal([o,r,r,a,l])}),it("Should return a limited set of models by id",function(){var e;return e=t.without(3),expect(e.length).to.equal(5),expect(e).to.deep.equal([o,n,r,r,a]),e=t.without("b"),expect(e.length).to.equal(3),expect(e).to.deep.equal([o,n,l])})}),describe("Test the without() method",function(){var e,t,o,n,l;return t=new d({title:"e1"}),o=new d({title:"e2"}),n=new d({title:"e3"}),l=[t,o,n],e=new c(l),it("Should pluck the title and unwrap the observables",function(){var t;return t=e.pluck("title"),expect(t.length).to.equal(3),expect(t).to.deep.equal(["e1","e2","e3"])}),it("Should pluck the title and shouldn't unwrap the observables",function(){var t;return t=e.pluck("title",!1),expect(t.length).to.equal(3),expect(t).to.not.deep.equal(["e1","e2","e3"])}),it("Should pluck the an invalid attribute",function(){var t;return t=e.pluck("title2"),expect(t.length).to.equal(3),expect(t).to.deep.equal([void 0,void 0,void 0])})}),describe("Test the slice() method",function(){var e,t,o,n,l;return t=new d({title:"e1"}),o=new d({title:"e2"}),n=new d({title:"e3"}),l=[t,o,n],e=new c(l),it("Should slice properly",function(){return expect(e.slice(0,3)).to.deep.equal(l),expect(e.slice(0,1)).to.deep.equal([t]),expect(e.slice(1,3)).to.deep.equal([o,n]),expect(e.slice(-1)).to.deep.equal([n])})}),describe("Testing the mixin() method",function(){return it("Should implement mixins properly",function(){var t,n,l,r;return r=new u,l=new i,l.bees=new o([r]),t=new e([l]),expect(l.hello).to.be.undefined,expect(l.foo).to.be.undefined,expect(r.test).to.be.undefined,t.mixin({hello:n=sinon.spy(),foo:ko.observable("bar"),bees:{test:"123"}}),expect(l.hello).not.to.be.undefined,expect(l.hello).to.be.a("function"),expect(ko.isObservable(l.foo)).to.be["true"],expect(l.foo()).to.equal("bar"),expect(r.test).not.to.be.undefined,expect(r.test).to.equal("123"),l.hello("world"),n.should.have.been.calledOnce,n.should.have.been.calledOn(l),n.firstCall.args[0].should.equal(l),n.firstCall.args[1].should.equal(t),n.firstCall.args[2].should.equal("world")}),it("Should allow for models with values to be added post mixin",function(){var e,o,n,l,r,a;return o=function(e){function o(){return r=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.defaults={hello:"world"},o}(Falcon.Model),e=function(e){function n(){return a=n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.model=o,n}(Falcon.Collection),n=new e,n.mixin({hello:ko.observable()}),l=new o,expect(l.get("hello")).to.equal("world"),n.append(l),expect(l.get("hello")).to.equal("world")})}),describe("Test the clone() method",function(){var t,o,n,l;return t=null,o=n=l=null,beforeEach(function(){return o=new i({id:1,title:"Hello World",extra:"things"}),n=new i({id:2,title:"Foo Bar",extra:"things2"}),t=new e([o,n],new u)}),it("Should do a basic clone properly",function(){var e;return e=t.clone(),expect(e).to.not.equal(t),expect(e.parent).to.equal(t.parent),expect(e.length()).to.equal(2),expect(e.at(0)).to.not.equal(o),expect(e.at(0).get("id")).to.equal(1),expect(e.at(0).get("title")).to.be.equal("Hello World"),expect(e.at(0).get("extra")).to.be.equal("things"),expect(e.at(1)).to.not.equal(n),expect(e.at(1).get("id")).to.equal(2),expect(e.at(1).get("title")).to.be.equal("Foo Bar"),expect(e.at(1).get("extra")).to.be.equal("things2")}),it("Should do a basic clone properly with extra fields",function(){var e;return e=t.clone(["id","title"]),expect(e).to.not.equal(t),expect(e.parent).to.equal(t.parent),expect(e.length()).to.equal(2),expect(e.at(0)).to.not.equal(o),expect(e.at(0).get("id")).to.equal(1),expect(e.at(0).get("title")).to.be.equal("Hello World"),expect(e.at(0).get("extra")).to.be.undefined,expect(e.at(1)).to.not.equal(n),expect(e.at(1).get("id")).to.equal(2),expect(e.at(1).get("title")).to.be.equal("Foo Bar"),expect(e.at(1).get("extra")).to.be.undefined}),it("Should do a basic clone properly without a parent",function(){var e;return e=t.clone(null),expect(e).to.not.equal(t),expect(e.parent).to.equal(null),expect(e.length()).to.equal(2),expect(e.at(0)).to.not.equal(o),expect(e.at(0).get("id")).to.equal(1),expect(e.at(0).get("title")).to.be.equal("Hello World"),expect(e.at(0).get("extra")).to.be.equal("things"),expect(e.at(1)).to.not.equal(n),expect(e.at(1).get("id")).to.equal(2),expect(e.at(1).get("title")).to.be.equal("Foo Bar"),expect(e.at(1).get("extra")).to.be.equal("things2")}),it("Should do a basic clone properly with extra fields without a parent",function(){var e;return e=t.clone(["id","title"],null),expect(e).to.not.equal(t),expect(e.parent).to.equal(null),expect(e.length()).to.equal(2),expect(e.at(0)).to.not.equal(o),expect(e.at(0).get("id")).to.equal(1),expect(e.at(0).get("title")).to.be.equal("Hello World"),expect(e.at(0).get("extra")).to.be.undefined,expect(e.at(1)).to.not.equal(n),expect(e.at(1).get("id")).to.equal(2),expect(e.at(1).get("title")).to.be.equal("Foo Bar"),expect(e.at(1).get("extra")).to.be.undefined}),it("Should do a basic clone properly with a new parent",function(){var e,l;return e=t.clone(l=new s),expect(e).to.not.equal(t),expect(e.parent).to.equal(l),expect(e.length()).to.equal(2),expect(e.at(0)).to.not.equal(o),expect(e.at(0).get("id")).to.equal(1),expect(e.at(0).get("title")).to.be.equal("Hello World"),expect(e.at(0).get("extra")).to.be.equal("things"),expect(e.at(1)).to.not.equal(n),expect(e.at(1).get("id")).to.equal(2),expect(e.at(1).get("title")).to.be.equal("Foo Bar"),expect(e.at(1).get("extra")).to.be.equal("things2")}),it("Should do a basic clone properly with extra fields without a parent",function(){var e,l;return e=t.clone(["id","title"],l=new s),expect(e).to.not.equal(t),expect(e.parent).to.equal(l),expect(e.length()).to.equal(2),expect(e.at(0)).to.not.equal(o),expect(e.at(0).get("id")).to.equal(1),expect(e.at(0).get("title")).to.be.equal("Hello World"),expect(e.at(0).get("extra")).to.be.undefined,expect(e.at(1)).to.not.equal(n),expect(e.at(1).get("id")).to.equal(2),expect(e.at(1).get("title")).to.be.equal("Foo Bar"),expect(e.at(1).get("extra")).to.be.undefined})}),describe("Test the reset() method",function(){var t,o,n,l,r;return t=null,o=n=l=null,r=null,beforeEach(function(){return o=new i({id:1}),n=new i({id:2}),l=new i({id:3}),r=[o,n,l],t=new e(r,new u)}),it("Should reset properly",function(){return expect(t.length()).to.equal(3),expect(t.models()).to.deep.equal(r),t.reset(),expect(t.length()).to.equal(0),expect(t.models()).to.deep.equal([])})}),describe("Test the chain() method",function(){var t,o,n,l,r,a;return t=null,o=n=l=r=a=null,beforeEach(function(){return o=new i({id:1,title:"Model A 1"}),n=new i({id:2,title:"Model A 2"}),l=new i({id:3,title:"Model A 3"}),r=new i({id:4,title:"Model A 4"}),a=new i({id:5,title:"Model A 5"}),t=new e([o,n,l,r,a])}),it("Should be able to chain slice methods",function(){var e;return e=t.chain().slice(1).slice(0,4).models(),expect(e).to.be["instanceof"](Array),expect(e.length).to.equal(4)}),it("Should be able to chain filter methods",function(){var e;return e=t.chain().filter(function(e){return 4>e.get("id")}).filter(function(e){return 2!==e.get("id")}).models(),expect(e).to.be["instanceof"](Array),expect(e.length).to.equal(2),expect(e).to.deep.equal([o,l])}),it("Should be able to chain without methods",function(){var e;return e=t.chain().without(2).without(a).models(),expect(e).to.be["instanceof"](Array),expect(e.length).to.equal(3),expect(e).to.deep.equal([o,l,r])}),it("Should be able to chain a without method and sort method",function(){var e;return e=t.chain().without(2).sort(function(e,t){return e.id>t.id?-1:e.id<t.id?1:0}).models(),expect(e).to.be["instanceof"](Array),expect(e.length).to.equal(4),expect(e).to.deep.equal([a,r,l,o])})})})}).call(this);