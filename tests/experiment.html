<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Falcon.JS | Experimentation</title>

  <script type="text/javascript" src="lib/knockout-3.3.0.js"></script>

  <!-- include source files here... -->
  <script type="text/javascript" src="scripts/falcon.js"></script>

  <script>
    Falcon.addComponent("hello-world", Falcon.Component.extend({
      endpoint: "#hello_world-component",

      synchronous: true,

      observables: {
        'count': 10,

        'should_show': function() {
          count = this.count();
          return count%2 === 0
        }
      },

      initialize: function() {
        var recurse = null,
            that = this;

        (recurse = function() {
          that.count( that.count() + 1 );
          setTimeout(recurse, 1000);
        })();
      }
    }));

    Falcon.addComponent("blip", Falcon.Component.extend({
      endpoint: "#blip-component",

      synchronous: true,

      defaults: {
        count: function(options) { 
          options = options || {};
          options.count = options.count || 0;
          return options.count;
        }
      }
    }));

    Falcon.addBinding("debugger", true, function(e, va) {
      return;
      console.trace(ko.unwrap(va()));
      debugger;
    });

    Falcon.apply();
  </script>
  <style>
    hello-world {
      display: block;
      height: 80px;
      line-height: 80px;
    }
  </style>

</head>
  <body>
    Hello World:
    <hello-world></hello-world>
    Generic:
  </body>
  <template id="hello_world-component">
    <!-- ko with: $component.count -->
      Sup: <blip params="count: $data"></blip>
    <!--/ko -->
  </template>
  <template id="blip-component">
    Blip <!-- ko text: $component.count --><!-- /ko -->
  </template>
  <div id="the_one"></div>
    <script>
      var the_one = document.getElementById("the_one"),
          the_child = null,
          recurse = null;

      (recurse = function() {
        if(the_child) the_one.removeChild(the_child);
        the_child = document.createElement("div");
        the_child.innerHTML = "Hello " + Math.round(Math.random() * 100);
        the_one.appendChild(the_child);
        setTimeout(recurse,1000);
      })();
    </script>
</html>
