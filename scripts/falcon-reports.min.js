(function(){(function(a,b,c,d,e){!function(b){if(typeof require=="function"&&typeof exports=="object"&&typeof module=="object"){var c=module.exports||exports;b(c)}else typeof define=="function"&&define.amd?define(["exports"],b):b(a.ko={})}(function(f){function h(a){var b=this;if(a)for(var c in a){var d=g.extenders[c];typeof d=="function"&&(b=d(b,a[c]))}return b}function o(a){g.bindingHandlers[a]={init:function(b,c,d,e){var f=function(){var b={};return b[a]=c(),b};return g.bindingHandlers.event.init.call(this,b,f,d,e)}}}function r(a,b,c,d){g.bindingHandlers[a]={init:function(a,b,c,d,e){return g.utils.domData.set(a,q,{}),{controlsDescendantBindings:!0}},update:function(a,e,f,h,i){var j=g.utils.domData.get(a,q),k=g.utils.unwrapObservable(e()),l=!c!=!k,m=!j.savedNodes,n=m||b||l!==j.didDisplayOnLastUpdate;n&&(m&&(j.savedNodes=g.utils.cloneNodes(g.virtualElements.childNodes(a),!0)),l?(m||g.virtualElements.setDomNodeChildren(a,g.utils.cloneNodes(j.savedNodes)),g.applyBindingsToDescendants(d?d(i,k):i,a)):g.virtualElements.emptyNode(a),j.didDisplayOnLastUpdate=l)}},g.expressionRewriting.bindingRewriteValidators[a]=!1,g.virtualElements.allowedBindings[a]=!0}function s(a,b,c){c&&b!==g.selectExtensions.readValue(a)&&g.selectExtensions.writeValue(a,b),b!==g.selectExtensions.readValue(a)&&g.dependencyDetection.ignore(g.utils.triggerEvent,null,[a,"change"])}var g=typeof f!="undefined"?f:{};g.exportSymbol=function(a,b){var c=a.split("."),d=g;for(var e=0;e<c.length-1;e++)d=d[c[e]];d[c[c.length-1]]=b},g.exportProperty=function(a,b,c){a[b]=c},g.version="2.2.0",g.exportSymbol("version",g.version),g.utils=new function(){function s(a,b){if(g.utils.tagNameLower(a)!=="input"||!a.type)return!1;if(b.toLowerCase()!="click")return!1;var c=a.type;return c=="checkbox"||c=="radio"}var f=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,h={},i={},j=/Firefox\/2/i.test(c.userAgent)?"KeyboardEvent":"UIEvents";h[j]=["keyup","keydown","keypress"],h.MouseEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"];for(var k in h){var l=h[k];if(l.length)for(var m=0,n=l.length;m<n;m++)i[l[m]]=k}var o={propertychange:!0},p=function(){var a=3,c=b.createElement("div"),d=c.getElementsByTagName("i");while(c.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->",d[0]);return a>4?a:e}(),q=p===6,r=p===7;return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c])},arrayIndexOf:function(a,b){if(typeof Array.prototype.indexOf=="function")return Array.prototype.indexOf.call(a,b);for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},arrayFirst:function(a,b,c){for(var d=0,e=a.length;d<e;d++)if(b.call(c,a[d]))return a[d];return null},arrayRemoveItem:function(a,b){var c=g.utils.arrayIndexOf(a,b);c>=0&&a.splice(c,1)},arrayGetDistinctValues:function(a){a=a||[];var b=[];for(var c=0,d=a.length;c<d;c++)g.utils.arrayIndexOf(b,a[c])<0&&b.push(a[c]);return b},arrayMap:function(a,b){a=a||[];var c=[];for(var d=0,e=a.length;d<e;d++)c.push(b(a[d]));return c},arrayFilter:function(a,b){a=a||[];var c=[];for(var d=0,e=a.length;d<e;d++)b(a[d])&&c.push(a[d]);return c},arrayPushAll:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var c=0,d=b.length;c<d;c++)a.push(b[c]);return a},extend:function(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},emptyDomNode:function(a){while(a.firstChild)g.removeNode(a.firstChild)},moveCleanedNodesToContainerElement:function(a){var c=g.utils.makeArray(a),d=b.createElement("div");for(var e=0,f=c.length;e<f;e++)d.appendChild(g.cleanNode(c[e]));return d},cloneNodes:function(a,b){for(var c=0,d=a.length,e=[];c<d;c++){var f=a[c].cloneNode(!0);e.push(b?g.cleanNode(f):f)}return e},setDomNodeChildren:function(a,b){g.utils.emptyDomNode(a);if(b)for(var c=0,d=b.length;c<d;c++)a.appendChild(b[c])},replaceDomNodes:function(a,b){var c=a.nodeType?[a]:a;if(c.length>0){var d=c[0],e=d.parentNode;for(var f=0,h=b.length;f<h;f++)e.insertBefore(b[f],d);for(var f=0,h=c.length;f<h;f++)g.removeNode(c[f])}},setOptionNodeSelectionState:function(a,b){p<7?a.setAttribute("selected",b):a.selected=b},stringTrim:function(a){return(a||"").replace(f,"")},stringTokenize:function(a,b){var c=[],d=(a||"").split(b);for(var e=0,f=d.length;e<f;e++){var h=g.utils.stringTrim(d[e]);h!==""&&c.push(h)}return c},stringStartsWith:function(a,b){return a=a||"",b.length>a.length?!1:a.substring(0,b.length)===b},domNodeIsContainedBy:function(a,b){if(b.compareDocumentPosition)return(b.compareDocumentPosition(a)&16)==16;while(a!=null){if(a==b)return!0;a=a.parentNode}return!1},domNodeIsAttachedToDocument:function(a){return g.utils.domNodeIsContainedBy(a,a.ownerDocument)},tagNameLower:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},registerEventHandler:function(a,b,c){var e=p&&o[b];if(!e&&typeof d!="undefined"){if(s(a,b)){var f=c;c=function(a,b){var c=this.checked;b&&(this.checked=b.checkedStateBeforeEvent!==!0),f.call(this,a),this.checked=c}}d(a).bind(b,c)}else if(!e&&typeof a.addEventListener=="function")a.addEventListener(b,c,!1);else{if(typeof a.attachEvent=="undefined")throw new Error("Browser doesn't support addEventListener or attachEvent");a.attachEvent("on"+b,function(b){c.call(a,b)})}},triggerEvent:function(c,e){if(!c||!c.nodeType)throw new Error("element must be a DOM node when calling triggerEvent");if(typeof d!="undefined"){var f=[];s(c,e)&&f.push({checkedStateBeforeEvent:c.checked}),d(c).trigger(e,f)}else if(typeof b.createEvent=="function"){if(typeof c.dispatchEvent!="function")throw new Error("The supplied element doesn't support dispatchEvent");var g=i[e]||"HTMLEvents",h=b.createEvent(g);h.initEvent(e,!0,!0,a,0,0,0,0,0,!1,!1,!1,!1,0,c),c.dispatchEvent(h)}else{if(typeof c.fireEvent=="undefined")throw new Error("Browser doesn't support triggering events");s(c,e)&&(c.checked=c.checked!==!0),c.fireEvent("on"+e)}},unwrapObservable:function(a){return g.isObservable(a)?a():a},peekObservable:function(a){return g.isObservable(a)?a.peek():a},toggleDomNodeCssClass:function(a,b,c){if(b){var d=/[\w-]+/g,e=a.className.match(d)||[];g.utils.arrayForEach(b.match(d),function(a){var b=g.utils.arrayIndexOf(e,a);b>=0?c||e.splice(b,1):c&&e.push(a)}),a.className=e.join(" ")}},setTextContent:function(a,c){var d=g.utils.unwrapObservable(c);if(d===null||d===e)d="";if(a.nodeType===3)a.data=d;else{var f=g.virtualElements.firstChild(a);!f||f.nodeType!=3||g.virtualElements.nextSibling(f)?g.virtualElements.setDomNodeChildren(a,[b.createTextNode(d)]):f.data=d,g.utils.forceRefresh(a)}},setElementName:function(a,c){a.name=c;if(p<=7)try{a.mergeAttributes(b.createElement("<input name='"+a.name+"'/>"),!1)}catch(d){}},forceRefresh:function(a){if(p>=9){var b=a.nodeType==1?a:a.parentNode;b.style&&(b.style.zoom=b.style.zoom)}},ensureSelectElementIsRenderedCorrectly:function(a){if(p>=9){var b=a.style.width;a.style.width=0,a.style.width=b}},range:function(a,b){a=g.utils.unwrapObservable(a),b=g.utils.unwrapObservable(b);var c=[];for(var d=a;d<=b;d++)c.push(d);return c},makeArray:function(a){var b=[];for(var c=0,d=a.length;c<d;c++)b.push(a[c]);return b},isIe6:q,isIe7:r,ieVersion:p,getFormFields:function(a,b){var c=g.utils.makeArray(a.getElementsByTagName("input")).concat(g.utils.makeArray(a.getElementsByTagName("textarea"))),d=typeof b=="string"?function(a){return a.name===b}:function(a){return b.test(a.name)},e=[];for(var f=c.length-1;f>=0;f--)d(c[f])&&e.push(c[f]);return e},parseJson:function(b){if(typeof b=="string"){b=g.utils.stringTrim(b);if(b)return a.JSON&&a.JSON.parse?a.JSON.parse(b):(new Function("return "+b))()}return null},stringifyJson:function(a,b,c){if(typeof JSON=="undefined"||typeof JSON.stringify=="undefined")throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return JSON.stringify(g.utils.unwrapObservable(a),b,c)},postJson:function(a,c,d){d=d||{};var e=d.params||{},f=d.includeFields||this.fieldsIncludedWithJsonPost,h=a;if(typeof a=="object"&&g.utils.tagNameLower(a)==="form"){var i=a;h=i.action;for(var j=f.length-1;j>=0;j--){var k=g.utils.getFormFields(i,f[j]);for(var l=k.length-1;l>=0;l--)e[k[l].name]=k[l].value}}c=g.utils.unwrapObservable(c);var m=b.createElement("form");m.style.display="none",m.action=h,m.method="post";for(var n in c){var o=b.createElement("input");o.name=n,o.value=g.utils.stringifyJson(g.utils.unwrapObservable(c[n])),m.appendChild(o)}for(var n in e){var o=b.createElement("input");o.name=n,o.value=e[n],m.appendChild(o)}b.body.appendChild(m),d.submitter?d.submitter(m):m.submit(),setTimeout(function(){m.parentNode.removeChild(m)},0)}}},g.exportSymbol("utils",g.utils),g.exportSymbol("utils.arrayForEach",g.utils.arrayForEach),g.exportSymbol("utils.arrayFirst",g.utils.arrayFirst),g.exportSymbol("utils.arrayFilter",g.utils.arrayFilter),g.exportSymbol("utils.arrayGetDistinctValues",g.utils.arrayGetDistinctValues),g.exportSymbol("utils.arrayIndexOf",g.utils.arrayIndexOf),g.exportSymbol("utils.arrayMap",g.utils.arrayMap),g.exportSymbol("utils.arrayPushAll",g.utils.arrayPushAll),g.exportSymbol("utils.arrayRemoveItem",g.utils.arrayRemoveItem),g.exportSymbol("utils.extend",g.utils.extend),g.exportSymbol("utils.fieldsIncludedWithJsonPost",g.utils.fieldsIncludedWithJsonPost),g.exportSymbol("utils.getFormFields",g.utils.getFormFields),g.exportSymbol("utils.peekObservable",g.utils.peekObservable),g.exportSymbol("utils.postJson",g.utils.postJson),g.exportSymbol("utils.parseJson",g.utils.parseJson),g.exportSymbol("utils.registerEventHandler",g.utils.registerEventHandler),g.exportSymbol("utils.stringifyJson",g.utils.stringifyJson),g.exportSymbol("utils.range",g.utils.range),g.exportSymbol("utils.toggleDomNodeCssClass",g.utils.toggleDomNodeCssClass),g.exportSymbol("utils.triggerEvent",g.utils.triggerEvent),g.exportSymbol("utils.unwrapObservable",g.utils.unwrapObservable),Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments),a=c.shift();return function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}}),g.utils.domData=new function(){var a=0,b="__ko__"+(new Date).getTime(),c={};return{get:function(a,b){var c=g.utils.domData.getAll(a,!1);return c===e?e:c[b]},set:function(a,b,c){if(c===e&&g.utils.domData.getAll(a,!1)===e)return;var d=g.utils.domData.getAll(a,!0);d[b]=c},getAll:function(d,f){var g=d[b],h=g&&g!=="null"&&c[g];if(!h){if(!f)return e;g=d[b]="ko"+a++,c[g]={}}return c[g]},clear:function(a){var d=a[b];return d?(delete c[d],a[b]=null,!0):!1}}},g.exportSymbol("utils.domData",g.utils.domData),g.exportSymbol("utils.domData.clear",g.utils.domData.clear),g.utils.domNodeDisposal=new function(){function f(b,c){var d=g.utils.domData.get(b,a);return d===e&&c&&(d=[],g.utils.domData.set(b,a,d)),d}function h(b){g.utils.domData.set(b,a,e)}function i(a){var b=f(a,!1);if(b){b=b.slice(0);for(var e=0;e<b.length;e++)b[e](a)}g.utils.domData.clear(a),typeof d=="function"&&typeof d["cleanData"]=="function"&&d.cleanData([a]),c[a.nodeType]&&j(a)}function j(a){var b,c=a.firstChild;while(b=c)c=b.nextSibling,b.nodeType===8&&i(b)}var a="__ko_domNodeDisposal__"+(new Date).getTime(),b={1:!0,8:!0,9:!0},c={1:!0,9:!0};return{addDisposeCallback:function(a,b){if(typeof b!="function")throw new Error("Callback must be a function");f(a,!0).push(b)},removeDisposeCallback:function(a,b){var c=f(a,!1);c&&(g.utils.arrayRemoveItem(c,b),c.length==0&&h(a))},cleanNode:function(a){if(b[a.nodeType]){i(a);if(c[a.nodeType]){var d=[];g.utils.arrayPushAll(d,a.getElementsByTagName("*"));for(var e=0,f=d.length;e<f;e++)i(d[e])}}return a},removeNode:function(a){g.cleanNode(a),a.parentNode&&a.parentNode.removeChild(a)}}},g.cleanNode=g.utils.domNodeDisposal.cleanNode,g.removeNode=g.utils.domNodeDisposal.removeNode,g.exportSymbol("cleanNode",g.cleanNode),g.exportSymbol("removeNode",g.removeNode),g.exportSymbol("utils.domNodeDisposal",g.utils.domNodeDisposal),g.exportSymbol("utils.domNodeDisposal.addDisposeCallback",g.utils.domNodeDisposal.addDisposeCallback),g.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",g.utils.domNodeDisposal.removeDisposeCallback),function(){function f(c){var d=g.utils.stringTrim(c).toLowerCase(),e=b.createElement("div"),f=d.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!d.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!d.indexOf("<td")||!d.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],h="ignored<div>"+f[1]+c+f[2]+"</div>";typeof a["innerShiv"]=="function"?e.appendChild(a.innerShiv(h)):e.innerHTML=h;while(f[0]--)e=e.lastChild;return g.utils.makeArray(e.lastChild.childNodes)}function h(a){var b=d.clean([a]);if(b&&b[0]){var c=b[0];while(c.parentNode&&c.parentNode.nodeType!==11)c=c.parentNode;c.parentNode&&c.parentNode.removeChild(c)}return b}var c=/^(\s*)<!--(.*?)-->/;g.utils.parseHtmlFragment=function(a){return typeof d!="undefined"?h(a):f(a)},g.utils.setHtml=function(a,b){g.utils.emptyDomNode(a),b=g.utils.unwrapObservable(b);if(b!==null&&b!==e){typeof b!="string"&&(b=b.toString());if(typeof d!="undefined")d(a).html(b);else{var c=g.utils.parseHtmlFragment(b);for(var f=0;f<c.length;f++)a.appendChild(c[f])}}}}(),g.exportSymbol("utils.parseHtmlFragment",g.utils.parseHtmlFragment),g.exportSymbol("utils.setHtml",g.utils.setHtml),g.memoization=function(){function b(){return((1+Math.random())*4294967296|0).toString(16).substring(1)}function c(){return b()+b()}function d(a,b){if(!a)return;if(a.nodeType==8){var c=g.memoization.parseMemoText(a.nodeValue);c!=null&&b.push({domNode:a,memoId:c})}else if(a.nodeType==1)for(var e=0,f=a.childNodes,h=f.length;e<h;e++)d(f[e],b)}var a={};return{memoize:function(b){if(typeof b!="function")throw new Error("You can only pass a function to ko.memoization.memoize()");var d=c();return a[d]=b,"<!--[ko_memo:"+d+"]-->"},unmemoize:function(b,c){var d=a[b];if(d===e)throw new Error("Couldn't find any memo with ID "+b+". Perhaps it's already been unmemoized.");try{return d.apply(null,c||[]),!0}finally{delete a[b]}},unmemoizeDomNodeAndDescendants:function(a,b){var c=[];d(a,c);for(var e=0,f=c.length;e<f;e++){var h=c[e].domNode,i=[h];b&&g.utils.arrayPushAll(i,b),g.memoization.unmemoize(c[e].memoId,i),h.nodeValue="",h.parentNode&&h.parentNode.removeChild(h)}},parseMemoText:function(a){var b=a.match(/^\[ko_memo\:(.*?)\]$/);return b?b[1]:null}}}(),g.exportSymbol("memoization",g.memoization),g.exportSymbol("memoization.memoize",g.memoization.memoize),g.exportSymbol("memoization.unmemoize",g.memoization.unmemoize),g.exportSymbol("memoization.parseMemoText",g.memoization.parseMemoText),g.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",g.memoization.unmemoizeDomNodeAndDescendants),g.extenders={throttle:function(a,b){a.throttleEvaluation=b;var c=null;return g.dependentObservable({read:a,write:function(d){clearTimeout(c),c=setTimeout(function(){a(d)},b)}})},notify:function(a,b){return a.equalityComparer=b=="always"?function(){return!1}:g.observable.fn.equalityComparer,a}},g.exportSymbol("extenders",g.extenders),g.subscription=function(a,b,c){this.target=a,this.callback=b,this.disposeCallback=c,g.exportProperty(this,"dispose",this.dispose)},g.subscription.prototype.dispose=function(){this.isDisposed=!0,this.disposeCallback()},g.subscribable=function(){this._subscriptions={},g.utils.extend(this,g.subscribable.fn),g.exportProperty(this,"subscribe",this.subscribe),g.exportProperty(this,"extend",this.extend),g.exportProperty(this,"getSubscriptionsCount",this.getSubscriptionsCount)};var i="change";g.subscribable.fn={subscribe:function(a,b,c){c=c||i;var d=b?a.bind(b):a,e=new g.subscription(this,d,function(){g.utils.arrayRemoveItem(this._subscriptions[c],e)}.bind(this));return this._subscriptions[c]||(this._subscriptions[c]=[]),this._subscriptions[c].push(e),e},notifySubscribers:function(a,b){b=b||i,this._subscriptions[b]&&g.dependencyDetection.ignore(function(){g.utils.arrayForEach(this._subscriptions[b].slice(0),function(b){b&&b.isDisposed!==!0&&b.callback(a)})},this)},getSubscriptionsCount:function(){var a=0;for(var b in this._subscriptions)this._subscriptions.hasOwnProperty(b)&&(a+=this._subscriptions[b].length);return a},extend:h},g.isSubscribable=function(a){return typeof a.subscribe=="function"&&typeof a["notifySubscribers"]=="function"},g.exportSymbol("subscribable",g.subscribable),g.exportSymbol("isSubscribable",g.isSubscribable),g.dependencyDetection=function(){var a=[];return{begin:function(b){a.push({callback:b,distinctDependencies:[]})},end:function(){a.pop()},registerDependency:function(b){if(!g.isSubscribable(b))throw new Error("Only subscribable things can act as dependencies");if(a.length>0){var c=a[a.length-1];if(!c||g.utils.arrayIndexOf(c.distinctDependencies,b)>=0)return;c.distinctDependencies.push(b),c.callback(b)}},ignore:function(b,c,d){try{return a.push(null),b.apply(c,d||[])}finally{a.pop()}}}}();var j={"undefined":!0,"boolean":!0,number:!0,string:!0};g.observable=function(a){function c(){if(arguments.length>0){if(!c.equalityComparer||!c.equalityComparer(b,arguments[0]))c.valueWillMutate(),b=arguments[0],c.valueHasMutated();return this}return g.dependencyDetection.registerDependency(c),b}var b=a;return g.subscribable.call(c),c.peek=function(){return b},c.valueHasMutated=function(){c.notifySubscribers(b)},c.valueWillMutate=function(){c.notifySubscribers(b,"beforeChange")},g.utils.extend(c,g.observable.fn),g.exportProperty(c,"peek",c.peek),g.exportProperty(c,"valueHasMutated",c.valueHasMutated),g.exportProperty(c,"valueWillMutate",c.valueWillMutate),c},g.observable.fn={equalityComparer:function(b,c){var d=b===null||typeof b in j;return d?b===c:!1}};var k=g.observable.protoProperty="__ko_proto__";g.observable.fn[k]=g.observable,g.hasPrototype=function(a,b){return a===null||a===e||a[k]===e?!1:a[k]===b?!0:g.hasPrototype(a[k],b)},g.isObservable=function(a){return g.hasPrototype(a,g.observable)},g.isWriteableObservable=function(a){return typeof a=="function"&&a[k]===g.observable?!0:typeof a=="function"&&a[k]===g.dependentObservable&&a.hasWriteFunction?!0:!1},g.exportSymbol("observable",g.observable),g.exportSymbol("isObservable",g.isObservable),g.exportSymbol("isWriteableObservable",g.isWriteableObservable),g.observableArray=function(a){arguments.length==0&&(a=[]);if(a===null||a===e||"length"in a){var b=g.observable(a);return g.utils.extend(b,g.observableArray.fn),b}throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.")},g.observableArray.fn={remove:function(a){var b=this.peek(),c=[],d=typeof a=="function"?a:function(b){return b===a};for(var e=0;e<b.length;e++){var f=b[e];d(f)&&(c.length===0&&this.valueWillMutate(),c.push(f),b.splice(e,1),e--)}return c.length&&this.valueHasMutated(),c},removeAll:function(a){if(a===e){var b=this.peek(),c=b.slice(0);return this.valueWillMutate(),b.splice(0,b.length),this.valueHasMutated(),c}return a?this.remove(function(b){return g.utils.arrayIndexOf(a,b)>=0}):[]},destroy:function(a){var b=this.peek(),c=typeof a=="function"?a:function(b){return b===a};this.valueWillMutate();for(var d=b.length-1;d>=0;d--){var e=b[d];c(e)&&(b[d]._destroy=!0)}this.valueHasMutated()},destroyAll:function(a){return a===e?this.destroy(function(){return!0}):a?this.destroy(function(b){return g.utils.arrayIndexOf(a,b)>=0}):[]},indexOf:function(a){var b=this();return g.utils.arrayIndexOf(b,a)},replace:function(a,b){var c=this.indexOf(a);c>=0&&(this.valueWillMutate(),this.peek()[c]=b,this.valueHasMutated())}},g.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(a){g.observableArray.fn[a]=function(){var b=this.peek();this.valueWillMutate();var c=b[a].apply(b,arguments);return this.valueHasMutated(),c}}),g.utils.arrayForEach(["slice"],function(a){g.observableArray.fn[a]=function(){var b=this();return b[a].apply(b,arguments)}}),g.exportSymbol("observableArray",g.observableArray),g.dependentObservable=function(a,b,c){function j(a){u.push(a.subscribe(l))}function k(){g.utils.arrayForEach(u,function(a){a.dispose()}),u=[]}function l(){var a=n.throttleEvaluation;a&&a>=0?(clearTimeout(v),v=setTimeout(m,a)):m()}function m(){if(h)return;if(f&&s()){t();return}h=!0;try{var a=g.utils.arrayMap(u,function(a){return a.target});g.dependencyDetection.begin(function(b){var c;(c=g.utils.arrayIndexOf(a,b))>=0?a[c]=e:j(b)});var c=i.call(b);for(var k=a.length-1;k>=0;k--)a[k]&&u.splice(k,1)[0].dispose();f=!0,n.notifySubscribers(d,"beforeChange"),d=c}finally{g.dependencyDetection.end()}n.notifySubscribers(d),h=!1,u.length||t()}function n(){if(arguments.length>0){if(typeof q!="function")throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return q.apply(b,arguments),this}return f||m(),g.dependencyDetection.registerDependency(n),d}function o(){return f||m(),d}function p(){return!f||u.length>0}var d,f=!1,h=!1,i=a;i&&typeof i=="object"?(c=i,i=c.read):(c=c||{},i||(i=c.read));if(typeof i!="function")throw new Error("Pass a function that returns the value of the ko.computed");var q=c.write,r=c.disposeWhenNodeIsRemoved||c.disposeWhenNodeIsRemoved||null,s=c.disposeWhen||c.disposeWhen||function(){return!1},t=k,u=[],v=null;b||(b=c.owner),n.peek=o,n.getDependenciesCount=function(){return u.length},n.hasWriteFunction=typeof c.write=="function",n.dispose=function(){t()},n.isActive=p,g.subscribable.call(n),g.utils.extend(n,g.dependentObservable.fn),g.exportProperty(n,"peek",n.peek),g.exportProperty(n,"dispose",n.dispose),g.exportProperty(n,"isActive",n.isActive),g.exportProperty(n,"getDependenciesCount",n.getDependenciesCount),c.deferEvaluation!==!0&&m();if(r&&p()){t=function(){g.utils.domNodeDisposal.removeDisposeCallback(r,arguments.callee),k()},g.utils.domNodeDisposal.addDisposeCallback(r,t);var w=s;s=function(){return!g.utils.domNodeIsAttachedToDocument(r)||w()}}return n},g.isComputed=function(a){return g.hasPrototype(a,g.dependentObservable)};var l=g.observable.protoProperty;g.dependentObservable[l]=g.observable,g.dependentObservable.fn={},g.dependentObservable.fn[l]=g.dependentObservable,g.exportSymbol("dependentObservable",g.dependentObservable),g.exportSymbol("computed",g.dependentObservable),g.exportSymbol("isComputed",g.isComputed),function(){function b(a,f,g){g=g||new d,a=f(a);var h=typeof a=="object"&&a!==null&&a!==e&&!(a instanceof Date);if(!h)return a;var i=a instanceof Array?[]:{};return g.save(a,i),c(a,function(c){var d=f(a[c]);switch(typeof d){case"boolean":case"number":case"string":case"function":i[c]=d;break;case"object":case"undefined":var h=g.get(d);i[c]=h!==e?h:b(d,f,g)}}),i}function c(a,b){if(a instanceof Array){for(var c=0;c<a.length;c++)b(c);typeof a["toJSON"]=="function"&&b("toJSON")}else for(var d in a)b(d)}function d(){var a=[],b=[];this.save=function(c,d){var e=g.utils.arrayIndexOf(a,c);e>=0?b[e]=d:(a.push(c),b.push(d))},this.get=function(c){var d=g.utils.arrayIndexOf(a,c);return d>=0?b[d]:e}}var a=10;g.toJS=function(c){if(arguments.length==0)throw new Error("When calling ko.toJS, pass the object you want to convert.");return b(c,function(b){for(var c=0;g.isObservable(b)&&c<a;c++)b=b();return b})},g.toJSON=function(a,b,c){var d=g.toJS(a);return g.utils.stringifyJson(d,b,c)}}(),g.exportSymbol("toJS",g.toJS),g.exportSymbol("toJSON",g.toJSON),function(){var a="__ko__hasDomDataOptionValue__";g.selectExtensions={readValue:function(b){switch(g.utils.tagNameLower(b)){case"option":if(b[a]===!0)return g.utils.domData.get(b,g.bindingHandlers.options.optionValueDomDataKey);return g.utils.ieVersion<=7?b.getAttributeNode("value").specified?b.value:b.text:b.value;case"select":return b.selectedIndex>=0?g.selectExtensions.readValue(b.options[b.selectedIndex]):e;default:return b.value}},writeValue:function(b,c){switch(g.utils.tagNameLower(b)){case"option":switch(typeof c){case"string":g.utils.domData.set(b,g.bindingHandlers.options.optionValueDomDataKey,e),a in b&&delete b[a],b.value=c;break;default:g.utils.domData.set(b,g.bindingHandlers.options.optionValueDomDataKey,c),b[a]=!0,b.value=typeof c=="number"?c:""}break;case"select":for(var d=b.options.length-1;d>=0;d--)if(g.selectExtensions.readValue(b.options[d])==c){b.selectedIndex=d;break}break;default:if(c===null||c===e)c="";b.value=c}}}}(),g.exportSymbol("selectExtensions",g.selectExtensions),g.exportSymbol("selectExtensions.readValue",g.selectExtensions.readValue),g.exportSymbol("selectExtensions.writeValue",g.selectExtensions.writeValue),g.expressionRewriting=function(){function d(b,c){var d=null;while(b!=d)d=b,b=b.replace(a,function(a,b){return c[b]});return b}function e(a){if(g.utils.arrayIndexOf(b,g.utils.stringTrim(a).toLowerCase())>=0)return!1;var d=a.match(c);return d===null?!1:d[1]?"Object("+d[1]+")"+d[2]:a}function f(a){var b=g.utils.stringTrim(a);switch(b.length&&b.charAt(0)){case"'":case'"':return a;default:return"'"+b+"'"}}var a=/\@ko_token_(\d+)\@/g,b=["true","false"],c=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i;return{bindingRewriteValidators:[],parseObjectLiteral:function(a){var b=g.utils.stringTrim(a);if(b.length<3)return[];b.charAt(0)==="{"&&(b=b.substring(1,b.length-1));var c=[],e=null,f;for(var h=0;h<b.length;h++){var i=b.charAt(h);if(e===null)switch(i){case'"':case"'":case"/":e=h,f=i}else if(i==f&&b.charAt(h-1)!=="\\"){var j=b.substring(e,h+1);c.push(j);var k="@ko_token_"+(c.length-1)+"@";b=b.substring(0,e)+k+b.substring(h+1),h-=j.length-k.length,e=null}}e=null,f=null;var l=0,m=null;for(var h=0;h<b.length;h++){var i=b.charAt(h);if(e===null)switch(i){case"{":e=h,m=i,f="}";break;case"(":e=h,m=i,f=")";break;case"[":e=h,m=i,f="]"}if(i===m)l++;else if(i===f){l--;if(l===0){var j=b.substring(e,h+1);c.push(j);var k="@ko_token_"+(c.length-1)+"@";b=b.substring(0,e)+k+b.substring(h+1),h-=j.length-k.length,e=null}}}var n=[],o=b.split(",");for(var p=0,q=o.length;p<q;p++){var r=o[p],s=r.indexOf(":");if(s>0&&s<r.length-1){var t=r.substring(0,s),u=r.substring(s+1);n.push({key:d(t,c),value:d(u,c)})}else n.push({unknown:d(r,c)})}return n},preProcessBindings:function(a){var b=typeof a=="string"?g.expressionRewriting.parseObjectLiteral(a):a,c=[],d=[],h;for(var i=0;h=b[i];i++){c.length>0&&c.push(",");if(h.key){var j=f(h.key),k=h.value;c.push(j),c.push(":"),c.push(k);if(k=e(g.utils.stringTrim(k)))d.length>0&&d.push(", "),d.push(j+" : function(__ko_value) { "+k+" = __ko_value; }")}else h.unknown&&c.push(h.unknown)}var l=c.join("");if(d.length>0){var m=d.join("");l=l+", '_ko_property_writers' : { "+m+" } "}return l},keyValueArrayContainsKey:function(a,b){for(var c=0;c<a.length;c++)if(g.utils.stringTrim(a[c]["key"])==b)return!0;return!1},writeValueToProperty:function(a,b,c,d,e){if(!a||!g.isWriteableObservable(a)){var f=b()._ko_property_writers;f&&f[c]&&f[c](d)}else(!e||a.peek()!==d)&&a(d)}}}(),g.exportSymbol("expressionRewriting",g.expressionRewriting),g.exportSymbol("expressionRewriting.bindingRewriteValidators",g.expressionRewriting.bindingRewriteValidators),g.exportSymbol("expressionRewriting.parseObjectLiteral",g.expressionRewriting.parseObjectLiteral),g.exportSymbol("expressionRewriting.preProcessBindings",g.expressionRewriting.preProcessBindings),g.exportSymbol("jsonExpressionRewriting",g.expressionRewriting),g.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",g.expressionRewriting.preProcessBindings),function(){function f(b){return b.nodeType==8&&(a?b.text:b.nodeValue).match(c)}function h(b){return b.nodeType==8&&(a?b.text:b.nodeValue).match(d)}function i(a,b){var c=a,d=1,e=[];while(c=c.nextSibling){if(h(c)){d--;if(d===0)return e}e.push(c),f(c)&&d++}if(!b)throw new Error("Cannot find closing comment tag to match: "+a.nodeValue);return null}function j(a,b){var c=i(a,b);return c?c.length>0?c[c.length-1].nextSibling:a.nextSibling:null}function k(a){var b=a.firstChild,c=null;if(b)do if(c)c.push(b);else if(f(b)){var d=j(b,!0);d?b=d:c=[b]}else h(b)&&(c=[b]);while(b=b.nextSibling);return c}var a=b.createComment("test").text==="<!--test-->",c=a?/^<!--\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*-->$/:/^\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*$/,d=a?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,e={ul:!0,ol:!0};g.virtualElements={allowedBindings:{},childNodes:function(a){return f(a)?i(a):a.childNodes},emptyNode:function(a){if(!f(a))g.utils.emptyDomNode(a);else{var b=g.virtualElements.childNodes(a);for(var c=0,d=b.length;c<d;c++)g.removeNode(b[c])}},setDomNodeChildren:function(a,b){if(!f(a))g.utils.setDomNodeChildren(a,b);else{g.virtualElements.emptyNode(a);var c=a.nextSibling;for(var d=0,e=b.length;d<e;d++)c.parentNode.insertBefore(b[d],c)}},prepend:function(a,b){f(a)?a.parentNode.insertBefore(b,a.nextSibling):a.firstChild?a.insertBefore(b,a.firstChild):a.appendChild(b)},insertAfter:function(a,b,c){c?f(a)?a.parentNode.insertBefore(b,c.nextSibling):c.nextSibling?a.insertBefore(b,c.nextSibling):a.appendChild(b):g.virtualElements.prepend(a,b)},firstChild:function(a){return f(a)?!a.nextSibling||h(a.nextSibling)?null:a.nextSibling:a.firstChild},nextSibling:function(a){return f(a)&&(a=j(a)),a.nextSibling&&h(a.nextSibling)?null:a.nextSibling},virtualNodeBindingValue:function(a){var b=f(a);return b?b[1]:null},normaliseVirtualElementDomStructure:function(a){if(!e[g.utils.tagNameLower(a)])return;var b=a.firstChild;if(b)do if(b.nodeType===1){var c=k(b);if(c){var d=b.nextSibling;for(var f=0;f<c.length;f++)d?a.insertBefore(c[f],d):a.appendChild(c[f])}}while(b=b.nextSibling)}}}(),g.exportSymbol("virtualElements",g.virtualElements),g.exportSymbol("virtualElements.allowedBindings",g.virtualElements.allowedBindings),g.exportSymbol("virtualElements.emptyNode",g.virtualElements.emptyNode),g.exportSymbol("virtualElements.insertAfter",g.virtualElements.insertAfter),g.exportSymbol("virtualElements.prepend",g.virtualElements.prepend),g.exportSymbol("virtualElements.setDomNodeChildren",g.virtualElements.setDomNodeChildren),function(){function b(a,b){var d=a;return b[d]||(b[d]=c(a))}function c(a){var b=g.expressionRewriting.preProcessBindings(a),c="with($context){with($data||{}){return{"+b+"}}}";return new Function("$context","$element",c)}var a="data-bind";g.bindingProvider=function(){this.bindingCache={}},g.utils.extend(g.bindingProvider.prototype,{nodeHasBindings:function(b){switch(b.nodeType){case 1:return b.getAttribute(a)!=null;case 8:return g.virtualElements.virtualNodeBindingValue(b)!=null;default:return!1}},getBindings:function(a,b){var c=this.getBindingsString(a,b);return c?this.parseBindingsString(c,b,a):null},getBindingsString:function(b,c){switch(b.nodeType){case 1:return b.getAttribute(a);case 8:return g.virtualElements.virtualNodeBindingValue(b);default:return null}},parseBindingsString:function(a,c,d){try{var e=b(a,this.bindingCache);return e(c,d)}catch(f){throw new Error("Unable to parse bindings.\nMessage: "+f+";\nBindings value: "+a)}}}),g.bindingProvider.instance=new g.bindingProvider}(),g.exportSymbol("bindingProvider",g.bindingProvider),function(){function b(a){var b=g.virtualElements.allowedBindings[a];if(!b)throw new Error("The binding '"+a+"' cannot be used with virtual elements")}function c(a,b,c){var e,f=g.virtualElements.firstChild(b);while(e=f)f=g.virtualElements.nextSibling(e),d(a,e,c)}function d(a,b,d){var e=!0,h=b.nodeType===1;h&&g.virtualElements.normaliseVirtualElementDomStructure(b);var i=h&&d||g.bindingProvider.instance.nodeHasBindings(b);i&&(e=f(b,null,a,d).shouldBindDescendants),e&&c(a,b,!h)}function f(a,c,d,f){function j(a){return function(){return i[a]}}function k(){return i}var h=0,i,l;return g.dependentObservable(function(){var m=d&&d instanceof g.bindingContext?d:new g.bindingContext(g.utils.unwrapObservable(d)),n=m.$data;f&&g.storedBindingContextForNode(a,m);var o=typeof c=="function"?c(m,a):c;i=o||g.bindingProvider.instance.getBindings(a,m);if(i){if(h===0){h=1;for(var p in i){var q=g.bindingHandlers[p];q&&a.nodeType===8&&b(p);if(q&&typeof q["init"]=="function"){var r=q.init,s=r(a,j(p),k,n,m);if(s&&s.controlsDescendantBindings){if(l!==e)throw new Error("Multiple bindings ("+l+" and "+p+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");l=p}}}h=2}if(h===2)for(var p in i){var q=g.bindingHandlers[p];if(q&&typeof q["update"]=="function"){var t=q.update;t(a,j(p),k,n,m)}}}},null,{disposeWhenNodeIsRemoved:a}),{shouldBindDescendants:l===e}}g.bindingHandlers={},g.bindingContext=function(a,b,c){b?(g.utils.extend(this,b),this.$parentContext=b,this.$parent=b.$data,this.$parents=(b.$parents||[]).slice(0),this.$parents.unshift(this.$parent)):(this.$parents=[],this.$root=a,this.ko=g),this.$data=a,c&&(this[c]=a)},g.bindingContext.prototype.createChildContext=function(a,b){return new g.bindingContext(a,this,b)},g.bindingContext.prototype.extend=function(a){var b=g.utils.extend(new g.bindingContext,this);return g.utils.extend(b,a)};var h="__ko_bindingContext__";g.storedBindingContextForNode=function(a,b){if(arguments.length!=2)return g.utils.domData.get(a,h);g.utils.domData.set(a,h,b)},g.applyBindingsToNode=function(a,b,c){return a.nodeType===1&&g.virtualElements.normaliseVirtualElementDomStructure(a),f(a,b,c,!0)},g.applyBindingsToDescendants=function(a,b){(b.nodeType===1||b.nodeType===8)&&c(a,b,!0)},g.applyBindings=function(b,c){if(c&&c.nodeType!==1&&c.nodeType!==8)throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");c=c||a.document.body,d(b,c,!0)},g.contextFor=function(a){switch(a.nodeType){case 1:case 8:var b=g.storedBindingContextForNode(a);if(b)return b;if(a.parentNode)return g.contextFor(a.parentNode)}return e},g.dataFor=function(a){var b=g.contextFor(a);return b?b.$data:e},g.exportSymbol("bindingHandlers",g.bindingHandlers),g.exportSymbol("applyBindings",g.applyBindings),g.exportSymbol("applyBindingsToDescendants",g.applyBindingsToDescendants),g.exportSymbol("applyBindingsToNode",g.applyBindingsToNode),g.exportSymbol("contextFor",g.contextFor),g.exportSymbol("dataFor",g.dataFor)}();var m={"class":"className","for":"htmlFor"};g.bindingHandlers.attr={update:function(a,b,c){var d=g.utils.unwrapObservable(b())||{};for(var f in d)if(typeof f=="string"){var h=g.utils.unwrapObservable(d[f]),i=h===!1||h===null||h===e;i&&a.removeAttribute(f),g.utils.ieVersion<=8&&f in m?(f=m[f],i?a.removeAttribute(f):a[f]=h):i||a.setAttribute(f,h.toString()),f==="name"&&g.utils.setElementName(a,i?"":h.toString())}}},g.bindingHandlers.checked={init:function(a,b,c){var d=function(){var d;if(a.type=="checkbox")d=a.checked;else{if(a.type!="radio"||!a.checked)return;d=a.value}var e=b(),f=g.utils.unwrapObservable(e);if(a.type=="checkbox"&&f instanceof Array){var h=g.utils.arrayIndexOf(f,a.value);a.checked&&h<0?e.push(a.value):!a.checked&&h>=0&&e.splice(h,1)}else g.expressionRewriting.writeValueToProperty(e,c,"checked",d,!0)};g.utils.registerEventHandler(a,"click",d),a.type=="radio"&&!a.name&&g.bindingHandlers.uniqueName.init(a,function(){return!0})},update:function(a,b){var c=g.utils.unwrapObservable(b());a.type=="checkbox"?c instanceof Array?a.checked=g.utils.arrayIndexOf(c,a.value)>=0:a.checked=c:a.type=="radio"&&(a.checked=a.value==c)}};var n="__ko__cssValue";g.bindingHandlers.css={update:function(a,b){var c=g.utils.unwrapObservable(b());if(typeof c=="object")for(var d in c){var e=g.utils.unwrapObservable(c[d]);g.utils.toggleDomNodeCssClass(a,d,e)}else c=String(c||""),g.utils.toggleDomNodeCssClass(a,a[n],!1),a[n]=c,g.utils.toggleDomNodeCssClass(a,c,!0)}},g.bindingHandlers.enable={update:function(a,b){var c=g.utils.unwrapObservable(b());c&&a.disabled?a.removeAttribute("disabled"):!c&&!a.disabled&&(a.disabled=!0)}},g.bindingHandlers.disable={update:function(a,b){g.bindingHandlers.enable.update(a,function(){return!g.utils.unwrapObservable(b())})}},g.bindingHandlers.event={init:function(a,b,c,d){var e=b()||{};for(var f in e)(function(){var e=f;typeof e=="string"&&g.utils.registerEventHandler(a,e,function(a){var f,h=b()[e];if(!h)return;var i=c();try{var j=g.utils.makeArray(arguments);j.unshift(d),f=h.apply(d,j)}finally{f!==!0&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}var k=i[e+"Bubble"]!==!1;k||(a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation())})})()}},g.bindingHandlers.foreach={makeTemplateValueAccessor:function(a){return function(){var b=a(),c=g.utils.peekObservable(b);return!c||typeof c.length=="number"?{foreach:b,templateEngine:g.nativeTemplateEngine.instance}:(g.utils.unwrapObservable(b),{foreach:c.data,as:c.as,includeDestroyed:c.includeDestroyed,afterAdd:c.afterAdd,beforeRemove:c.beforeRemove,afterRender:c.afterRender,beforeMove:c.beforeMove,afterMove:c.afterMove,templateEngine:g.nativeTemplateEngine.instance})}},init:function(a,b,c,d,e){return g.bindingHandlers.template.init(a,g.bindingHandlers.foreach.makeTemplateValueAccessor(b))},update:function(a,b,c,d,e){return g.bindingHandlers.template.update(a,g.bindingHandlers.foreach.makeTemplateValueAccessor(b),c,d,e)}},g.expressionRewriting.bindingRewriteValidators.foreach=!1,g.virtualElements.allowedBindings.foreach=!0;var p="__ko_hasfocusUpdating";g.bindingHandlers.hasfocus={init:function(a,b,c){var d=function(d){a[p]=!0;var e=a.ownerDocument;"activeElement"in e&&(d=e.activeElement===a);var f=b();g.expressionRewriting.writeValueToProperty(f,c,"hasfocus",d,!0),a[p]=!1},e=d.bind(null,!0),f=d.bind(null,!1);g.utils.registerEventHandler(a,"focus",e),g.utils.registerEventHandler(a,"focusin",e),g.utils.registerEventHandler(a,"blur",f),g.utils.registerEventHandler(a,"focusout",f)},update:function(a,b){var c=g.utils.unwrapObservable(b());a[p]||(c?a.focus():a.blur(),g.dependencyDetection.ignore(g.utils.triggerEvent,null,[a,c?"focusin":"focusout"]))}},g.bindingHandlers.html={init:function(){return{controlsDescendantBindings:!0}},update:function(a,b){g.utils.setHtml(a,b())}};var q="__ko_withIfBindingData";r("if"),r("ifnot",!1,!0),r("with",!0,!1,function(a,b){return a.createChildContext(b)}),g.bindingHandlers.options={update:function(a,c,d){if(g.utils.tagNameLower(a)!=="select")throw new Error("options binding applies only to SELECT elements");var f=a.length==0,h=g.utils.arrayMap(g.utils.arrayFilter(a.childNodes,function(a){return a.tagName&&g.utils.tagNameLower(a)==="option"&&a.selected}),function(a){return g.selectExtensions.readValue(a)||a.innerText||a.textContent}),i=a.scrollTop,j=g.utils.unwrapObservable(c()),k=a.value;while(a.length>0)g.cleanNode(a.options[0]),a.remove(0);if(j){var l=d(),m=l.optionsIncludeDestroyed;typeof j.length!="number"&&(j=[j]);if(l.optionsCaption){var n=b.createElement("option");g.utils.setHtml(n,l.optionsCaption),g.selectExtensions.writeValue(n,e),a.appendChild(n)}for(var o=0,p=j.length;o<p;o++){var q=j[o];if(q&&q._destroy&&!m)continue;var n=b.createElement("option");function r(a,b,c){var d=typeof b;return d=="function"?b(a):d=="string"?a[b]:c}var t=r(q,l.optionsValue,q);g.selectExtensions.writeValue(n,g.utils.unwrapObservable(t));var u=r(q,l.optionsText,t);g.utils.setTextContent(n,u),a.appendChild(n)}var v=a.getElementsByTagName("option"),w=0;for(var o=0,p=v.length;o<p;o++)g.utils.arrayIndexOf(h,g.selectExtensions.readValue(v[o]))>=0&&(g.utils.setOptionNodeSelectionState(v[o],!0),w++);a.scrollTop=i,f&&"value"in l&&s(a,g.utils.peekObservable(l.value),!0),g.utils.ensureSelectElementIsRenderedCorrectly(a)}}},g.bindingHandlers.options.optionValueDomDataKey="__ko.optionValueDomData__",g.bindingHandlers.selectedOptions={init:function(a,b,c){g.utils.registerEventHandler(a,"change",function(){var d=b(),e=[];g.utils.arrayForEach(a.getElementsByTagName("option"),function(a){a.selected&&e.push(g.selectExtensions.readValue(a))}),g.expressionRewriting.writeValueToProperty(d,c,"value",e)})},update:function(a,b){if(g.utils.tagNameLower(a)!="select")throw new Error("values binding applies only to SELECT elements");var c=g.utils.unwrapObservable(b());c&&typeof c.length=="number"&&g.utils.arrayForEach(a.getElementsByTagName("option"),function(a){var b=g.utils.arrayIndexOf(c,g.selectExtensions.readValue(a))>=0;g.utils.setOptionNodeSelectionState(a,b)})}},g.bindingHandlers.style={update:function(a,b){var c=g.utils.unwrapObservable(b()||{});for(var d in c)if(typeof d=="string"){var e=g.utils.unwrapObservable(c[d]);a.style[d]=e||""}}},g.bindingHandlers.submit={init:function(a,b,c,d){if(typeof b()!="function")throw new Error("The value for a submit binding must be a function");g.utils.registerEventHandler(a,"submit",function(c){var e,f=b();try{e=f.call(d,a)}finally{e!==!0&&(c.preventDefault?c.preventDefault():c.returnValue=!1)}})}},g.bindingHandlers.text={update:function(a,b){g.utils.setTextContent(a,b())}},g.virtualElements.allowedBindings.text=!0,g.bindingHandlers.uniqueName={init:function(a,b){if(b()){var c="ko_unique_"+ ++g.bindingHandlers.uniqueName.currentIndex;g.utils.setElementName(a,c)}}},g.bindingHandlers.uniqueName.currentIndex=0,g.bindingHandlers.value={init:function(a,b,c){var d=["change"],e=c().valueUpdate,f=!1;e&&(typeof e=="string"&&(e=[e]),g.utils.arrayPushAll(d,e),d=g.utils.arrayGetDistinctValues(d));var h=function(){f=!1;var d=b(),e=g.selectExtensions.readValue(a);g.expressionRewriting.writeValueToProperty(d,c,"value",e)},i=g.utils.ieVersion&&a.tagName.toLowerCase()=="input"&&a.type=="text"&&a.autocomplete!="off"&&(!a.form||a.form.autocomplete!="off");i&&g.utils.arrayIndexOf(d,"propertychange")==-1&&(g.utils.registerEventHandler(a,"propertychange",function(){f=!0}),g.utils.registerEventHandler(a,"blur",function(){f&&h()})),g.utils.arrayForEach(d,function(b){var c=h;g.utils.stringStartsWith(b,"after")&&(c=function(){setTimeout(h,0)},b=b.substring("after".length)),g.utils.registerEventHandler(a,b,c)})},update:function(a,b){var c=g.utils.tagNameLower(a)==="select",d=g.utils.unwrapObservable(b()),e=g.selectExtensions.readValue(a),f=d!=e;d===0&&e!==0&&e!=="0"&&(f=!0);if(f){var h=function(){g.selectExtensions.writeValue(a,d)};h();var i=c;i&&setTimeout(h,0)}c&&a.length>0&&s(a,d,!1)}},g.bindingHandlers.visible={update:function(a,b){var c=g.utils.unwrapObservable(b()),d=a.style.display!="none";c&&!d?a.style.display="":!c&&d&&(a.style.display="none")}},o("click"),g.templateEngine=function(){},g.templateEngine.prototype.renderTemplateSource=function(a,b,c){throw new Error("Override renderTemplateSource")},g.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(a){throw new Error("Override createJavaScriptEvaluatorBlock")},g.templateEngine.prototype.makeTemplateSource=function(a,c){if(typeof a=="string"){c=c||b;var d=c.getElementById(a);if(!d)throw new Error("Cannot find template with ID "+a);return new g.templateSources.domElement(d)}if(a.nodeType==1||a.nodeType==8)return new g.templateSources.anonymousTemplate(a);throw new Error("Unknown template type: "+a)},g.templateEngine.prototype.renderTemplate=function(a,b,c,d){var e=this.makeTemplateSource(a,d);return this.renderTemplateSource(e,b,c)},g.templateEngine.prototype.isTemplateRewritten=function(a,b){return this.allowTemplateRewriting===!1?!0:this.makeTemplateSource(a,b).data("isRewritten")},g.templateEngine.prototype.rewriteTemplate=function(a,b,c){var d=this.makeTemplateSource(a,c),e=b(d.text());d.text(e),d.data("isRewritten",!0)},g.exportSymbol("templateEngine",g.templateEngine),g.templateRewriting=function(){function c(a){var b=g.expressionRewriting.bindingRewriteValidators;for(var c=0;c<a.length;c++){var d=a[c].key;if(b.hasOwnProperty(d)){var e=b[d];if(typeof e=="function"){var f=e(a[c].value);if(f)throw new Error(f)}else if(!e)throw new Error("This template engine does not support the '"+d+"' binding within its templates")}}}function d(a,b,d){var e=g.expressionRewriting.parseObjectLiteral(a);c(e);var f=g.expressionRewriting.preProcessBindings(e),h="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+f+" } })()})";return d.createJavaScriptEvaluatorBlock(h)+b}var a=/(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9\-]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi,b=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;return{ensureTemplateIsRewritten:function(a,b,c){b.isTemplateRewritten(a,c)||b.rewriteTemplate(a,function(a){return g.templateRewriting.memoizeBindingAttributeSyntax(a,b)},c)},memoizeBindingAttributeSyntax:function(c,e){return c.replace(a,function(){return d(arguments[6],arguments[1],e)}).replace(b,function(){return d(arguments[1],"<!-- ko -->",e)})},applyMemoizedBindingsToNextSibling:function(a){return g.memoization.memoize(function(b,c){b.nextSibling&&g.applyBindingsToNode(b.nextSibling,a,c)})}}}(),g.exportSymbol("__tr_ambtns",g.templateRewriting.applyMemoizedBindingsToNextSibling),function(){g.templateSources={},g.templateSources.domElement=function(a){this.domElement=a},g.templateSources.domElement.prototype.text=function(){var a=g.utils.tagNameLower(this.domElement),b=a==="script"?"text":a==="textarea"?"value":"innerHTML";if(arguments.length==0)return this.domElement[b];var c=arguments[0];b==="innerHTML"?g.utils.setHtml(this.domElement,c):this.domElement[b]=c},g.templateSources.domElement.prototype.data=function(a){if(arguments.length===1)return g.utils.domData.get(this.domElement,"templateSourceData_"+a);g.utils.domData.set(this.domElement,"templateSourceData_"+a,arguments[1])};var a="__ko_anon_template__";g.templateSources.anonymousTemplate=function(a){this.domElement=a},g.templateSources.anonymousTemplate.prototype=new g.templateSources.domElement,g.templateSources.anonymousTemplate.prototype.text=function(){if(arguments.length==0){var b=g.utils.domData.get(this.domElement,a)||{};return b.textData===e&&b.containerData&&(b.textData=b.containerData.innerHTML),b.textData}var c=arguments[0];g.utils.domData.set(this.domElement,a,{textData:c})},g.templateSources.domElement.prototype.nodes=function(){if(arguments.length==0){var b=g.utils.domData.get(this.domElement,a)||{};return b.containerData}var c=arguments[0];g.utils.domData.set(this.domElement,a,{containerData:c})},g.exportSymbol("templateSources",g.templateSources),g.exportSymbol("templateSources.domElement",g.templateSources.domElement),g.exportSymbol("templateSources.anonymousTemplate",g.templateSources.anonymousTemplate)}(),function(){function b(a,b,c){var d,e=a,f=g.virtualElements.nextSibling(b);while(e&&(d=e)!==f)e=g.virtualElements.nextSibling(d),(d.nodeType===1||d.nodeType===8)&&c(d)}function c(a,c){if(a.length){var d=a[0],e=a[a.length-1];b(d,e,function(a){g.applyBindings(c,a)}),b(d,e,function(a){g.memoization.unmemoizeDomNodeAndDescendants(a,[c])})}}function d(a){return a.nodeType?a:a.length>0?a[0]:null}function f(b,e,f,h,i){i=i||{};var j=b&&d(b),k=j&&j.ownerDocument,l=i.templateEngine||a;g.templateRewriting.ensureTemplateIsRewritten(f,l,k);var m=l.renderTemplate(f,h,i,k);if(typeof m.length!="number"||m.length>0&&typeof m[0].nodeType!="number")throw new Error("Template engine must return an array of DOM nodes");var n=!1;switch(e){case"replaceChildren":g.virtualElements.setDomNodeChildren(b,m),n=!0;break;case"replaceNode":g.utils.replaceDomNodes(b,m),n=!0;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+e)}return n&&(c(m,h),i.afterRender&&g.dependencyDetection.ignore(i.afterRender,null,[m,h.$data])),m}function i(a,b){var c=g.utils.domData.get(a,h);c&&typeof c.dispose=="function"&&c.dispose(),g.utils.domData.set(a,h,b&&b.isActive()?b:e)}var a;g.setTemplateEngine=function(b){if(!(b==e||b instanceof g.templateEngine))throw new Error("templateEngine must inherit from ko.templateEngine");a=b},g.renderTemplate=function(b,c,h,i,j){h=h||{};if((h["templateEngine"]||a)==e)throw new Error("Set a template engine before calling renderTemplate");j=j||"replaceChildren";if(i){var k=d(i),l=function(){return!k||!g.utils.domNodeIsAttachedToDocument(k)},m=k&&j=="replaceNode"?k.parentNode:k;return g.dependentObservable(function(){var a=c&&c instanceof g.bindingContext?c:new g.bindingContext(g.utils.unwrapObservable(c)),e=typeof b=="function"?b(a.$data,a):b,l=f(i,j,e,a,h);j=="replaceNode"&&(i=l,k=d(i))},null,{disposeWhen:l,disposeWhenNodeIsRemoved:m})}return g.memoization.memoize(function(a){g.renderTemplate(b,c,h,a,"replaceNode")})},g.renderTemplateForEach=function(a,b,d,h,i){var j,k=function(b,c){j=i.createChildContext(g.utils.unwrapObservable(b),d.as),j.$index=c;var e=typeof a=="function"?a(b,j):a;return f(null,"ignoreTargetNode",e,j,d)},l=function(a,b,e){c(b,j),d.afterRender&&d.afterRender(b,a)};return g.dependentObservable(function(){var a=g.utils.unwrapObservable(b)||[];typeof a.length=="undefined"&&(a=[a]);var c=g.utils.arrayFilter(a,function(a){return d.includeDestroyed||a===e||a===null||!g.utils.unwrapObservable(a._destroy)});g.dependencyDetection.ignore(g.utils.setDomNodeChildrenFromArrayMapping,null,[h,c,k,d,l])},null,{disposeWhenNodeIsRemoved:h})};var h="__ko__templateComputedDomDataKey__";g.bindingHandlers.template={init:function(a,b){var c=g.utils.unwrapObservable(b());if(typeof c!="string"&&!c.name&&(a.nodeType==1||a.nodeType==8)){var d=a.nodeType==1?a.childNodes:g.virtualElements.childNodes(a),e=g.utils.moveCleanedNodesToContainerElement(d);(new g.templateSources.anonymousTemplate(a)).nodes(e)}return{controlsDescendantBindings:!0}},update:function(a,b,c,d,e){var f=g.utils.unwrapObservable(b()),h={},j=!0,k,l=null;typeof f!="string"&&(h=f,f=h.name,"if"in h&&(j=g.utils.unwrapObservable(h["if"])),j&&"ifnot"in h&&(j=!g.utils.unwrapObservable(h.ifnot)),k=g.utils.unwrapObservable(h.data));if("foreach"in h){var m=j&&h.foreach||[];l=g.renderTemplateForEach(f||a,m,h,a,e)}else if(!j)g.virtualElements.emptyNode(a);else{var n="data"in h?e.createChildContext(k,h.as):e;l=g.renderTemplate(f||a,n,h,a)}i(a,l)}},g.expressionRewriting.bindingRewriteValidators.template=function(a){var b=g.expressionRewriting.parseObjectLiteral(a);return b.length==1&&b[0].unknown?null:g.expressionRewriting.keyValueArrayContainsKey(b,"name")?null:"This template engine does not support anonymous templates nested within its templates"},g.virtualElements.allowedBindings.template=!0}(),g.exportSymbol("setTemplateEngine",g.setTemplateEngine),g.exportSymbol("renderTemplate",g.renderTemplate),g.utils.compareArrays=function(){function c(c,e,f){return c=c||[],e=e||[],c.length<=e.length?d(c,e,a,b,f):d(e,c,b,a,f)}function d(a,b,c,d,e){var f=Math.min,g=Math.max,h=[],i,j=a.length,k,l=b.length,m=l-j||1,n=j+l+1,o,p,q,r;for(i=0;i<=j;i++){p=o,h.push(o=[]),q=f(l,i+m),r=g(0,i-1);for(k=r;k<=q;k++)if(!k)o[k]=i+1;else if(!i)o[k]=k+1;else if(a[i-1]===b[k-1])o[k]=p[k-1];else{var s=p[k]||n,t=o[k-1]||n;o[k]=f(s,t)+1}}var u=[],v,w=[],x=[];for(i=j,k=l;i||k;)v=h[i][k]-1,k&&v===h[i][k-1]?w.push(u[u.length]={status:c,value:b[--k],index:k}):i&&v===h[i-1][k]?x.push(u[u.length]={status:d,value:a[--i],index:i}):(u.push({status:"retained",value:b[--k]}),--i);if(w.length&&x.length){var y=j*10,z,A,B,C,D;for(z=A=0;(e||z<y)&&(C=w[A]);A++){for(B=0;D=x[B];B++)if(C.value===D.value){C.moved=D.index,D.moved=C.index,x.splice(B,1),z=B=0;break}z+=B}}return u.reverse()}var a="added",b="deleted";return c}(),g.exportSymbol("utils.compareArrays",g.utils.compareArrays),function(){function a(a){while(a.length&&!g.utils.domNodeIsAttachedToDocument(a[0]))a.splice(0,1);if(a.length>1){var b=a[0],c=a[a.length-1],d=[b];while(b!==c){b=b.nextSibling;if(!b)return;d.push(b)}Array.prototype.splice.apply(a,[0,a.length].concat(d))}return a}function b(b,c,d,f,h){var i=[],j=g.dependentObservable(function(){var b=c(d,h)||[];i.length>0&&(g.utils.replaceDomNodes(a(i),b),f&&g.dependencyDetection.ignore(f,null,[d,b,h])),i.splice(0,i.length),g.utils.arrayPushAll(i,b)},null,{disposeWhenNodeIsRemoved:b,disposeWhen:function(){return i.length==0||!g.utils.domNodeIsAttachedToDocument(i[0])}});return{mappedNodes:i,dependentObservable:j.isActive()?j:e}}var c="setDomNodeChildrenFromArrayMapping_lastMappingResult";g.utils.setDomNodeChildrenFromArrayMapping=function(d,f,h,i,j){function x(b,c){w=l[c],q!==c&&(u[b]=w),w.indexObservable(q++),a(w.mappedNodes),o.push(w),s.push(w)}function y(a,b){if(a)for(var c=0,d=b.length;c<d;c++)b[c]&&g.utils.arrayForEach(b[c].mappedNodes,function(d){a(d,c,b[c].arrayEntry)})}f=f||[],i=i||{};var k=g.utils.domData.get(d,c)===e,l=g.utils.domData.get(d,c)||[],m=g.utils.arrayMap(l,function(a){return a.arrayEntry}),n=g.utils.compareArrays(m,f),o=[],p=0,q=0,r=[],s=[],t=[],u=[],v=[],w;for(var z=0,A,B;A=n[z];z++){B=A.moved;switch(A.status){case"deleted":B===e&&(w=l[p],w.dependentObservable&&w.dependentObservable.dispose(),r.push.apply(r,a(w.mappedNodes)),i.beforeRemove&&(t[z]=w,s.push(w))),p++;break;case"retained":x(z,p++);break;case"added":B!==e?x(z,B):(w={arrayEntry:A.value,indexObservable:g.observable(q++)},o.push(w),s.push(w),k||(v[z]=w))}}y(i.beforeMove,u),g.utils.arrayForEach(r,i.beforeRemove?g.cleanNode:g.removeNode);for(var z=0,C=g.virtualElements.firstChild(d),D,E;w=s[z];z++){w.mappedNodes||g.utils.extend(w,b(d,h,w.arrayEntry,j,w.indexObservable));for(var F=0;E=w.mappedNodes[F];C=E.nextSibling,D=E,F++)E!==C&&g.virtualElements.insertAfter(d,E,D);!w.initialized&&j&&(j(w.arrayEntry,w.mappedNodes,w.indexObservable),w.initialized=!0)}y(i.beforeRemove,t),y(i.afterMove,u),y(i.afterAdd,v),g.utils.domData.set(d,c,o)}}(),g.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",g.utils.setDomNodeChildrenFromArrayMapping),g.nativeTemplateEngine=function(){this.allowTemplateRewriting=!1},g.nativeTemplateEngine.prototype=new g.templateEngine,g.nativeTemplateEngine.prototype.renderTemplateSource=function(a,b,c){var d=!(g.utils.ieVersion<9),e=d?a.nodes:null,f=e?a.nodes():null;if(f)return g.utils.makeArray(f.cloneNode(!0).childNodes);var h=a.text();return g.utils.parseHtmlFragment(h)},g.nativeTemplateEngine.instance=new g.nativeTemplateEngine,g.setTemplateEngine(g.nativeTemplateEngine.instance),g.exportSymbol("nativeTemplateEngine",g.nativeTemplateEngine),function(){g.jqueryTmplTemplateEngine=function(){function c(){if(a<2)throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.")}function e(a,b,c){return d.tmpl(a,b,c)}var a=this.jQueryTmplVersion=function(){if(typeof d=="undefined"||!d.tmpl)return 0;try{if(d.tmpl.tag.tmpl.open.toString().indexOf("__")>=0)return 2}catch(a){}return 1}();this.renderTemplateSource=function(a,f,g){g=g||{},c();var h=a.data("precompiled");if(!h){var i=a.text()||"";i="{{ko_with $item.koBindingContext}}"+i+"{{/ko_with}}",h=d.template(null,i),a.data("precompiled",h)}var j=[f.$data],k=d.extend({koBindingContext:f},g.templateOptions),l=e(h,j,k);return l.appendTo(b.createElement("div")),d.fragments={},l},this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+a+" })()) }}"},this.addTemplate=function(a,c){b.write("<script type='text/html' id='"+a+"'>"+c+"</script>")},a>0&&(d.tmpl.tag.ko_code={open:"__.push($1 || '');"},d.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},g.jqueryTmplTemplateEngine.prototype=new g.templateEngine;var a=new g.jqueryTmplTemplateEngine;a.jQueryTmplVersion>0&&g.setTemplateEngine(a),g.exportSymbol("jqueryTmplTemplateEngine",g.jqueryTmplTemplateEngine)}()})})(window,document,navigator,window.jQuery)})(),function(){var $document,$window,Falcon,arrayContains,arrayPeek,arrayRemove,arrayUnique,arraysEqual,compact,countSubstrings,defer,delay,endsWith,extend,findKey,flattenObjectKeys,isArray,isBoolean,isEmpty,isFunction,isNumber,isObject,isString,key,objectKeys,objectValues,objectsEqual,startsWith,trim,trimSlashes,value,_bindingContext,_foreach,_getItems,_options,_ref,_ref2,_shouldUpdate,__slice=Array.prototype.slice,__hasProp=Object.prototype.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},__indexOf=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};isObject=function(a){return a!=null&&Object.prototype.toString.call(a)==="[object Object]"},isFunction=function(a){return a!=null&&Object.prototype.toString.call(a)==="[object Function]"},isBoolean=function(a){return a!=null&&Object.prototype.toString.call(a)==="[object Boolean]"},isArray=function(a){return a!=null&&Object.prototype.toString.call(a)==="[object Array]"},isString=function(a){return a!=null&&Object.prototype.toString.call(a)==="[object String]"},isNumber=function(a){return a!=null&&Object.prototype.toString.call(a)==="[object Number]"},isEmpty=function(a){var b,c;if(isObject(a)){for(b in a)return c=a[b],!1;return!0}return isString(a)||isArray(a)?a.length===0:a===null||typeof a=="undefined"?!0:!1},trim=function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},trimSlashes=function(a){return a.replace(/^\//,"").replace(/\/$/,"")},startsWith=function(a,b){return a.indexOf(b)===0},endsWith=function(a,b){return a.indexOf(b,a.length-b.length)!==-1},countSubstrings=function(a,b){return a.split(b).length-1},objectKeys=function(a){var b,c;c=[];for(b in a)c.push(b);return c},objectValues=function(a){var b,c,d;d=[];for(b in a)c=a[b],d.push(c);return d},objectsEqual=function(a,b){var c,d;for(c in a){d=a[c];if(b[c]!==d)return!1}for(c in b){d=b[c];if(a[c]!==d)return!1}return!0},compact=function(a){var b,c,d;isObject(a)||(a={}),c={};for(b in a)d=a[b],d!=null&&(c[b]=d);return c},extend=function(a,b){var c,d;a==null&&(a={}),isObject(b)||(b={});for(c in b)d=b[c],a[c]=d;return a},findKey=function(a,b){var c,d;for(c in a){d=a[c];if(d===b)return c}},flattenObjectKeys=function(a,b){var c,d,e;c=[],isString(b)||(b="");for(d in a)e=a[d],isObject(e)?c=c.concat(flattenObjectKeys(e,""+b+d+".")):c.push(""+b+d);return c},arraysEqual=function(a,b){var c,d,e;if(a.length!==b.length)return!1;for(c=0,e=a.length;c<e;c++){d=a[c];if(b[c]!==d)return!1}return!0},arrayPeek=function(a){return a[a.length-1]},arrayContains=function(a,b){var c,d,e;if(isFunction(a.indexOf))return a.indexOf(b)!==-1;if(isArray(a))for(d=0,e=a.length;d<e;d++){c=a[d];if(c===b)return!0}return!1},arrayUnique=function(a){var b,c,d,e,f;c={};for(e=0,f=a.length;e<f;e++)b=a[e],c[b]=!0;return function(){var a;a=[];for(b in c)d=c[b],a.push(b);return a}()},arrayRemove=function(a,b){var c,d,e,f;if(!isArray(a))return[];isArray(b)||(b=[b]);for(d=0,f=b.length;d<f;d++)c=b[d],a=function(){var b,d,f;f=[];for(b=0,d=a.length;b<d;b++)e=a[b],e!==c&&f.push(e);return f}();return a},delay=function(a,b){var c;return isFunction(a)&&(c=[b,a],a=c[0],b=c[1]),isNumber(a)||(a=1),isFunction(b)||(b=function(){}),a<1&&(a=1),setTimeout(b,a)},defer=function(a){return isFunction(a)||(a=function(){}),setTimeout(a,1)},Falcon={version:"0.2.0",applicationElement:"body",baseApiUrl:"",baseTemplateUrl:"",cache:!0,apply:function(a,b,c){var d,e;return isFunction(b)&&(d=[c,b],b=d[0],c=d[1]),isString(b)||(b=""),b=trim(b),isEmpty(b)&&(b=(e=Falcon.applicationElement)!=null?e:"body"),isFunction(c)||(c=function(){return ko.observable()}),document.createElement("template"),$(function(){var d;return $("template").each(function(a,b){var c;return b=$(b),c=b.attr("id"),c!=null&&Falcon.View.cacheTemplate("#"+c,b.html()),b.remove()}),d=$(b),d.attr("data-bind","view: $data"),ko.applyBindings(a,d[0]),c()})},isModel:function(a){return a!=null&&a instanceof Falcon.Model},isCollection:function(a){return a!=null&&a instanceof Falcon.Collection},isView:function(a){return a!=null&&a instanceof Falcon.View},isDataObject:function(a){return a!=null&&(a instanceof Falcon.Model||a instanceof Falcon.Collection)},isFalconObject:function(a){return a!=null&&a instanceof Falcon.Class}},this.Falcon=Falcon,$window=$(window),$document=$(document),Falcon.Class=function(){function a(){this._events={}}return a.prototype["super"]=function(){},a.extend=function(a,b){var c,d,e;return a==null&&(a={}),b==null&&(b={}),e=this,c=null,Object.prototype.hasOwnProperty.call(a,"constructor")?c=a.constructor:c=function(){return e.apply(this,arguments)},d=function(){return this.constructor=c},d.prototype=e.prototype,c.prototype=new d,extend(c.prototype,a),extend(c,e),extend(c,b),c.__super__=e.prototype,c},a.prototype._events=null,a.prototype._super=function(){var a,b;return b=arguments[0],a=2<=arguments.length?__slice.call(arguments,1):[],this.__super__[b].apply(this,a)},a.prototype.on=function(a,b,c){var d,e;return!isString(a)||!isFunction(b)?this:(c==null&&(c=this),a=trim(a).toLowerCase(),isEmpty(a)?this:(((e=(d=this._events)[a])!=null?e:d[a]=[]).push({action:b,context:c}),this))},a.prototype.off=function(a,b){var c;return isString(a)?(a=trim(a).toLowerCase(),isEmpty(a)||this._events[a]==null?this:(isFunction(b)?(this._events[a]=function(){var d,e,f,g;f=this._events[a],g=[];for(d=0,e=f.length;d<e;d++)c=f[d],c.action!==b&&g.push(c);return g}.call(this),this._events[a].length<=0&&(this._events[a]=null)):this._events[a]=null,this)):this},a.prototype.has=function(a,b){var c,d,e,f;if(!isString(a))return!1;a=trim(a).toLowerCase();if(isEmpty(a)||this._events[a]==null)return!1;if(this._events[a]!=null&&!isFunction(b))return!0;f=this._events[a];for(d=0,e=f.length;d<e;d++){c=f[d];if(c.action===b)return!0}return!1},a.prototype.relay=function(a,b){var c,d=this;return isString(b)||(c=[b,a],a=c[0],b=c[1]),Falcon.isFalconObject(a)?isEmpty(b)?this:(a.on(b,function(){return d.trigger.apply(d,[b].concat(__slice.call(arguments)))}),this):this},a.prototype.trigger=function(){var a,b,c,d,e,f;b=arguments[0],a=2<=arguments.length?__slice.call(arguments,1):[];if(!isString(b))return this;b=trim(b).toLowerCase();if(isEmpty(b)||this._events[b]==null)return this;f=this._events[b];for(d=0,e=f.length;d<e;d++)c=f[d],c.action.apply(c.context,a);return this},a}(),Falcon.Model=function(a){function b(a,c){var d,e,f,g;b.__super__.constructor.call(this),a=ko.utils.unwrapObservable(a),c=ko.utils.unwrapObservable(c),c==null&&Falcon.isModel(a)&&(f=[a,c],c=f[0],a=f[1]),Falcon.isModel(a)&&(a=a.unwrap()),this.loading=ko.observable(this.loading),this.parent=c,this.initialize(a),isEmpty(a)||this.fill(a),g=this.fields;for(d in g)e=g[d],this[e]==null&&isString(e)&&(this[e]=null)}return __extends(b,a),b.extend=function(a){return Falcon.Class.extend(Falcon.Model,a)},b.prototype.id=null,b.prototype.url=null,b.prototype.parent=null,b.prototype.fields={},b.prototype.definitions={},b.prototype.loading=!1,b.prototype.initialize=function(a){},b.prototype.get=function(a){return isString(a)?ko.utils.unwrapObservable(this[a]):this.undefined},b.prototype.set=function(a,b){var c,d;if(isObject(a)){for(c in a)d=a[c],this.set(c,d);return this}return isString(a)?(ko.isObservable(this[a])?this[a](b):this[a]=b,this):this},b.prototype.toggle=function(a){return this.set(a,!this.get(a))},b.prototype.fill=function(a){var b,c,d,e,f,g,h;if(isNumber(a)||isString(a))a={id:a};if(!isObject(a))return this;Falcon.isModel(a)&&(a=a.unwrap());if(isEmpty(a))return this;c={};if(isObject(this.fields)&&!isEmpty(this.fields))for(d in a)g=a[d],c[(h=this.fields[d])!=null?h:d]=g;else c=a;e=objectKeys(Falcon.Model.prototype),b=arrayRemove(objectKeys(this),e),f=arrayRemove(e,b),f=arrayRemove(f,"id"),f=arrayUnique(f);for(d in c){g=c[d];if(__indexOf.call(f,d)>=0)continue;g=ko.utils.unwrapObservable(g),Falcon.isModel(this[d])?isEmpty(g)||this[d].fill(g):Falcon.isCollection(this[d])?isEmpty(g)&&this[d].length()<=0||this[d].fill(g):ko.isObservable(this[d])?ko.isWriteableObservable(this[d])&&this[d](g):this[d]=g}return this},b.prototype.unwrap=function(){var a,b,c,d,e,f;c={},b=arrayRemove(objectKeys(this),objectKeys(Falcon.Model.prototype)),b[b.length]="id",b=arrayUnique(b);for(e=0,f=b.length;e<f;e++)a=b[e],d=this[a],c[a]=Falcon.isDataObject(d)?d.unwrap():d;return c},b.prototype.serialize=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;h={},!isBoolean(b)&&isBoolean(a)&&(q=[a,b],b=q[0],a=q[1]),isBoolean(b)||(b=!0),isEmpty(a)&&(a=null),isString(a)&&(a=trim(a).split(",")),a==null&&(a=this.fields),k=[],g=[];if(isArray(a)&&!isEmpty(a))if(isObject(this.fields))for(m=0,o=a.length;m<o;m++)c=a[m],k[k.length]=(r=findKey(this.fields,c))!=null?r:c,g[g.length]=c;else for(n=0,p=a.length;n<p;n++)c=a[n],k[k.length]=c,g[g.length]=c;else if(isObject(a)&&!isEmpty(a))for(i in a)e=a[i],k[k.length]=i,g[g.length]=e in this?e:i;else k=g=arrayRemove(objectKeys(this),objectKeys(Falcon.Model.prototype));k.push("id"),k=arrayUnique(k),g.push("id"),g=arrayUnique(g);for(d in g)f=g[d],j=k[d],l=this[f],Falcon.isDataObject(l)?h[j]=b?l.serialize():l.serialize(["id"]):ko.isObservable(l)?h[j]=ko.utils.unwrapObservable(l):isFunction(l)||(h[j]=l);return h},b.prototype.makeUrl=function(a,b){var c,d,e,f,g,h;h=isFunction(this.url)?this.url():this.url,isString(h)||(h=""),h=trim(h),isString(a)||(a=""),a=a.toUpperCase(),a!=="GET"&&a!=="PUT"&&a!=="POST"&&a!=="DELETE"&&(a="GET"),b=Falcon.isModel(b)?b:this.parent,c="",g=h.lastIndexOf("."),g>-1&&(c=h.slice(g),h=h.slice(0,g)),startsWith(h,"/")||(h="/"+h),Falcon.isModel(b)?(f=b.makeUrl(),d=f.lastIndexOf("."),e=f.lastIndexOf("/"),e<d&&(d>-1&&(f=f.slice(0,d)),f=trim(f)),h=""+f+h):isString(Falcon.baseApiUrl)&&(h=""+Falcon.baseApiUrl+h);if(a==="GET"||a==="PUT"||a==="DELETE")h.slice(-1)!=="/"&&(h+="/"),h+=ko.utils.unwrapObservable(this.id);return""+h+c},b.prototype.remoteFieldsArray=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;b==null&&(b=""),isString(a)&&(a=a.split(",")),isArray(a)||(a=[]),l=[],m={},j={},p={};if(isObject(this.fields)){u=this.fields;for(e in u)o=u[e],p[e]=o}else if(isArray(this.fields)){v=this.fields;for(q=0,s=v.length;q<s;q++)d=v[q],p[d]=d}p["id"]==null&&(p.id="id");for(r=0,t=a.length;r<t;r++)h=a[r],isString(h)&&(h.indexOf(".")>=0?(w=h.split(".",2),i=w[0],f=w[1],n=(x=j[i])!=null?x:findKey(p,i),n!=null&&(j[i]==null&&(j[i]=n),((y=m[n])!=null?y:m[n]=[]).push(f))):(n=findKey(p,h))!=null&&l.push(""+b+n));for(h in j){k=j[h];if(!isFunction(this.definitions[h]))continue;g=this.definitions[h]().prototype,Falcon.isDataObject(g)&&(c=g.remoteFieldsArray(m[k],""+b+k+"."),l=l.concat(c))}return l},b.prototype.sync=function(a,b){var c,d,e,f,g,h,i,j=this;isFunction(b)&&(b={complete:b}),isString(b)&&(b={fields:trim(b).split(",")}),isArray(b)&&(b={fields:b}),isObject(b)||(b={}),isObject(b.data)||(b.data={}),isString(b.dataType)||(b.dataType="json"),isString(b.contentType)||(b.contentType="application/json"),isFunction(b.success)||(b.success=function(){}),isFunction(b.complete)||(b.complete=function(){}),isFunction(b.error)||(b.error=function(){}),Falcon.isModel(b.parent)||(b.parent=this.parent),isObject(b.fields)&&(b.fields=flattenObjectKeys(b.fields)),isArray(b.fields)||(b.fields=[]),isObject(b.params)||(b.params={}),isBoolean(b.fill)||(b.fill=!0),isObject(b.headers)||(b.headers={}),a=trim(isString(a)?a.toUpperCase():"GET"),a!=="GET"&&a!=="POST"&&a!=="PUT"&&a!=="DELETE"&&(a="GET"),c={};if(!isEmpty(b.data)){h=b.data;for(e in h)g=h[e],c[e]=g}if(a==="POST"||a==="PUT")c=extend(this.serialize(b.fields),c);return d=isEmpty(c)?"":JSON.stringify(c),f=(i=b.url)!=null?i:this.makeUrl(a,b.parent),b.fields.length>0&&b.params["fields"]==null&&(b.params.fields=b.fields),isArray(b.params.fields)&&(b.params.fields=trim(b.params.fields.join(","))),isEmpty(b.params)||(f.indexOf("?")>-1||(f+="?"),f+=function(){var a,c;a=b.params,c=[];for(e in a)g=a[e],c.push(""+e+"="+g);return c}().join("&")),this.loading(!0),$.ajax({url:f,type:a,data:d,dataType:b.dataType,contentType:b.contentType,cache:Falcon.cache,headers:b.headers,beforeSend:function(a){return a.withCredentials=!0},success:function(c,d,e){var f;b.fill&&j.fill(c);switch(a){case"GET":j.trigger("fetch",c);break;case"POST":j.trigger("create",c);break;case"PUT":j.trigger("save",c);break;case"DELETE":j.trigger("destroy",c)}return(f=b.success).call.apply(f,[j,j].concat(__slice.call(arguments)))},error:function(a){var c;c=a.responseText;try{isString(c)&&(c=JSON.parse(c))}catch(d){}return b.error.call(j,j,c,a)},complete:function(a){var c;return j.loading(!1),(c=b.complete).call.apply(c,[j,j].concat(__slice.call(arguments)))}}),this},b.prototype.fetch=function(a){return this.sync("GET",a)},b.prototype.create=function(a){return this.sync("POST",a)},b.prototype.save=function(a){return this.sync("PUT",a)},b.prototype.destroy=function(a){return this.sync("DELETE",a)},b.prototype.equals=function(a){return a=ko.utils.unwrapObservable(a),Falcon.isModel(a)?a.get("id")===this.get("id"):isNumber(a)?a===this.get("id"):!1},b.prototype.mixin=function(a){var b,c,d=this;isObject(a)||(a={});for(b in a)c=a[b],Falcon.isDataObject(this[b])?this[b].mixin(c):ko.isObservable(c)?this[b]=ko.observable(ko.utils.unwrapObservable(c)):isFunction(c)?function(){var a;return a=c,d[b]=function(){var b;return b=1<=arguments.length?__slice.call(arguments,0):[],a.call.apply(a,[d,d].concat(__slice.call(b)))}}():this[b]=c;return this},b.prototype.clone=function(a){return a=a!=null||a===null?a:this.parent,new this.constructor(this.unwrap(),a)},b.prototype.copy=function(a){var b;return isArray(a)||(a=["id","parent"]),b=new this.constructor,b.fill(this.serialize(a)),arrayContains(a,"parent")&&(b.parent=this.parent),b},b.prototype.isNew=function(){return this.get("id")==null},b}(Falcon.Class),Falcon.View=function(a){function c(){var a,d,e=this;c.__super__.constructor.call(this),a=this.makeUrl(),this.is_loaded=ko.observable(!1),this.is_destroyed=!1,this._child_views=[],d=function(){return e._loaded_url=a,e.is_loaded(!0),e.trigger("load")},this.initialize.apply(this,arguments),isEmpty(a)||a in b?d():startsWith(a,"#")?(b[a]=$(a).html(),d()):$.ajax({url:a,type:"GET",cache:!1,error:function(){return console.log("ERROR LOADING TEMPLATE "+a),e.trigger("error")},success:function(c){return b[a]=c,d()}})}var b;return __extends(c,a),b={},c.cacheTemplate=function(a,c){isString(a)||(a=""),isString(c)||(c=""),a=trim(a),b[a]=c},c.prototype.url=null,c.prototype._loaded_url=null,c.prototype.is_loaded=!1,c.prototype.is_destroyed=!1,c.prototype.makeUrl=function(){var a,b;return a=ko.utils.unwrapObservable(this.url),isFunction(a)&&(a=a()),isString(a)||(a=""),a=trim(a),(b=a.slice(0,1))!=="/"&&b!=="#"&&(a="/"+a),isString(Falcon.baseTemplateUrl)&&startsWith(a,"/")&&(a=""+Falcon.baseTemplateUrl+a),a},c.prototype.template=function(){var a;return ko.utils.unwrapObservable(this.is_loaded)?(a=b[this._loaded_url])!=null?a:"":""},c.prototype.destroy=function(){var a,b,c,d;if(this.is_destroyed)return;d=this._child_views;for(b=0,c=d.length;b<c;b++)a=d[b],a.destroy();this.dispose.apply(this,arguments),this._child_views=null,this.is_destroyed=!0},c.prototype.initialize=function(){},c.prototype.dispose=function(){},c.prototype._addChildView=function(a){if(!Falcon.isView(a))return;return this._child_views.push(a)},c.prototype.viewModel=function(){var a,b,c,d=this;c={__falcon_addChildView__:function(a){return d._addChildView(a)}};for(a in this){b=this[a];if(a in Falcon.View.prototype)continue;isFunction(b)&&!ko.isObservable(b)&&(b=function(){var a;return a=b,function(){var b;return b=1<=arguments.length?__slice.call(arguments,0):[],a.call.apply(a,[d].concat(__slice.call(b)))}}()),c[a]=b}return c},c}(Falcon.Class),Falcon.Collection=function(a){function c(a,b){var d,e=this;c.__super__.constructor.call(this),a=ko.utils.unwrapObservable(a),b=ko.utils.unwrapObservable(b),b==null&&Falcon.isModel(a)&&(d=[a,b],b=d[0],a=d[1]),this.model!=null&&this.url==null&&(this.url=this.model.prototype.url),this.parent=b,this.length=ko.observable(ko.utils.unwrapObservable(this.length)),this.loading=ko.observable(ko.utils.unwrapObservable(this.loading)),this.populated=ko.computed(function(){return e.length()>0}),this._mappings=[],this.reset(),isEmpty(a)||this.fill(a),this.initialize(a)}var b;return __extends(c,a),c.prototype._mappings=null,c.extend=function(a){return Falcon.Class.extend(Falcon.Collection,a)},c.prototype.models=null,c.prototype.model=null,c.prototype.__change_count__=0,c.prototype.url=null,c.prototype.length=0,c.prototype.parent=null,c.prototype.loading=!1,c.prototype.initialize=function(){},c.prototype.fill=function(a,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;if(this.model==null)return this;a==null&&(a=[]),Falcon.isCollection(a)&&(a=a.models()),ko.isObservable(a)&&(a=ko.utils.unwrapObservable(a)),isArray(a)||(a=[a]),j=[],c==null&&(c={}),isObject(c)||(c={}),h=c.method,isString(h)||(h=""),h=h.toLowerCase(),h!=="replace"&&h!=="append"&&h!=="prepend"&&h!=="merge"&&(h="replace");if(h!=="replace"&&isEmpty(a))return[];this.__change_count__++;for(d=0,o=a.length;d<o;d++){f=a[d],j[d]=new this.model({},this.parent),x=this._mappings;for(k=0,p=x.length;k<p;k++)g=x[k],j[d].mixin(g);Falcon.isModel(f)&&(f=f.serialize()),isEmpty(f)||j[d].fill(f)}if(h==="replace")this.models(j);else if(h==="merge"){w=this.models();for(l=0,q=j.length;l<q;l++){i=j[l],e=b(i),v=null;for(m=0,r=w.length;m<r;m++){f=w[m];if(!e(f))continue;v=f;break}v?v.fill(i):this.models.push(i)}}else if(h==="prepend"){u=j.length-1;for(d=0,s=j.length;d<s;d++)i=j[d],this.models.unshift(j[u-d])}else if(h==="append")for(n=0,t=j.length;n<t;n++)i=j[n],this.models.push(i);return this.length(this.models().length),j},c.prototype.unwrap=function(){var a,b,c,d;b=[],d=this.models();for(a in d)c=d[a],b[a]=Falcon.isDataObject(c)?c.unwrap():c;return b},c.prototype.serialize=function(a,b){var c,d,e,f;d=[],f=this.models();for(c in f)e=f[c],d[c]=Falcon.isDataObject(e)?e.serialize(a,b):e;return d},c.prototype.makeUrl=function(a){var b,c,d,e;return e=isFunction(this.url)?this.url():this.url,isString(e)||(e=""),e=trim(e),isString(a)||(a=""),a=a.toUpperCase(),a!=="GET"&&a!=="PUT"&&a!=="POST"&&a!=="DELETE"&&(a="GET"),startsWith(e,"/")||(e="/"+e),Falcon.isModel(this.parent)?(d=this.parent.makeUrl(),b=d.lastIndexOf("."),c=d.lastIndexOf("/"),c<b&&(b>-1&&(d=d.slice(0,b)),d=trim(d)),e=""+d+e):isString(Falcon.baseApiUrl)&&(e=""+Falcon.baseApiUrl+e),e},c.prototype.fetch=function(a){return this.sync("GET",a)},c.prototype.remoteFieldsArray=function(a,b){return this.model.prototype.remoteFieldsArray(a,b)},c.prototype.sync=function(a,b){var c,d,e,f,g,h,i,j=this;isFunction(b)&&(b={success:b}),isObject(b)||(b={}),isObject(b.data)||(b.data={}),isString(b.dataType)||(b.dataType="json"),isString(b.contentType)||(b.contentType="application/json"),isFunction(b.success)||(b.success=function(){}),isFunction(b.complete)||(b.complete=function(){}),isFunction(b.error)||(b.error=function(){}),isObject(b.fields)&&(b.fields=flattenObjectKeys(b.fields)),isArray(b.fields)||(b.fields=[]),isObject(b.params)||(b.params={}),isBoolean(b.fill)||(b.fill=!0),isObject(b.headers)||(b.headers={}),a=isString(a)?a.toUpperCase():"GET",a!=="GET"&&a!=="POST"&&a!=="PUT"&&a!=="DELETE"&&(a="GET"),a=trim(a),c={};if(!isEmpty(b.data)){h=b.data;for(d in h)g=h[d],c[d]=g}f=(i=b.url)!=null?i:trim(this.makeUrl(a));if(f==null||!isString(f))return;return b.params["fields"]!=null&&b.fields.length>0||(e=this.remoteFieldsArray(b.fields),e.length<=0||(b.params.fields=e)),isArray(b.params.fields)&&(b.params.fields=trim(b.params.fields.join(","))),isEmpty(b.params)||(f.indexOf("?")>-1||(f+="?"),f+=function(){var a,c;a=b.params,c=[];for(d in a)g=a[d],c.push(""+d+"="+g);return c}().join("&")),this.loading(!0),$.ajax({url:f,type:a,data:c,dataType:b.dataType,contentType:b.contentType,cache:Falcon.cache,headers:b.headers,success:function(c,d,e){var f;return c==null&&(c=[]),isString(c)&&(c=JSON.parse(c)),isEmpty(c)&&(c=JSON.parse(e.responseText)),b.fill&&a==="GET"&&j.fill(c,b),(f=b.success).call.apply(f,[j,j].concat(__slice.call(arguments)))},error:function(a){var c;c=a.responseText;try{isString(c)&&(c=JSON.parse(c))}catch(d){}return b.error.call(j,j,c,a)},complete:function(){var a;return j.loading(!1),(a=b.complete).call.apply(a,[j,j].concat(__slice.call(arguments)))}})},c.prototype.remove=function(a){var b;return a=ko.utils.unwrapObservable(a),Falcon.isCollection(a)&&(a=a.models()),this.__change_count__++,b=isArray(a)?this.models.removeAll(a):this.models.remove(a),isEmpty(b)||this.length(this.models().length),this},c.prototype.append=function(a){return this.fill(a,{method:"append"})},c.prototype.prepend=function(a){return this.fill(a,{method:"prepend"})},c.prototype.unshift=function(){return this.prepend.apply(this,arguments)},c.prototype.shift=function(){var a;return a=this.models.shift(),this.length(this.models().length),a},c.prototype.push=function(){return this.append.apply(this,arguments)},c.prototype.pop=function(){var a;return a=this.models.pop(),this.length(this.models().length),a},c.prototype.sort=function(a){var b;b=this.models();if(!isArray(b))return;return isFunction(a)?b.sort(a):b},c.prototype.create=function(a,b){var c,d=this;if(this.model==null)return;return Falcon.isModel(a)&&(a=a.unwrap()),isObject(a)||(a={}),isFunction(b)&&(b={success:b}),isObject(b)||(b={}),isFunction(b.success)||(b.success=function(){}),isString(b.method)||(b.method="append"),c=b.success,b.success=function(a){var e;return e=d.fill(a,b),e.length===1&&(arguments[0]=e=e[0]),c.apply(e,arguments)},(new this.model(a,this.parent)).create(b)},c.prototype.destroy=function(a,b){var c,d,e,f,g=this;if(this.model==null)return this;a=ko.utils.unwrapObservable(a);if(a==null||a==="all")a=this.models();Falcon.isCollection(a)&&(a=a.models()),isArray(a)||(a=[a]);if(isEmpty(a))return this;isFunction(b)&&(b={success:b}),isObject(b)||(b={}),isFunction(b.success)||(b.success=function(){}),b.parent=this.parent,f=b.success,b.success=function(a){return g.remove(a),f.apply(a,arguments)};for(d=0,e=a.length;d<e;d++)c=a[d],Falcon.isDataObject(c)&&c.destroy(b);return this},c.prototype.at=function(a){var b;return isNumber(a)||(a=0),a=parseInt(a),b=this.models(),a<0&&(a=0),a>=b.length&&(a=b.length-1),b[a]},c.prototype.each=function(a,b){var c,d,e,f,g,h,i;if(!isFunction(a))return this;b==null&&(b=this);if(a.length===1){h=this.models();for(e=0,f=h.length;e<f;e++)d=h[e],a.call(b,d)}else{i=this.models();for(d=0,g=i.length;d<g;d++)c=i[d],a.call(b,c,d)}return this},b=function(a){var b,c;return Falcon.isModel(a)?(c=a,function(a){var b,d;return Falcon.isModel(a)?(b=a.get("id"),d=c.get("id"),b===d):!1}):isNumber(a)||isString(a)?(b=a,function(a){return Falcon.isModel(a)?a.get("id")===b:!1}):a},c.prototype.first=function(a){var c,d,e,f;a=b(a),isFunction(a)||(a=function(){return!0}),f=this.models();for(d=0,e=f.length;d<e;d++){c=f[d];if(a(c))return c}return null},c.prototype.last=function(a){var c,d,e;a=b(a),isFunction(a)||(a=function(){return!0}),e=this.models();for(c in e){d=e[c],d=e[e.length-c-1];if(a(d))return d}return null},c.prototype.slice=function(a,b){return this.models.slice(a,b)},c.prototype.all=function(a){var c;return a=b(a),function(){var b,d,e,f;e=this.models(),f=[];for(b=0,d=e.length;b<d;b++)c=e[b],a(c)&&f.push(c);return f}.call(this)},c.prototype.any=function(a){var c,d,e,f;a=b(a);if(!isFunction(a))return!1;f=this.models();for(d=0,e=f.length;d<e;d++){c=f[d];if(a(c))return!0}return!1},c.prototype.without=function(a){var c;return a=b(a),isFunction(a)?function(){var b,d,e,f;e=this.models(),f=[];for(b=0,d=e.length;b<d;b++)c=e[b],a(c)||f.push(c);return f}.call(this):this.models()},c.prototype.mixin=function(a){var b,c,d,e,f,g,h,i=this;isObject(a)||(a={}),g={};for(b in a)d=a[b],ko.isObservable(d)?g[b]=ko.observable(ko.utils.unwrapObservable(d)):isFunction(d)?function(){var a;return a=d,g[b]=function(){return a.call(arguments[0],arguments[0],i)}}():g[b]=d;h=this.models();for(e=0,f=h.length;e<f;e++)c=h[e],Falcon.isDataObject(c)&&c.mixin(g);return this._mappings.push(g),this},c.prototype.pluck=function(a,b){var c,d,e,f,g,h,i,j,k;isString(a)&&(a=a.split(",")),isArray(a)||(a=[]);if(a.length>0){b==null&&(b=!0),e=[];if(a.length>1){j=this.models();for(f=0,h=j.length;f<h;f++)d=j[f],isObject(d)?e.push(function(){var e,f,g;g=[];for(e=0,f=a.length;e<f;e++)c=a[e],g.push(b?ko.utils.unwrapObservable(d[c]):d[c]);return g}()):e.push(window.undefined)}else if(a.length===1){c=a[0],k=this.models();for(g=0,i=k.length;g<i;g++)d=k[g],isObject(d)?e.push(b?ko.utils.unwrapObservable(d[c]):d[c]):e.push(window.undefined)}return e}return[]},c.prototype.clone=function(a){return a=a===null||Falcon.isModel(a)?a:this.parent,new this.constructor(this.unwrap(),a)},c.prototype.copy=function(a){var b;return isArray(a)||(a=["id","parent"]),b=new this.constructor,b.fill(this.serialize(a)),arrayContains(a,"parent")&&(b.parent=this.parent),b},c.prototype.reset=function(){return this.__change_count__+=1,this.models==null&&(this.models=ko.observableArray([])),this.models.extend({throttle:1}),this.models([]),this.length(0),this},c}(Falcon.Class),Falcon.Report=function(a){function c(a,d){var e;c.__super__.constructor.call(this),isArray(a)&&(e=[d,a],a=e[0],d=e[1]),this.url==null&&(this.url=a!=null?a:""),this.columns==null&&(this.columns=d!=null?d:[]),this.data=ko.observableArray([]),this.loading=ko.observable(!1),this._parameters={},this._formatting={},this._current_request=null,this.haxis=new b,this.vaxis=new b}var b;return __extends(c,a),b=function(){function a(){this.title="",this.format=""}return a.prototype.options=function(){return{title:this.title,format:this.format}},a}(),c.prototype.columns=null,c.prototype.url=null,c.prototype._formatting=null,c.prototype.haxis=null,c.prototype.vaxis=null,c.prototype.data=null,c.prototype._parameters=null,c.prototype.response_handler=function(){},c.prototype.param=function(a,b){return this._parameters[a]=b,this},c.prototype.fetch=function(a){var b,c,d,e,f,g,h,i=this;e=isFunction(this.url)?this.url():this.url,isString(e)||(e="");if(!isString(e))return;isFunction(a)||(a=function(){}),this.loading(!0),d={},g=this._parameters;for(c in g)h=g[c],f=ko.utils.unwrapObservable(h),Falcon.isModel(f)?d[c]=f.get("id"):isFunction(f)?d[c]=f():d[c]=f;e+="/",b=!1;for(c in d)f=d[c],e=e.replace(":"+c+"/",""+f+"/"),b=b||f==null;e=e.slice(0,-1);if(b)return;return e=Falcon.baseApiUrl+e,this._current_request=$.ajax({type:"GET",url:e,data:d,success:function(b){return b==null&&(b=[]),isArray(b)||(b=[b]),i.data(b),i.trigger("success",b),a.apply(i,arguments)},error:function(a){return i.trigger("error",a)},complete:function(){return i._current_request=null,i.loading(!1)}})},c.prototype.request=function(a){var b=this;if(a==null)return;return this.fetch(function(){var c;return c={hAxis:b.haxis.options(),vAxis:b.vaxis.options()},a.draw(b.dataTable(),c)})},c.prototype.format=function(a,b,c){var d;_.isString(a)||(a=""),_.isString(b)||(b=""),a=_.trim(a),b=_.trim(b).toLowerCase();if(_.isEmpty(a))return;if(_.isEmpty(b))return;return d=function(){},b==="number"&&(d=function(){return new google.visualization.NumberFormat(c)}),this._formatting[a]={type:b,formatter:d}},c.prototype.parseColumn=function(a){var b;return _.isString(b)||(b=""),a.split(" ",3)},c.prototype.parseItem=function(a,b){var c,d;b=ko.utils.unwrapObservable(b),c=this._formatting[a];if(c!=null){d=c.type;if(d==="number")return parseFloat(b)}return b},c.prototype.dataTable=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n;g=new google.visualization.DataTable,e=[],l=this.columns;for(b=0,j=l.length;b<j;b++)a=l[b],m=this.parseColumn(a),h=m[0],d=m[1],f=m[2],e.push(d),g.addColumn(h,f),this._formatting[d]!=null&&this._formatting[d].formatter().format(g,b);n=this.data();for(i=0,k=n.length;i<k;i++)c=n[i],isObject(c)&&g.addRow(function(){var a,b,f;f=[];for(a=0,b=e.length;a<b;a++)d=e[a],f.push(this.parseItem(d,c[d]));return f}.call(this));return g},c}(Falcon.Class),Falcon.Event=function(){function a(a){if(a==null)throw new Error("Element must be given");this._element=$(a)}return a.UP_KEY=38,a.DOWN_KEY=40,a.RIGHT_KEY=39,a.LEFT_KEY=37,a.ENTER_KEY=13,a.prototype._element=null,a.prototype.on=function(a,b){var c,d;isString(a)||(a=""),c=this._element,isFunction(b)||(b=function(){}),a=trim(a);if(isEmpty(a))return;return d=function(){var e;return e=1<=arguments.length?__slice.call(arguments,0):[],c.parents("body").length>0?b.call.apply(b,[this].concat(__slice.call(e))):$window.off(a,d)},$window.on(a,d)},a}(),ko.bindingHandlers.view=function(){var getTemplate,getViewModel,makeTemplateValueAccessor,returnVal;return makeTemplateValueAccessor=function(a){return function(){return{data:a,templateEngine:ko.nativeTemplateEngine.instance}}},getViewModel=function(a){var b,c;return b={},a==null&&(a={}),a instanceof Falcon.View?b=a.viewModel():b=ko.utils.unwrapObservable((c=a.viewModel)!=null?c:{}),b},getTemplate=function(a){var b,c;return b="",a==null&&(a={}),a instanceof Falcon.View?b=a.template():b=ko.utils.unwrapObservable((c=a.template)!=null?c:""),b},returnVal={controlsDescendantBindings:!0},{init:function(a,b,c,d,e){var f,g,h;return h=b(),h!=null&&ko.isSubscribable(h)?(f=ko.utils.unwrapObservable(h),g=h.subscribe(function(a){return Falcon.isView(f)&&f.destroy(),f=a}),ko.utils.domNodeDisposal.addDisposeCallback(a,function(){return Falcon.isView(f)&&f.destroy(),g.dispose()})):Falcon.isView(h)&&ko.utils.domNodeDisposal.addDisposeCallback(a,function(){return h.destroy()}),h=ko.utils.unwrapObservable(h),d=getViewModel(h),ko.bindingHandlers.template.init(a,makeTemplateValueAccessor(d),c,d,e),returnVal},update:function(element,valueAccessor,allBindingsAccessor,viewModel,context){var anonymousTemplate,execScripts,originalViewContext,template,value,_ref;value=valueAccessor(),value=ko.utils.unwrapObservable(value),viewModel=getViewModel(value),template=getTemplate(value);if(!isObject(value))return returnVal;originalViewContext=context.$view,context.$view=viewModel,Falcon.isView(originalViewContext)&&originalViewContent.__falcon_addChildView__(value);if(isEmpty(viewModel)||template==null)$(element).empty();else if(!(value instanceof Falcon.View)||value.is_loaded())anonymousTemplate=ko.utils.domData.get(element,"__ko_anon_template__"),((_ref=anonymousTemplate.containerData)!=null?_ref.innerHTML:void 0)!=null?anonymousTemplate.containerData.innerHTML=template:anonymousTemplate.textData=template,ko.bindingHandlers.template.update(element,makeTemplateValueAccessor(viewModel),allBindingsAccessor,viewModel,context),execScripts=!!ko.utils.unwrapObservable(value.execScripts),template!==anonymousTemplate&&execScripts===!0&&$(element).find("script").each(function(index,script){script=$(script);if(script.attr("type").toLowerCase()==="text/javascript")return eval(script.text())});return Falcon.isView(value)&&value.trigger("render"),context.$view=originalViewContext,returnVal}}}(),_getItems=function(a){var b;return b=ko.utils.unwrapObservable(Falcon.isCollection(a)?a.models():a),isArray(b)||(b=[b]),function(){return b}},_shouldUpdate=function(a,b){var c,d;return Falcon.isCollection(b)?(c=b.__change_count__,d=ko.utils.domData.get(a,"__falcon_collection___change_count__"),d===c?!1:(ko.utils.domData.set(a,"__falcon_collection___change_count__",c),!0)):!0},_foreach=(_ref=ko.bindingHandlers["foreach"])!=null?_ref:function(){},ko.bindingHandlers.foreach={init:function(){var a,b,c,d,e;return b=arguments[0],d=arguments[1],a=3<=arguments.length?__slice.call(arguments,2):[],c=ko.utils.unwrapObservable(d()),ko.utils.domData.set(b,"__falcon_collection___change_count__",-1),((e=_foreach["init"])!=null?e:function(){}).apply(null,[b,_getItems(c)].concat(__slice.call(a)))},update:function(){var a,b,c,d,e;b=arguments[0],d=arguments[1],a=3<=arguments.length?__slice.call(arguments,2):[],c=ko.utils.unwrapObservable(d());if(_shouldUpdate(b,c))return((e=_foreach["update"])!=null?e:function(){}).apply(null,[b,_getItems(c)].concat(__slice.call(a)));Falcon.isCollection(c)&&c.trigger("render")}};for(key in _foreach)value=_foreach[key],key in ko.bindingHandlers.foreach||(ko.bindingHandlers.foreach[key]=value);_options=(_ref2=ko.bindingHandlers["options"])!=null?_ref2:function(){},ko.bindingHandlers.options=function(){return{init:function(){var a,b,c,d;return b=arguments[0],c=arguments[1],a=3<=arguments.length?__slice.call(arguments,2):[],value=ko.utils.unwrapObservable(c()),ko.utils.domData.set(b,"__falcon_collection___change_count__",-1),((d=_options["init"])!=null?d:function(){}).apply(null,[b,_getItems(value)].concat(__slice.call(a)))},update:function(){var a,b,c,d;b=arguments[0],c=arguments[1],a=3<=arguments.length?__slice.call(arguments,2):[],value=ko.utils.unwrapObservable(c());if(_shouldUpdate(b,value))return((d=_options["update"])!=null?d:function(){}).apply(null,[b,_getItems(value)].concat(__slice.call(a)));Falcon.isCollection(value)&&value.trigger("render")}}}(),ko.bindingHandlers.log={update:function(a,b){return console.log(ko.utils.unwrapObservable(b()))}},_bindingContext=ko.bindingContext,ko.bindingContext=function(a,b){return this["$view"]==null&&b!=null&&(this.$view=b.$view||b.$root),_bindingContext.call(this,a,b)},ko.bindingContext.prototype=_bindingContext.prototype,ko.virtualElements.allowedBindings.view=!0,ko.virtualElements.allowedBindings.log=!0,ko.virtualElements.allowedBindings.collection=!0,ko.subscribable.fn.classify=function(){var a,b,c,d,e;c=1<=arguments.length?__slice.call(arguments,0):[],a={};for(d=0,e=c.length;d<e;d++){b=c[d];if(!isString(b)||!!isEmpty(trim(b)))continue;b=trim(b),a[b]=!0}return this.extend(a)}}.call(this)