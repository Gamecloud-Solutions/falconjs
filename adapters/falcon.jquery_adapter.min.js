(function(){var a,b,c,d,e,f,g,h,i,j,k,l={}.hasOwnProperty,m=function(a,b){function c(){this.constructor=a}for(var d in b)l.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=function(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)},e=function(a){return null!=a&&"[object Function]"===Object.prototype.toString.call(a)},b=function(a){return null!=a&&"[object Boolean]"===Object.prototype.toString.call(a)},a=function(a){return null!=a&&"[object Array]"===Object.prototype.toString.call(a)},i=function(a){return null!=a&&"[object String]"===Object.prototype.toString.call(a)},g=function(a){return null!=a&&"[object Number]"===Object.prototype.toString.call(a)},f=function(a){return g(a)&&a!==a},d=function(b){var c,d;if(null==b)return!0;if(i(b)||a(b))return 0===b.length;if(h(b)){for(c in b)return d=b[c],!1;return!0}return!1},c="object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return null!=a&&1===a.nodeType&&"string"==typeof a.nodeName},j=function(a){function b(){return k=b.__super__.constructor.apply(this,arguments)}return m(b,a),b.prototype.cache=!1,b.prototype.resolveRequestType=function(a,c,d,e){return b.__super__.resolveRequestType.call(this,a,c,d,e)},b.prototype.resolveContext=function(a,c,d,e){return b.__super__.resolveContext.call(this,a,c,d,e)},b.prototype.standardizeOptions=function(a,c,d,e){return d=b.__super__.standardizeOptions.call(this,a,c,d,e),h(d.data)||(d.data=null),i(d.dataType)||(d.dataType="json"),i(d.contentType)||(d.contentType="application/json"),h(d.params)||(d.params={}),h(d.headers)||(d.headers={}),d.cache=this.cache,d},b.prototype.makeUrl=function(a,c,e,f){var g,h,i;return h=b.__super__.makeUrl.call(this,a,c,e,f),d(e.params)||(h.indexOf("?")>-1||(h+="?"),h+=function(){var a,b;a=e.params,b=[];for(g in a)i=a[g],b.push(""+g+"="+i);return b}().join("&")),h},b.prototype.serializeData=function(a,c,d,e){var f;return f=b.__super__.serializeData.call(this,a,c,d,e),null===f?"":JSON.stringify(d.data)},b.prototype.parseRawResponseData=function(a,c,d,e,f){var g,h,j;return j=b.__super__.parseRawResponseData.call(this,a,c,d,e,f),g=j.data,h=j.xhr,i(g)&&(g=JSON.parse(g)),null==g&&i(h.responseText)&&(g=JSON.parse(h.responseText)),null==g&&(g=Falcon.isModel(a)?{}:[]),g},b.prototype.successResponseHandler=function(a,c,d,e,f){return b.__super__.successResponseHandler.call(this,a,c,d,e,f)},b.prototype.errorResponseHandler=function(a,c,d,e,f){return b.__super__.errorResponseHandler.call(this,a,c,d,e,f)},b.prototype.completeResponseHandler=function(a,c,d,e,f){return b.__super__.completeResponseHandler.call(this,a,c,d,e,f)},b.prototype.sync=function(a,c,d,e){var f,g,h=this;return b.__super__.sync.call(this,a,c,d,e),c=this.resolveRequestType(a,c,d,e),d=this.standardizeOptions(a,c,d,e),e=this.resolveContext(a,c,d,e),!Falcon.isModel(a)||"PUT"!==c&&"POST"!==c||a.validate(d)?(g=this.makeUrl(a,c,d,e),f=this.serializeData(a,c,d,e),$.ajax({type:c,url:g,data:f,dataType:d.dataType,contentType:d.contentType,cache:d.cache,headers:d.headers,success:function(b,f,g){return h.successResponseHandler(a,c,d,e,{data:b,status:f,xhr:g})},error:function(b){return h.errorResponseHandler(a,c,d,e,{xhr:b})},complete:function(b,f){return h.completeResponseHandler(a,c,d,e,{status:f,xhr:b})}})):null},b.prototype.getTemplate=function(a,c,d){return"#"===c.charAt(0)?b.__super__.getTemplate.call(this,a,c,d):($.ajax({url:c,type:"GET",cache:this.cache,error:function(){return console.log("[FALCON] Error Loading Template: '"+c+"'")},success:function(a){return Falcon.View.cacheTemplate(c,a),e(d)?d():void 0}}),this)},b}(Falcon.Adapter),Falcon.adapter=new j}).call(this);